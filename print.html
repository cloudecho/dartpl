<!DOCTYPE HTML>
<html lang="en" class="navy sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ä»0å¼€å§‹å­¦Dart</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-G1TV36NZV5"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-G1TV36NZV5');
        </script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/custom.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "navy";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ä»0å¼€å§‹å­¦Dart</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="å‰è¨€"><a class="header" href="#å‰è¨€">å‰è¨€</a></h1>
<p>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªè·¨å¹³å°çš„åŸç”Ÿåº”ç”¨å¼€å‘æ–¹æ¡ˆï¼Œä½ å¯èƒ½å·²ç»äº†è§£è¿‡Flutterï¼ŒReactNativeç­‰ã€‚
Dartæ˜¯Flutteråº”ç”¨çš„å¼€å‘è¯­è¨€ï¼Œå®ƒä¸“ä¸ºå®¢æˆ·ç«¯ä¼˜åŒ–ï¼Œæ”¯æŒè‡ªåŠ¨å†…å­˜ç®¡ç†å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚
è¿™é‡Œçš„è·¨å¹³å°æŒ‡çš„æ˜¯ä¸€å¥—ä»£ç ï¼Œå¯å‘å¸ƒæˆ iOSã€Androidã€macOSã€Linuxã€WindowsåŠWebåº”ç”¨ã€‚
åŸç”Ÿåº”ç”¨æ˜¯æŒ‡ä»£ç æœ€ç»ˆè¢«ç¼–è¯‘ä¸ºå¹³å°ç›¸å…³çš„æœºå™¨ç ï¼›å¯¹webè€Œè¨€ï¼Œå¯¹åº”çš„æ˜¯javascript+WebAssemblyã€‚</p>
<pre class="mermaid">mindmap
  root((Dart))
    è‡ªåŠ¨å†…å­˜ç®¡ç†
    é¢å‘å¯¹è±¡ç¼–ç¨‹
    å®¢æˆ·ç«¯ä¼˜åŒ–
</pre>
<p>å¦‚ä½•ä½ åˆå­¦ç¼–ç¨‹ï¼Œä¸€ä¸‹å­å¬åˆ°è¿™ä¹ˆå¤šæ¦‚å¿µï¼Œä¹Ÿè®¸è¿˜æ²¡å¼€å§‹å†™ä¸€è¡Œä»£ç å°±å·²ç»å¼€å§‹ç³Šæ¶‚äº†ï¼Œæ²¡æœ‰å…³ç³»ã€‚
è¦çŸ¥é“ï¼Œè®¡ç®—æœºç¼–ç¨‹å°±åƒè‹±è¯­ä¸€æ ·ï¼Œè¦æŒæ¡å®ƒï¼Œé™¤äº†éœ€è¦å…´è¶£ä¹‹å¤–ï¼Œè¿˜éœ€è¦è‰¯å¥½çš„æ€ç»´æ¨¡å¼ä»¥åŠåšæŒä¸æ‡ˆçš„ç»ƒä¹ ã€‚
å¸Œæœ›ä½ åœ¨å­¦ä¹ æœ¬è¯¾ç¨‹æ—¶ï¼Œæ‰“å¼€ä»£ç ç¼–è¾‘å™¨ï¼Œè·Ÿç€ä¸€èµ·ç»ƒä¹ ï¼Œä¸ºä»¥åç¼–ç¨‹æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚åœ¨ä½ æŒæ¡äº†ä¸€é—¨ç¼–ç¨‹è¯­è¨€ä¹‹åï¼Œå†å»å­¦å…¶ä»–ç¼–ç¨‹è¯­è¨€å°±å®¹æ˜“å¤šäº†ã€‚</p>
<h2 id="è¯»è€…èŒƒå›´"><a class="header" href="#è¯»è€…èŒƒå›´">è¯»è€…èŒƒå›´</a></h2>
<p>æœ¬è¯¾ç¨‹å°†è¯¦ç»†ä»‹ç»Dart 3ç¼–ç¨‹è¯­è¨€ ï¼Œä»åŸºæœ¬è¯­æ³•ä¸æ§åˆ¶ç»“æ„åˆ°å¼‚æ­¥ç¼–ç¨‹ï¼Œä»é¢å‘å¯¹è±¡ç¼–ç¨‹åˆ°ç¼–ç å‡†åˆ™ï¼›è¯¾ç¨‹å†…å®¹ç”±æµ…å…¥æ·±ï¼Œæ—¢æœ‰ç†è®ºè®²è§£åˆæœ‰ä»£ç ç¤ºä¾‹ ã€‚ç›¸ä¿¡æ— è®ºä½ æ˜¯ç¼–ç¨‹æ–°æ‰‹è¿˜æ˜¯å…·æœ‰ä¸€å®šç»éªŒçš„ç¨‹åºå‘˜ï¼Œä½ éƒ½å¯ä»¥ä»æœ¬è¯¾ç¨‹ä¸­è·ç›Šã€‚</p>
<h2 id="è¯¾ç¨‹å†…å®¹ç®€ä»‹"><a class="header" href="#è¯¾ç¨‹å†…å®¹ç®€ä»‹">è¯¾ç¨‹å†…å®¹ç®€ä»‹</a></h2>
<p>ç¬¬1ç« ï¼Œä»0å¼€å§‹æ­å»ºå¼€å‘ç¯å¢ƒï¼Œå­¦ä¹  dartå˜é‡ä¸æ•°æ®ç±»å‹åŠæ“ä½œç¬¦ã€‚</p>
<p>ç¬¬2ç« ï¼Œæ§åˆ¶æµã€å‡½æ•°åŠå¼‚å¸¸å¤„ç†ã€‚</p>
<p>ç¬¬3ç« ï¼ŒDart å¼ºå¤§çš„æ¨¡å¼åŒ¹é…åŠŸèƒ½ã€‚</p>
<p>ç¬¬4-5ç« ï¼ŒDart çš„ é¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)ï¼Œç¬¬4ç« å­¦ä¹ ç”¨äºå°è£…ä¿¡æ¯çš„classï¼ˆç±»ï¼‰çš„æ„é€ ï¼Œç¬¬5ç« å­¦ä¹ ç±»çš„ç»§æ‰¿åŠæ‰©å±•ã€‚</p>
<p>ç¬¬6ç« ï¼Œé›†åˆä¸æ³›å‹ã€‚</p>
<p>ç¬¬7ç« ï¼Œå¼‚æ­¥ç¼–ç¨‹ã€‚</p>
<p>ç¬¬8ç« ï¼Œå•å…ƒæµ‹è¯•ã€‚</p>
<p>é™„å½•åŒ…æ‹¬dartå‘½ä»¤è¡Œå·¥å…·ã€ç¼–ç å‡†åˆ™ã€Dartå‘½ä»¤è¡ŒåŠæœåŠ¡ç«¯ç¼–ç¨‹ï¼Œä»¥åŠå¸¸ç”¨packageä»‹ç»ã€‚</p>
<p>æœ¬è¯¾ç¨‹ä¸­çš„ä»£ç å¯å…è´¹ä¸‹è½½ï¼Œä½¿ç”¨çš„dartç‰ˆæœ¬ä¸º3.8+ã€‚</p>
<p>æœ€åï¼Œå¸Œæœ›æœ¬è¯¾ç¨‹èƒ½å¯¹ä½ çš„dartå­¦ä¹ ä¹‹æ—…åŠ©ä¸€è‡‚ä¹‹åŠ›ï¼Œç¥ä½ å­¦ä¹ æ„‰å¿«ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hello-dart-æ­å»ºå¼€å‘ç¯å¢ƒ"><a class="header" href="#hello-dart-æ­å»ºå¼€å‘ç¯å¢ƒ">Hello Dart: æ­å»ºå¼€å‘ç¯å¢ƒ</a></h1>
<p>æ­å»ºå¼€å‘ç¯å¢ƒæ˜¯æˆ‘ä»¬ç¼–ç¨‹çš„èµ·ç‚¹ï¼Œæ–°æ‰‹æœ‰å¯èƒ½å¡åœ¨è¿™ä¸€æ­¥ã€‚å¦‚æœä½ æ˜¯ç»éªŒä¸°å¯Œçš„ç¨‹åºå‘˜ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡ã€‚æ­å»ºå¼€å‘ç¯å¢ƒéœ€è¦è€ƒè™‘çš„ä¸¤ä¸ªä¸»è¦é—®é¢˜æ˜¯å¼€å‘æœºçš„æ“ä½œç³»ç»Ÿä¸ç½‘ç»œç¯å¢ƒã€‚</p>
<p>æˆ‘ä»¬çš„å¼€å‘ç”µè„‘çš„æ“ä½œç³»ç»Ÿå¯èƒ½æ˜¯ä¸‹åˆ—ä¹‹ä¸€:</p>
<ul>
<li>macOS  Sonoma (14), Ventura (13), Monterey (12)</li>
<li>Windows  10,11</li>
<li>ChromeOS</li>
<li>Linux
<ul>
<li>Debian stable</li>
<li>Ubuntu LTS</li>
<li>å…¶ä»–ï¼Œå¦‚Manjaroï¼ŒCentOS Streamï¼ŒLinux Mint</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œæ¨èçš„æ“ä½œç³»ç»Ÿæ˜¯ MacOS æˆ– Linux ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰æ›´ä¸°å¯Œçš„å¼€å‘å·¥å…·åŠå„ç§å‘½ä»¤ï¼Œæå¤§çš„æ–¹ä¾¿äº†è½¯ä»¶å¼€å‘ã€‚å¦‚æœä½ ä½¿ç”¨çš„è®¡ç®—æœºç½‘ç»œä½äºä¸­å›½ï¼Œç”±äºå…¶ç½‘ç»œç‰¹æ®Šæ€§ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ç›¸å…³èµ„æºï¼ˆå„è½¯ä»¶åŒ…/å·¥å…·/åœ¨çº¿æœåŠ¡ï¼‰çš„é•œåƒã€‚</p>
<h2 id="dartdev"><a class="header" href="#dartdev">Dart.dev</a></h2>
<p>å¦‚æœä½ åªæ˜¯æƒ³å¿«é€Ÿæ­å»ºDartæˆ–Flutterå¼€å‘ç¯å¢ƒï¼Œå¯ä»¥è·³è¿‡æœ¬æ®µã€‚</p>
<ol>
<li>é¦–å…ˆæˆ‘ä»¬å»Dartå®˜ç½‘ https://dart.dev ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ <a href="https://dart.dev/get-dart">Get Dart</a>ã€‚</li>
</ol>
<p>æ³¨æ„é¡µé¢ä¸Šçš„æç¤ºï¼Œå¦‚æœä½ å·²ç»å®‰è£…æˆ–æ‰“ç®—å®‰è£…Flutter SDKï¼Œå¯ä»¥è·³è¿‡è¯¥å‘å¯¼ï¼Œå› ä¸ºFlutter SDKåŒ…å«äº†Dart SDKã€‚ æˆ‘ä»¬å­¦ä¹ Dartæœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯ä½¿ç”¨Flutteræ¡†æ¶ï¼Œç¼–å†™è·¨å¹³å°Appã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿™é‡Œç›´æ¥å®‰è£…Flutter SDKã€‚</p>
<ol start="2">
<li>ç‚¹å‡» <a href="https://docs.flutter.dev/get-started/install">install the Flutter SDK</a>ï¼Œ æˆ‘ä»¬æ¥åˆ°äº†Flutter SDK å®‰è£…å‘å¯¼é¡µã€‚</li>
</ol>
<p>æ“ä½œç³»ç»ŸåŠç½‘ç»œç¯å¢ƒçš„ä¸åŒï¼Œä¼šå¯¼è‡´æ­å»ºDartå¼€å‘ç¯å¢ƒçš„æ–¹å¼ä¹Ÿæœ‰æ‰€ä¸åŒã€‚ä½†æ˜¯è¿™äº›æ–¹å¼æœ‰ç€ç±»ä¼¼çš„æ­¥éª¤ã€‚æœ¬æ–‡é€‰å– <code>ä¸­å›½ç½‘ç»œç¯å¢ƒä¸‹çš„Linuxç³»ç»Ÿ</code> å¯¹è¿™äº›æ­¥éª¤è¿›è¡Œè¯´æ˜ã€‚</p>
<h2 id="åœ¨ä¸­å›½ç½‘ç»œç¯å¢ƒä¸‹ä½¿ç”¨-flutter"><a class="header" href="#åœ¨ä¸­å›½ç½‘ç»œç¯å¢ƒä¸‹ä½¿ç”¨-flutter">åœ¨ä¸­å›½ç½‘ç»œç¯å¢ƒä¸‹ä½¿ç”¨ Flutter</a></h2>
<p>æœ‰å¿…è¦è§£é‡Šä¸€ä¸‹é•œåƒæˆ–é•œåƒç«™ç‚¹ã€‚ Flutter SDK ï¼ˆè½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼‰æˆ– Dart SDK ä»¥åŠ dart packageï¼ˆè½¯ä»¶åŒ…ï¼‰ï¼ˆå‘å¸ƒäºpub.devç½‘ç«™ï¼‰ï¼Œæ˜¯æˆ‘ä»¬å¼€å‘Flutteræˆ–Dartç¨‹åºå¿…å¤‡çš„ï¼Œä½†ç”±äºä¸­å›½ç½‘ç»œçš„ç‰¹æ®Šæ€§ï¼Œå¯¼è‡´è®¸å¤šä¸­å›½å¼€å‘è€…æ— æ³•ç›´æ¥ï¼ˆä»å®˜æ–¹æœåŠ¡å™¨ï¼Œç”±è°·æ­Œç»´æŠ¤ï¼‰è·å–è¿™äº›SDKæˆ–packageï¼ˆæˆ–è€…ä¸‹è½½é€Ÿåº¦ææ…¢ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å»å®˜æ–¹æœåŠ¡å™¨çš„é•œåƒç«™ç‚¹å»ä¸‹è½½ã€‚è¿™äº›ä½äºä¸­å›½çš„é•œåƒç«™ç‚¹ä¼šå®šæ—¶ä¸å®˜æ–¹æœåŠ¡å™¨åŒæ­¥ï¼Œç•¥æœ‰å»¶è¿Ÿã€‚</p>
<ol>
<li>åœ¨ç”µè„‘ä¸Šæ‰“å¼€ terminal ï¼ˆç»ˆç«¯å‘½ä»¤è¡Œç•Œé¢ï¼‰ï¼Œä»¥ä¸Šæµ·äº¤é€šå¤§å­¦*nixç”¨æˆ·ç»„é•œåƒä¸ºä¾‹ï¼Œé…ç½®é•œåƒ</li>
</ol>
<pre><code class="language-sh">export PUB_HOSTED_URL=https://mirror.sjtu.edu.cn/dart-pub
export FLUTTER_STORAGE_BASE_URL=https://mirror.sjtu.edu.cn
</code></pre>
<ol start="2">
<li>ä»é•œåƒç«™ç‚¹ä¸‹è½½ Flutter å‹ç¼©åŒ…</li>
</ol>
<p>ä»¥ Flutter 3.32.2 ä¸ºä¾‹ï¼Œ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä¸‹è½½</p>
<pre><code class="language-sh">wget -c -O flutter_linux_3.32.2-stable.tar.xz  $FLUTTER_STORAGE_BASE_URL/flutter_infra_release/releases/stable/linux/flutter_linux_3.32.2-stable.tar.xz
</code></pre>
<p>æ³¨:  macOSä¸windowså¯¹åº”çš„ä¸‹è½½åœ°å€åˆ†åˆ«ä¸º</p>
<pre><code class="language-sh">$FLUTTER_STORAGE_BASE_URL/flutter_infra_release/releases/stable/macos/flutter_macos_3.32.2-stable.zip

$FLUTTER_STORAGE_BASE_URL/flutter_infra_release/releases/stable/windows/flutter_windows_3.32.2-stable.zip
</code></pre>
<ol start="3">
<li>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨äºå®‰è£…Flutterï¼Œ ä¾‹å¦‚ ~/dev</li>
</ol>
<pre><code class="language-sh">mkdir ~/dev
cd ~/dev
</code></pre>
<ol start="4">
<li>å°† flutter_linux_3.32.2-stable.tar.xz æ‹·è´åˆ°å½“å‰ç›®å½•ï¼Œç„¶åè§£å‹</li>
</ol>
<pre><code class="language-sh">tar -xf flutter_linux_3.32.2-stable.tar.xz
</code></pre>
<ol start="5">
<li>å°† Flutter æ·»åŠ åˆ°PATH ç¯å¢ƒå˜é‡ä¸­</li>
</ol>
<pre><code class="language-sh">export PATH="$PWD/flutter/bin:$PATH"
</code></pre>
<ol start="6">
<li>è¿è¡Œ <code>flutter doctor</code> æ¥éªŒè¯å®‰è£…</li>
</ol>
<pre><code class="language-sh">$ flutter doctor

Flutter assets will be downloaded from https://mirror.sjtu.edu.cn. Make sure you trust this
source!
Doctor summary (to see all details, run flutter doctor -v):
[âœ“] Flutter (Channel stable, 3.32.2, on Manjaro Linux 6.6.63-1-MANJARO, locale en_US.UTF-8)
[âœ“] Android toolchain - develop for Android devices (Android SDK version 34.0.0)
[âœ“] Chrome - develop for the web
[âœ“] Linux toolchain - develop for Linux desktop
[âœ“] Android Studio (version 2023.2)
[âœ“] IntelliJ IDEA Community Edition (version 2024.3)
[âœ“] VS Code (version unknown)
    âœ— Unable to determine VS Code version.
[âœ“] Connected device (2 available)
[âœ“] Network resources

â€¢ No issues found!

</code></pre>
<p>æŸ¥çœ‹ Flutter åŠ Dart ç‰ˆæœ¬</p>
<pre><code class="language-sh">$ flutter --version                                                       î‚² âœ” 
Flutter 3.32.2 â€¢ channel stable â€¢ https://github.com/flutter/flutter.git
Framework â€¢ revision 8defaa71a7 (4 days ago) â€¢ 2025-06-04 11:02:51 -0700
Engine â€¢ revision 1091508939 (9 days ago) â€¢ 2025-05-30 12:17:36 -0700
Tools â€¢ Dart 3.8.1 â€¢ DevTools 2.45.1

$ dart --version                                                          î‚² âœ” 
Dart SDK version: 3.8.1 (stable) (Wed May 28 00:47:25 2025 -0700) on "linux_x64"

</code></pre>
<h2 id="é…ç½®ç¯å¢ƒå˜é‡"><a class="header" href="#é…ç½®ç¯å¢ƒå˜é‡">é…ç½®ç¯å¢ƒå˜é‡</a></h2>
<p>åœ¨ä¸Šè¿°è¿‡ç¨‹è¿‡ç¨‹ä¸­ï¼Œ export è®¾ç½®çš„ç¯å¢ƒå˜é‡ï¼Œä»…å¯¹å½“å‰terminalæœ‰æ•ˆï¼›è¦æ°¸ä¹…è®¾ç½®è¿™äº›å€¼ï¼Œ
å°†è¿™ä¸‰æ¡ export æŒ‡ä»¤æ·»åŠ åˆ°é¦–é€‰ shell ä½¿ç”¨çš„ *rc æˆ– *profile æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚</p>
<pre><code class="language-sh">cat &lt;&lt;EOF &gt;&gt; ~/.zshrc
export PUB_HOSTED_URL=https://mirror.sjtu.edu.cn/dart-pub
export FLUTTER_STORAGE_BASE_URL=https://mirror.sjtu.edu.cn
export PATH="\$HOME/dev/flutter/bin:\$PATH"
EOF
</code></pre>
<p>ä½¿ç”¨ <code>tail</code> å‘½ä»¤æŸ¥çœ‹åˆšæ‰å†™å…¥çš„å†…å®¹</p>
<pre><code class="language-sh">tail -3 ~/.zshrc
</code></pre>
<h2 id="hello-dart"><a class="header" href="#hello-dart">Hello Dart</a></h2>
<p>ä¸‹é¢æˆ‘ä»¬æ¥åˆ›å»ºç¬¬ä¸€ä¸ªDart.</p>
<pre><code class="language-sh">$ dart create hellodart         
Creating hellodart using template console...

  .gitignore
  analysis_options.yaml
  CHANGELOG.md
  pubspec.yaml
  README.md
  bin/hellodart.dart
  lib/hellodart.dart
  test/hellodart_test.dart

</code></pre>
<p>æ‰§è¡Œå®Œ<code>dart create</code>å‘½ä»¤ä¹‹åï¼Œ æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª<code>hello world </code> project.</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è¿è¡Œä¸€ä¸‹</p>
<pre><code class="language-sh">$ dart run                       î‚² âœ” 
Building package executable... 
Built hellodart:hellodart.
Hello world: 42!
</code></pre>
<p>ç¼–è¯‘ä¸ºå¯æ‰§è¡Œç¨‹åº</p>
<pre><code class="language-sh">$ dart compile exe bin/hellodart.dart

$ ./bin/hellodart.exe            î‚² âœ” 
Hello world: 42!
</code></pre>
<p>dart æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤ï¼Œå…³äºå®ƒçš„åŸºæœ¬ä½¿ç”¨ï¼Œæœ¬è¯¾ç¨‹å°†å…¶æ”¾åœ¨é™„å½•ä¸­è¯´æ˜ã€‚</p>
<h2 id="å®‰è£…ide-é›†æˆå¼€å‘ç¯å¢ƒä»£ç ç¼–è¾‘å™¨"><a class="header" href="#å®‰è£…ide-é›†æˆå¼€å‘ç¯å¢ƒä»£ç ç¼–è¾‘å™¨">å®‰è£…IDE ï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼Œä»£ç ç¼–è¾‘å™¨ï¼‰</a></h2>
<p>æœ‰å‡ æ¬¾ä¼˜ç§€ä¸”è·¨å¹³å°çš„IDEå¯ä¾›é€‰ç”¨ï¼š</p>
<ul>
<li>VSCode: <a href="https://code.visualstudio.com/download">https://code.visualstudio.com/download</a></li>
<li>Android Studio: <a href="https://developer.android.com/studio/install">https://developer.android.com/studio/install</a></li>
<li>IntelliJ IDEA: <a href="https://www.jetbrains.com/idea/download/">https://www.jetbrains.com/idea/download/</a></li>
</ul>
<p>ä¸‹è½½å®‰è£…å¥½IDEåï¼Œå†æ‰“å¼€IDEå®‰è£…Dartæ‰©å±•ã€‚</p>
<p>å¦å¤–ï¼Œ<a href="https://dartpad.dev/">dartpad.dev</a>æ˜¯ä¸€ä¸ªåœ¨çº¿ç¼–è¾‘å™¨ï¼Œå¯ç”¨äºä¸´æ—¶æµ‹è¯•ä¸€äº›ä»£ç ã€‚</p>
<p>å¦‚æœä½ çœ‹åˆ°äº†è¿™é‡Œï¼Œå¹¶ä¸”ä¹Ÿè·Ÿç€ä¸€èµ·ç»ƒä¹ ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ å·²ç»å¼€å¯äº†Dartç¼–ç¨‹ä¹‹æ—…ã€‚</p>
<h2 id="é™„-ç¤¾åŒºé•œåƒç«™ç‚¹"><a class="header" href="#é™„-ç¤¾åŒºé•œåƒç«™ç‚¹">é™„: ç¤¾åŒºé•œåƒç«™ç‚¹</a></h2>
<pre><code class="language-sh"># ä¸Šæµ·äº¤é€šå¤§å­¦ *nix ç”¨æˆ·ç»„
export PUB_HOSTED_URL=https://mirror.sjtu.edu.cn/dart-pub;
export FLUTTER_STORAGE_BASE_URL=https://mirror.sjtu.edu.cn

# æ¸…åå¤§å­¦ TUNA åä¼š
export PUB_HOSTED_URL=https://mirrors.tuna.tsinghua.edu.cn/dart-pub
export FLUTTER_STORAGE_BASE_URL=https://mirrors.tuna.tsinghua.edu.cn/flutter

# ä¸­å›½ Flutter ç¤¾åŒº (CFUG)
export PUB_HOSTED_URL=https://pub.flutter-io.cn
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn

</code></pre>
<h2 id="å‚è€ƒèµ„æ–™"><a class="header" href="#å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</a></h2>
<ul>
<li><a href="https://docs.flutter.cn/community/china/">https://docs.flutter.cn/community/china/</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å˜é‡ä¸null-safety"><a class="header" href="#å˜é‡ä¸null-safety">å˜é‡ä¸Null safety</a></h1>
<h2 id="ä»€ä¹ˆæ˜¯å˜é‡"><a class="header" href="#ä»€ä¹ˆæ˜¯å˜é‡">ä»€ä¹ˆæ˜¯å˜é‡</a></h2>
<p>è®¡ç®—æœºç¼–ç¨‹è¯­è¨€é‡Œçš„å˜é‡ï¼ˆVariableï¼‰ä¸æ•°å­¦å…¬å¼é‡Œçš„å˜é‡ç±»ä¼¼ã€‚è¯·çœ‹ä¸‹é¢è¿™æ®µDartä»£ç :</p>
<pre><code class="language-dart">// ch0102-1
void main() {
  var x = 3;  // 1
  var (y, z) = (4, 5); // 2
  print('x = $x, y = $y, z = $z'); // 3 Output: x = 3, y = 4, z = 5
  print('x + y + z = ${x + y + z}'); // 4 Output: x + y + z = 12
}
</code></pre>
<p>è¿™æ®µç®€çŸ­çš„ä»£ç åªæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œé‚£å°±æ˜¯<code>main</code>ï¼Œæ•´ä¸ªç¨‹åºçš„å…¥å£ã€‚ä»£ç ä¸­çš„ <code>//</code> æ˜¯æ³¨é‡Šï¼Œæ˜¯ä¸ºäº†å¸®åŠ©äººä»¬é˜…è¯»ä»£ç ï¼ŒDartç¼–è¯‘å™¨ä¼šå¿½ç•¥å®ƒã€‚</p>
<ol>
<li>ä½¿ç”¨<code>var</code>å…³é”®å­—ï¼Œå£°æ˜å˜é‡xï¼Œå¹¶ç»™<code>x</code>èµ‹å€¼ä¸º 3ï¼ŒDartç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­å…¶ç±»å‹ä¸º<code> int</code> ï¼ˆinteger, æ•´æ•°ï¼‰;</li>
<li>åŒæ—¶å£°æ˜ä¸¤ä¸ªå˜é‡<code>x</code>å’Œ<code>y</code>ï¼Œåˆ†åˆ«èµ‹å€¼ä¸º4å’Œ5ï¼Œè¿™é‡Œä½¿ç”¨äº†recordçš„æ¨¡å¼åŒ¹é…ï¼ˆç¬¬3ç« å†…å®¹ï¼Œè¿™é‡Œçœ‹ä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ï¼‰;</li>
<li>åˆ†åˆ«å°†<code>x</code>ï¼Œ<code>y</code>ï¼Œ<code>z</code>çš„å€¼æ‰“å°ï¼ˆæ˜¾ç¤ºï¼‰åˆ°æ§åˆ¶å°ï¼ˆæ ‡å‡†è¾“å‡ºè®¾å¤‡ stdoutï¼‰ï¼›</li>
<li>è®¡ç®— <code>x + y + z</code> å¹¶æ‰“å°ã€‚</li>
</ol>
<p>ç¬¬1å¥ä¹Ÿå¯ä»¥å†™æˆ <code>int x = 3;</code> ä¹Ÿç­‰åŒäº</p>
<pre><code class="language-dart">int x;
x = 3;
</code></pre>
<p>ç¬¬2å¥ä¹Ÿå¯ä»¥å†™æˆ</p>
<pre><code class="language-dart">  var y= 4, z = 5;
</code></pre>
<p>ç¬¬3ã€4ä¸¤å¥ä¸­çš„ <code>$x</code>, <code>$y</code>, <code>$z</code> ä»¥åŠ <code>${x + y + z}</code> ä¸º å­—ç¬¦ä¸²æ’å€¼ï¼Œéå¸¸ç›´è§‚å’Œæ–¹ä¾¿ã€‚</p>
<p><code>var x </code>å£°æ˜äº†ä¸€ä¸ªå˜é‡ï¼Œå®ƒçš„æ ‡è¯†ç¬¦ä¸º<code>x</code>; æ ‡è¯†ç¬¦ï¼Œé€šä¿—åœ°è¯´å°±æ˜¯ç»™å˜é‡ã€å‡½æ•°ã€ç±»ã€æ–¹æ³•ç­‰èµ·ä¸ªåå­—ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œå°±åƒæˆ‘ä»¬ç»™å® ç‰©å–ä¸ªåï¼Œæ–¹ä¾¿å‘¼å”¤ã€‚Dartè¯­è¨€çš„æ ‡è¯†ç¬¦å¯ä»¥æ˜¯ä¸‹åˆ—å­—ç¬¦çš„ç»„åˆï¼š</p>
<ul>
<li>å­—æ¯</li>
<li>æ•°å­—</li>
<li><code>_</code> å’Œ <code>$</code></li>
</ul>
<p>ä½†ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚è¿™äº›éƒ½æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦:  <code>practiceMakesPerfect</code>, <code>_imPrivate</code>, <code>_$GeneratedCode</code>, <code>$happy365</code>ã€‚Darté‡Œä»¥ä¸‹åˆ’çº¿ï¼ˆ<code>_</code> ï¼‰å¼€å¤´çš„å˜é‡æ˜¯ç§æœ‰å˜é‡ã€‚</p>
<p><code>var</code>ä¿®é¥°çš„å˜é‡ ï¼Œå¯ä»¥åç»­æ›´æ”¹ï¼Œæ¯”å¦‚</p>
<pre><code class="language-dart">// ch0102-3
void main() {
  var x = 3;
  x = 30;
  print('x = $x'); // Output: x = 30
}
</code></pre>
<p>å˜é‡é™¤äº†å¯ä»¥è¡¨ç¤ºæ•°å­—ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºæ–‡æœ¬ï¼ˆå­—ç¬¦ä¸²ï¼‰ç­‰.  ä¾‹å¦‚</p>
<pre><code class="language-dart">// ch0102-4
void main(){
  var name = 'Dart';
  print('Hello, $name!'); // Output: Hello, Dart!
}
</code></pre>
<p>è¿™é‡Œçš„æ•°å­—ã€å­—ç¬¦ä¸²ç­‰ï¼Œå°±æ˜¯æ‰€è°“çš„æ•°æ®ç±»å‹ï¼ˆæœ¬ç« ç¬¬4èŠ‚å†…å®¹ï¼Œè¿™é‡Œä¸å†å±•å¼€ï¼‰ã€‚</p>
<h2 id="ä¼˜å…ˆä½¿ç”¨-var-å£°æ˜å˜é‡"><a class="header" href="#ä¼˜å…ˆä½¿ç”¨-var-å£°æ˜å˜é‡">ä¼˜å…ˆä½¿ç”¨ <code>var </code>å£°æ˜å˜é‡</a></h2>
<p>å¯¹äº  <code>var x = 3;</code> ä¹Ÿå¯ä»¥å†™æˆ <code>int x = 3</code>ï¼Œä½ å¯èƒ½æœ‰ä¸ªç–‘é—®ï¼Œå“ªç§æƒ…å†µä¸‹ç”¨å“ªç§æ–¹å¼å‘¢ï¼Ÿå®˜æ–¹çš„å»ºè®®æ˜¯ï¼Œå¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ var (è€Œéå®é™…ç±»å‹) å£°æ˜å˜é‡ï¼Œè¿™æ ·åšé™¤äº†å¯ä»¥ä½¿ä»£ç æ›´çŸ­ä¹‹å¤–ï¼Œè¿˜èƒ½æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä»…ä»…å£°æ˜å˜é‡ï¼ˆä¸èµ‹å€¼ï¼‰ï¼Œåº”è¯¥å†™å‡ºå®é™…çš„ç±»å‹ï¼Œå› ä¸ºè¿™æ—¶å€™Dartæ— æ³•æ¨æ–­å‡ºå˜é‡çš„æ•°æ®ç±»å‹ï¼Œå¦‚</p>
<pre><code class="language-dart">int x;
</code></pre>
<p>å¦‚æœæˆ‘ä»¬è¿™æ ·å†™</p>
<pre><code class="language-dart">var x;
</code></pre>
<p>Dartç¼–è¯‘å™¨å°±è®¤ä¸º x çš„ç±»å‹ä¸º <code>dynamic</code> ï¼Œè¿™ç§ç±»å‹å¯ä»¥è¡¨ç¤ºä»»ä½•æ•°æ®ï¼Œé€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬åº”è¯¥é¿å…è¿™æ ·åšï¼Œå› ä¸ºDartçš„é™æ€ç±»å‹æ£€æŸ¥å¯¹<code>dynamic</code>æ— æ•ˆï¼ˆå¯èƒ½æš—è—bugï¼‰ã€‚</p>
<h2 id="ä½¿ç”¨--late-å»¶è¿Ÿåˆå§‹åŒ–"><a class="header" href="#ä½¿ç”¨--late-å»¶è¿Ÿåˆå§‹åŒ–">ä½¿ç”¨  <code>late</code> å»¶è¿Ÿåˆå§‹åŒ–</a></h2>
<p>æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å»¶è¿Ÿå˜é‡çš„åˆå§‹åŒ–ï¼ˆç‰¹åˆ«åœ¨Flutterçš„StatefulWidgetä¸­ï¼‰ï¼Œè¿™æ—¶å°±ç”¨åˆ° <code>late</code> å…³é”®å­—ï¼Œ ä¾‹å¦‚</p>
<pre><code class="language-dart">// ch0102-5
void main() {
  late String action = 'go camping';
  var isReady = true; // it may take some time to prepare
  if (isReady) {
    print("Let's $action!"); // Output: Let's go camping!
  }
}
</code></pre>
<p>è¿™é‡Œå…ˆäº†è§£ä¸‹ï¼Œç¬¬4ç« ä¼šæœ‰æ›´å¤šå…³äº <code>late</code>  çš„è®¨è®ºã€‚</p>
<h2 id="null-safety"><a class="header" href="#null-safety">Null safety</a></h2>
<h3 id="nnbd"><a class="header" href="#nnbd">NNBD</a></h3>
<p>ä»Dart 2.10 å¼€å§‹ï¼Œå˜é‡é»˜è®¤é <code>null</code>ï¼ˆnon-nullable by defaullt, NNBD)ï¼›<code>null</code> è¡¨ç¤ºç©ºå€¼ã€‚ æ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç æ— æ³•ç¼–è¯‘</p>
<pre><code class="language-dart">// ch0102-6
void main() {
  int x;
  print('x = $x'); 

  // Error: Non-nullable variable 'x' must be assigned before it can be used.
  // print('x = $x'); 
  //             ^
}
</code></pre>
<p>å½“æˆ‘ä»¬å°è¯•ç¼–è¯‘ä¸Šé¢è¿™æ®µä»£ç æ—¶ï¼Œå‡ºç°ç¼–è¯‘é”™è¯¯ï¼Œå‘Šè¯‰æˆ‘ä»¬åœ¨ä½¿ç”¨å˜é‡<code>x</code>ä¹‹å‰å¿…é¡»åˆå§‹åŒ–å®ƒã€‚</p>
<p>å¦‚æœè¦ä½¿ç”¨<code>null</code>ï¼Œ å¯ä»¥åƒä¸‹é¢è¿™æ ·:</p>
<pre><code class="language-dart">// ch0102-7
void main() {
  int? x;
  print('x = $x'); // Output: x = null
}
</code></pre>
<p>è¿™é‡Œçš„ <code> int? x</code> è¡¨ç¤ºå˜é‡<code>x</code> çš„åˆå§‹å€¼ä¸º<code>null</code>,   <code>x</code> æ˜¯ä¸€ä¸ªnullableå˜é‡ã€‚</p>
<p>æ³¨ï¼š
ç†Ÿæ‚‰Javaçš„æœ‹å‹æƒ³å¿…å¯¹<code>NullPointerException</code> (NPE) å¹¶ä¸é™Œç”Ÿï¼Œè¿™ä¸ªExceptionæ˜¯ä¸€ä¸ªè¿è¡Œæ—¶å¼‚å¸¸ï¼›ä¸ºäº†æé«˜ä»£ç çš„å¥å£®æ€§ï¼Œç»å¸¸è¦å¯¹æ–¹æ³•çš„å…¥å‚è¿›è¡Œéç©ºæ£€æŸ¥ï¼Œå¦åˆ™å°±å¾ˆå®¹æ˜“é­é‡NPEï¼ˆè¿™ä¸ªé—®é¢˜æœ‰æ—¶éš¾ä»¥æ’æŸ¥ï¼Œå°¤å…¶åœ¨å¤§å‹è½¯ä»¶é¡¹ç›®é‡Œï¼‰ã€‚ä¾‹å¦‚ä¸‹é¢è¿™æ®µJavaä»£ç </p>
<pre><code class="language-java">void doSomething(String str) {
  if (str == null){
    throw new IllegalArgumentException("doSomething: str cannot be null");
  }
  // Do something
}
</code></pre>
<p>æˆ‘æƒ³è¿™ä¾¿æ˜¯Dart  NNBDçš„åŸå› ã€‚</p>
<h3 id="è®¿é—®nullableå˜é‡"><a class="header" href="#è®¿é—®nullableå˜é‡">è®¿é—®nullableå˜é‡</a></h3>
<p>æœ‰å‡ ä¸ªnullableå˜é‡ç›¸å…³çš„è®¿é—®/èµ‹å€¼ï¼Œæœ‰å¿…è¦ä»‹ç»ä¸€ä¸‹ï¼Œä½ ä»¥åå†çœ‹åˆ°ä¸‹é¢è¿™äº›ç¬¦å·å°±ä¸ä¼šæ„Ÿåˆ°é™Œç”Ÿäº†ã€‚</p>
<h3 id="----"><a class="header" href="#----"><code>??</code> ã€ <code>??=</code>ã€  <code>!</code></a></h3>
<pre><code class="language-dart">// ch0102-8
void main() {
  int? x;
  var y = x ?? 10; // 1
  var z = y ?? 20; // 1a
  print('y = $y, z = $z'); // Output: y = 10, z = 10

  int? y2;
  y ??= 100; // 2
  y2 ??= 100; // 2a
  print('y = $y, y2 = $y2'); // Output: y = 10, y2 = 100

  var a = y!; // 3
  print('a = $a'); // Output: a = 10

  var b = x!; // 3a
  print('b = $b');
  // Unhandled exception:
  // Null check operator used on a null value
}
</code></pre>
<ol>
<li>å¦‚æœ <code>x</code>ä¸º<code>null</code>ï¼Œ<code>y</code>èµ‹å€¼ä¸º10ï¼Œ å¦åˆ™å°†<code>x</code>çš„å€¼èµ‹ç»™<code>y</code>ï¼›</li>
<li>å¦‚æœ <code>y</code>ä¸º<code>null</code>ï¼Œ<code>y</code>èµ‹å€¼ä¸º100ï¼Œå¦åˆ™å•¥ä¹Ÿä¸åšï¼›</li>
<li>æ–­è¨€<code>y</code>ä¸€å®šéç©º(<code>null</code>)ï¼Œå¹¶å°†<code>y</code>çš„å€¼èµ‹ç»™<code>a</code>ï¼›å¦‚æœ<code>y</code>ä¸º<code>null</code>ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ä¼šå‡ºç°ä¸€ä¸ªNull checkå¼‚å¸¸ï¼ˆè§3aï¼‰ã€‚</li>
</ol>
<p>è¯·å¯¹æ¯” 1å’Œ1aï¼Œ 2å’Œ2aï¼Œä»¥åŠ3å’Œ3açš„ç»“æœã€‚</p>
<h3 id="-"><a class="header" href="#-"><code>?.</code> ã€<code>?[]</code></a></h3>
<pre><code class="language-dart">// ch0102-9
void main() {
  var abc = 'ABCD';
  String? def;

  var first = abc?[0]; // 1
  var second = def?[0]; // 1a
  print('first = $first, second = $second'); // Output: first = A, second = null

  var len1 = abc?.length; // 2
  var len2 = def?.length; // 2a
  print('len1 = $len1, len2 = $len2'); // Output: len1 = 4, len2 = null

  var len3 = def?.length ?? 0; // 3
  print('len3 = $len3'); // Output: len3 = 0
}
</code></pre>
<ol>
<li>å¦‚æœ<code>abc</code>ä¸º<code>null</code>ï¼Œ<code>first</code>ä¸º<code>null</code>ï¼Œ å¦åˆ™å°†<code>abc[0]</code>çš„å€¼èµ‹ç»™<code>first</code>ï¼›</li>
<li>å¦‚æœ<code>abc</code>ä¸º<code>null</code>ï¼Œ<code>len1</code>ä¸º<code>null</code>ï¼Œ å¦åˆ™å°†<code>abc.length</code>çš„å€¼èµ‹ç»™<code>len1</code>ï¼›</li>
<li>è¿™æ˜¯ä¸€ä¸ªç»¼åˆçš„ä¾‹å­ï¼ŒåŒæ—¶ä½¿ç”¨äº† <code>?.</code>ä¸ <code>??</code> ç¬¦å·ã€‚</li>
</ol>
<p>æ³¨ï¼šæœ¬ä¾‹ä¸­çš„ <code>abc[0]</code> è¿”å›ç¬¬0ä¸ªï¼ˆä¸‹æ ‡ä»0å¼€å§‹ï¼‰unicodeå­—ç¬¦ï¼Œ<code>abc.length</code>è¿”å›<code>abc</code>çš„é•¿åº¦ã€‚</p>
<h3 id=""><a class="header" href="#"><code>...?</code></a></h3>
<pre><code class="language-dart">// ch0102-a
void main() {
  var arr = [1, 2, 3];
  var arr2 = [...arr, 4, 5]; // 1
  print('arr2 = $arr2'); // Output: arr2 = [1, 2, 3, 4, 5]

  var arr3 = [...?arr, 6, 7]; // 1a
  print('arr3 = $arr3'); // Output: arr3 = [1, 2, 3, 6, 7]

  List&lt;int&gt;? arr4;
  var arr5 = [...?arr4, 8, 9]; // 2
  print('arr5 = $arr5'); // Output: arr5 = [8, 9]

  List&lt;int&gt;? arr6 = []; // 3
  var arr7 = [...arr6, -1, -2]; // 3a
  print('arr7 = $arr7'); // Output:  arr7 = [-1, -2]
}
</code></pre>
<ol>
<li><code>arr</code>æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰ï¼Œ <code>...arr</code>å°†å±•å¼€<code>arr</code>ï¼Œ æ­¤è¡Œä»£ç å°†<code>arr</code>ä»¥åŠ 4, 5 ä¸€èµ·ç»„æˆä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™<code>arr2</code>;</li>
<li>æœ¬è¡Œä»£ç  ä¸ 1 ç±»ä¼¼ï¼Œ  åŒºåˆ«åœ¨äºï¼Œè¿™é‡Œå¿…é¡»ä½¿ç”¨  <code>...?arr4</code> æ‰§è¡Œå±•å¼€æ“ä½œï¼Œå¦åˆ™æ— æ³•ç¼–è¯‘é€šè¿‡;</li>
<li><code>arr6</code> è·Ÿ<code>arr4</code>ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªnullableå˜é‡ï¼Œä½†å…¶åˆå§‹å€¼ä¸ºä¸€ä¸ªç©ºçš„åˆ—è¡¨ï¼ˆä¸æ˜¯<code>null</code>ï¼‰ï¼Œå°±å¯ä»¥ç”¨<code>...</code>å¯¹å…¶è¿›è¡Œå±•å¼€ï¼Œå¯è§Dartç¼–è¯‘å™¨éå¸¸æ™ºèƒ½ã€‚</li>
</ol>
<h2 id="å‚è€ƒèµ„æ–™-1"><a class="header" href="#å‚è€ƒèµ„æ–™-1">å‚è€ƒèµ„æ–™</a></h2>
<ul>
<li><a href="https://dart.dev/language/variables">https://dart.dev/language/variables</a></li>
<li><a href="https://dart.dev/effective-dart/design#types">https://dart.dev/effective-dart/design#types</a></li>
<li><a href="https://dart.dev/null-safety">https://dart.dev/null-safety</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="final-const-åŠwildcard"><a class="header" href="#final-const-åŠwildcard"><code>final</code>ã€ <code>const</code> åŠwildcard</a></h1>
<h2 id="final"><a class="header" href="#final"><code>final</code></a></h2>
<p>å£°æ˜ä¸ºfinalçš„å˜é‡ï¼Œåªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ã€‚ å¦‚æœå°è¯•ä¿®æ”¹å·²ç»èµ‹å€¼è¿‡çš„finalå˜é‡ï¼Œä¼šå¼•èµ·ç¼–è¯‘é”™è¯¯ã€‚</p>
<pre><code class="language-dart">// ch0103_1.dart
void main() {
  final myPet = 'Doggy'; // 1
  myPet = 'Kitty'; // 2
  // Error: Can't assign to the final variable 'myPet'.
  // myPet = 'Kitty'; // 2
  // ^^^^^
}
</code></pre>
<ol>
<li>å£°æ˜ä¸€ä¸ªfinalå˜é‡<code>myPet</code>, å¹¶ä¸ºå…¶èµ‹å€¼;</li>
<li>å°è¯•ä¿®æ”¹<code>myPet</code>çš„å€¼ï¼Œå¼•èµ·ç¼–è¯‘é”™è¯¯ï¼Œ å‘Šè¯‰æˆ‘ä»¬ä¸èƒ½ç»™final å˜é‡ <code>myPet</code> èµ‹å€¼ã€‚</li>
</ol>
<h2 id="late-final"><a class="header" href="#late-final"><code>late final</code></a></h2>
<p><code>late final</code> è¿™ä¸¤ä¸ªå…³é”®å­—ç»å¸¸ä¸€èµ·å‡ºç°ï¼Œè¿™é‡Œæ„å»ºäº†ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="language-dart">// ch0103_2.dart
void main() {
  final width = 3.0; // 1
  final height = 4.0; // 1a
  late final double perimeter; // 2
  // ... (Do somehting else)
  perimeter = 2 * (width + height); // 3
  print('width: $width, height: $height, perimeter: $perimeter'); // 4
  // Output: width: 3.0, height: 4.0, perimeter: 14.0
}
</code></pre>
<ol>
<li>å£°æ˜finalå˜é‡ <code>width</code>ä¸ <code>height</code> ï¼Œå¹¶åˆ†åˆ«èµ‹å€¼ä¸º3.0ä¸4.0ï¼ŒDartè‡ªåŠ¨æ¨æ–­å…¶æ•°æ®ç±»å‹ä¸º<code>double</code> ï¼ˆæµ®ç‚¹æ•°ï¼‰;</li>
<li>ä½¿ç”¨ <code>late final</code> å£°æ˜ä¸€ä¸ªå˜é‡<code>perimeter</code>ï¼Œåœ¨è¿™é‡Œå®ƒè¡¨ç¤ºä¸€ä¸ªçŸ©å½¢çš„å‘¨é•¿ï¼ŒåŒæ—¶æ˜¾ç¤ºæŒ‡å®šè¿™ä¸ªå˜é‡çš„æ•°æ®ç±»å‹ä¸º<code>double</code>ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰3ä¸ªå…³é”®å­—<code>late final double</code>ï¼Œå®ƒä»¬ä¸€èµ·ä¿®é¥°å˜é‡<code>perimeter</code>;</li>
<li>è®¡ç®—å˜é‡ <code>perimeter</code>çš„å€¼ï¼Œå…¬å¼ä¸ºï¼ˆé•¿+å®½ï¼‰Ã—2;</li>
<li>ä½¿ç”¨å­—ç¬¦ä¸²æ’å€¼ï¼Œæ‰“å°ç›¸å…³å˜é‡ã€‚</li>
</ol>
<p>è¿™ä¸ªä¾‹å­ä¼¼ä¹çœ‹ä¸å‡º <code>late final</code> æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼Œè¿™é‡Œåªæ˜¯è®©ä½ ç†Ÿæ‚‰ä¸€ä¸‹ï¼Œåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰çš„ç« èŠ‚è¿˜ä¼šç»§ç»­è®¨è®ºå®ƒã€‚</p>
<h2 id="final-çš„å…„å¼Ÿ-const"><a class="header" href="#final-çš„å…„å¼Ÿ-const"><code>final</code> çš„å…„å¼Ÿ <code>const</code></a></h2>
<p><code>const</code>å…³é”®å­—ç”¨äºï¼š</p>
<ul>
<li>å£°æ˜ä¸€ä¸ªå¸¸é‡ï¼Œå¸¸é‡å…·æœ‰ç¼–è¯‘æ—¶ï¼ˆcompile-time)ä¸å¯å˜æ€§ï¼Œè¿™é‡Œçš„ç¼–è¯‘æ—¶æ˜¯ä¸è¿è¡Œæ—¶ï¼ˆruntimeï¼‰ç›¸å¯¹åº”çš„ï¼›</li>
<li>åˆ›å»ºå¸¸é‡å€¼ï¼ˆconstant valuesï¼‰;</li>
<li>å®šä¹‰constæ„é€ å™¨ï¼Œè¯¥æ„é€ å™¨ç”¨äºåˆ›å»ºå¸¸é‡å€¼ã€‚</li>
</ul>
<p>åé¢ä¸¤ç‚¹ä¸OOPæœ‰å…³ï¼Œè¿™é‡Œæå‰äº†è§£ä¸‹ã€‚</p>
<h3 id="å£°æ˜ä¸€ä¸ªå¸¸é‡"><a class="header" href="#å£°æ˜ä¸€ä¸ªå¸¸é‡">å£°æ˜ä¸€ä¸ªå¸¸é‡</a></h3>
<p>è¯•å›¾ä¿®æ”¹å¸¸é‡ä¼šå¼•èµ·ç¼–è¯‘é”™è¯¯ï¼Œä¾‹å¦‚</p>
<pre><code class="language-dart">// ch0103_3.dart
void main(){
  const score = 50; // 1
  score = 80; // 2
  // Error: Can't assign to the const variable 'score'.
  // score = 80; // 2
  // ^^^^^
}
</code></pre>
<h3 id="åˆ›å»ºå¸¸é‡å€¼"><a class="header" href="#åˆ›å»ºå¸¸é‡å€¼">åˆ›å»ºå¸¸é‡å€¼</a></h3>
<p>ä»»ä½•å˜é‡éƒ½å¯ä»¥æœ‰å¸¸é‡å€¼ã€‚</p>
<pre><code class="language-dart">// ch0103_4.dart
void main() {
  final luckyNumbers = [5, 6]; // 1
  luckyNumbers.add(8); // 2
  print('luckyNumbers: $luckyNumbers');
  // Output: luckyNumbers: [5, 6, 8]

  const myFriends = ['Alice', 'Bob']; // 3
  myFriends.add('Charlie'); // 4
  // Unhandled exception:
  // Unsupported operation: Cannot add to an unmodifiable list;
}
</code></pre>
<ol>
<li>å£°æ˜ä¸€ä¸ª<code>final</code> åˆ—è¡¨  <code>luckyNumbers</code>å¹¶å¯¹å…¶åˆå§‹åŒ–ï¼ŒåŒ…å«5ã€6ä¸¤ä¸ªæ•°å­—ï¼›</li>
<li>å‘<code>luckyNumbers</code>æ·»åŠ æ•°å­—8ï¼Œç„¶åæ‰“å°å‡ºæ¥ï¼ŒluckyNumbers ç°åœ¨åŒ…å«äº†5ã€6ã€8ä¸‰ä¸ªæ•°å­—; è¿™è¯´æ˜äº†è™½ç„¶<code>final</code>ä¿®é¥°çš„luckyNumbersæœ¬èº«ï¼ˆå¼•ç”¨ï¼‰ä¸å¯æ›´æ”¹ï¼Œä½†å®ƒå¼•ç”¨çš„åˆ—è¡¨æ˜¯å¯ä»¥æ”¹å˜çš„;</li>
<li>å£°æ˜ä¸€ä¸ª<code>const</code>åˆ—è¡¨<code>myFriends</code>ï¼Œåˆå§‹å€¼åŒ…å«"Aliceå’Œ"Bob"ä¸¤ä¸ªå­—ç¬¦ä¸²;</li>
<li>å‘<code>myFriends</code>æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ "Charlie"ï¼Œè¿™å¼•èµ·äº†ä¸€ä¸ªè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå‘Šè¯‰æˆ‘ä»¬ä¸èƒ½å‘ä¸å¯å˜åˆ—è¡¨æ·»åŠ æ–°çš„å…ƒç´ ï¼Œå¯è§<code>const</code>æ¯”<code>final</code>å…·æœ‰æ›´å¼ºçš„ä¸å¯å˜æ€§ã€‚</li>
</ol>
<h3 id="å®šä¹‰constæ„é€ å™¨"><a class="header" href="#å®šä¹‰constæ„é€ å™¨">å®šä¹‰constæ„é€ å™¨</a></h3>
<p>æ„é€ å™¨æ˜¯OOPé‡Œçš„æ¦‚å¿µï¼Œconstæ„é€ ç”¨äºåˆ›å»ºå¸¸é‡å€¼ã€‚è¯·çœ‹ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ï¼š</p>
<pre><code class="language-dart">// ch0103_5.dart
class Pet { // 1
  final String name; // 1a
  const Pet(this.name); // 2
}

void main() {
  var myPet = Pet('Doggy'); // 3
  myPet = Pet('Little Doggy'); // 3a
  const yourPet = Pet('Kitty'); // 4

  print('myPet: ${myPet.name}, yourPet: ${yourPet.name}');
  // Output: myPet: Little Doggy, yourPet: Kitty
}
</code></pre>
<ol>
<li><code>class</code>å…³é”®å­—ç”¨äºå£°æ˜ä¸€ä¸ªåå«<code>Pet</code>çš„ç±» ï¼Œç±»å°è£…äº†æ•°æ®å’Œè¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰ï¼ˆç¬¬4-5ç« ä¸“é—¨è®¨è®ºOOPï¼‰; class <code>Pet</code> æœ‰ä¸€ä¸ªfinalæˆå‘˜å˜é‡å«åš <code>name</code> ;</li>
<li>è¿™æ˜¯<code>Pet</code>çš„constæ„é€ å™¨;</li>
<li>é€šè¿‡è°ƒç”¨<code>Pet</code>çš„æ„é€ å™¨ï¼Œå¾—åˆ°ä¸€ä¸ª<code>Pet</code>çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰<code>myPet</code>ï¼Œéšååˆå°†<code>myPet</code>æŒ‡å‘å¦ä¸€ä¸ªPetå¯¹è±¡ï¼ˆ3aï¼‰;</li>
<li>é€šè¿‡è°ƒç”¨<code>Pet</code>çš„constæ„é€ å™¨ï¼Œåˆ›å»ºPetçš„å¸¸é‡å¯¹è±¡ <code>yourPet</code>ï¼Œè¿™è¡Œä»£ç ç­‰äº</li>
</ol>
<pre><code class="language-dart">  const yourPet = const Pet('Kitty'); // 4
</code></pre>
<p>åœ¨å¸¸é‡ä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>Pet('Kitty')</code>ä¹‹å‰çœç•¥äº†<code>const</code>å…³é”®å­—ã€‚</p>
<h3 id="å¸¸é‡å¯¹è±¡"><a class="header" href="#å¸¸é‡å¯¹è±¡">å¸¸é‡å¯¹è±¡</a></h3>
<p><code> const Pet('Kitty')</code> ä¸ <code> Pet('Kitty')</code>æ˜¯ä¸ä¸€æ ·çš„ï¼Œå‰è€…åˆ›å»ºï¼ˆå®ä¾‹åŒ–ï¼‰äº†ä¸€ä¸ªå¸¸é‡å¯¹è±¡ï¼Œè€Œåè€…åˆ›å»ºçš„æ˜¯éå¸¸é‡å¯¹è±¡ï¼ˆé™¤éæ˜¯åœ¨å¸¸é‡ä¸Šä¸‹æ–‡ä¸­ï¼‰ã€‚</p>
<pre><code class="language-dart">// ch0103_6.dart
void main() {
  const pet1 = Pet('Rabbit'); // 1
  var pet2 = const Pet('Rabbit'); // 2
  final pet3 = Pet('Rabbit'); // 3

  print('${pet1 == pet2}'); // Output: true
  print('${pet1 == pet3}'); // Ouptput: false
}

class Pet {
  final String name;
  const Pet(this.name); 
}
</code></pre>
<p>è¿™é‡Œçš„ <code>==</code> æ“ä½œç¬¦ï¼Œç”¨äºæµ‹è¯•å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°æ˜¯å¦ç›¸ç­‰ã€‚</p>
<h2 id="wildcard_"><a class="header" href="#wildcard_">Wildcardï¼ˆ<code>_</code>ï¼‰</a></h2>
<p>è‡ª Dart 3.7  å¼€å§‹ï¼Œä»¥ <code>_</code>  å‘½å çš„å˜é‡æˆ–å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªé€šé…ç¬¦ï¼ˆwildcard ï¼‰ï¼Œå®ƒçš„å€¼ä¼šè¢«ä¸¢å¼ƒã€‚åŒä¸€ä¸ªå‘½åç©ºé—´é‡Œå¤šæ¬¡å£°æ˜ <code>_</code> ä¸ä¼šå†²çªã€‚ä¾‹å¦‚</p>
<pre><code class="language-dart">//ch0103_7.dart
void main() {
  var _ = 10; // 1
  var _ = 'Hello'; // 2
  print('Hello, Dart! $_'); // 3
  // Error: Undefined name '_'.
  // print('Hello, Dart! $_');
}
</code></pre>
<p>ä¸Šé¢è¿™æ®µä»£ç æ¯”è¾ƒç®€å•ï¼Œä¸è¿‡å¤šè§£é‡Šã€‚</p>
<p>é€šé…ç¬¦å‡ºç°çš„åœ°æ–¹ï¼š</p>
<ul>
<li>å˜é‡å£°æ˜ï¼Œ å¦‚ <code>var _ = 1;</code></li>
<li>for å¾ªç¯å˜é‡ å¦‚ <code>for (var _ in list) {}</code></li>
<li>catch è¯­å¥å‚æ•°, å¦‚</li>
</ul>
<pre><code class="language-dart">try {
  throw 'something bad';
} catch (_) {
  print('oops');
}
</code></pre>
<ul>
<li>å‡½æ•°å‚æ•°ï¼Œå¦‚ <code>list.where((_) =&gt; true);</code></li>
<li>æ³›å‹ç±»å‹åŠå‡½æ•°ç±»å‹å‚æ•°ï¼Œ å¦‚</li>
</ul>
<pre><code class="language-dart">class T&lt;_&gt; {}
void genericFunction&lt;_&gt;() {}
</code></pre>
<p>forå¾ªç¯ã€å‡½æ•°ã€catchè¯­å¥ã€æ³›å‹ç­‰æ¦‚å¿µå°†åœ¨åç»­ç« èŠ‚é™†ç»­ä»‹ç»ï¼Œè¿™é‡Œå…³äºé€šé…ç¬¦æœ‰ä¸ªå°è±¡å°±è¡Œã€‚</p>
<p>æ›´å¤šçš„ç¤ºä¾‹ï¼Œå¯æŸ¥é˜…<a href="https://dart.dev/language/variables#wildcard-variables">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™-2"><a class="header" href="#å‚è€ƒèµ„æ–™-2">å‚è€ƒèµ„æ–™</a></h2>
<ul>
<li><a href="https://dart.dev/language/variable">https://dart.dev/language/variable</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ•°æ®ç±»å‹"><a class="header" href="#æ•°æ®ç±»å‹">æ•°æ®ç±»å‹</a></h1>
<p>é€šå¸¸è®¡ç®—æœºç¼–ç¨‹è¯­è¨€é‡Œçš„æ•°æ®ç±»å‹å¯ä»¥åˆ†ä¸ºåŸºç¡€æ•°æ®ç±»å‹ä¸å¤åˆæ•°æ®ç±»å‹ä¸¤å¤§ç±»ã€‚Dartçš„åŸºç¡€æ•°æ®ç±»å‹åŒ…æ‹¬ï¼š</p>
<ul>
<li><a href="ch01/dartpl0104.html#%E6%95%B0%E5%AD%97">æ•°å­—ï¼ˆint æ•´æ•°ï¼Œdouble æµ®ç‚¹æ•°ï¼‰</a></li>
<li><a href="ch01/dartpl0104.html#%E5%AD%97%E7%AC%A6%E4%B8%B2string">å­—ç¬¦ä¸² ï¼ˆStringï¼‰</a></li>
<li><a href="ch01/dartpl0104.html#%E5%B8%83%E5%B0%94bool">å¸ƒå°” ï¼ˆboolï¼‰</a></li>
<li><a href="ch01/dartpl0104.html#%E7%AC%A6%E6%96%87rune">ç¬¦æ–‡ï¼ˆRuneï¼Œ é€šå¸¸ä½¿ç”¨ <code>characters</code> APIï¼‰</a></li>
</ul>
<p>å¤åˆæ•°æ®ç±»å‹æ˜¯åŸºç¡€æ•°æ®ç±»å‹çš„ç»„åˆã€‚Dartçš„å¤åˆæ•°æ®ç±»å‹åŒ…æ‹¬ï¼š</p>
<ul>
<li><a href="ch01/dartpl0104.html#%E8%AE%B0%E5%BD%95record">è®°å½• (Record)</a></li>
<li><a href="ch01/dartpl0104.html#%E6%9E%9A%E4%B8%BEenum">æšä¸¾ï¼ˆEnum)</a></li>
<li>åˆ—è¡¨ï¼ˆList, æ•°ç»„ï¼‰</li>
<li>é›†åˆï¼ˆSetï¼‰</li>
<li>æ˜ å°„ï¼ˆMapï¼‰</li>
<li>ç±»ï¼ˆclass)</li>
</ul>
<p>Dartè¿˜æœ‰å¦‚ä¸‹ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼š</p>
<ul>
<li>å‡½æ•°ï¼ˆFunctionï¼‰</li>
<li><a href="ch01/dartpl0104.html#%E7%AC%A6%E5%8F%B7symbol">ç¬¦å·ï¼ˆSymbol)</a></li>
<li><code>null</code> å€¼ ï¼ˆç©ºå€¼ï¼ŒNullï¼‰</li>
</ul>
<p>ç¬¬2ç« å°†è®¨è®ºå‡½æ•°ï¼Œç¬¬4ç« å°†è®¨è®ºç±»ï¼Œç¬¬6ç« å°†è®¨è®ºåˆ—è¡¨ï¼ˆListï¼‰ã€é›†åˆï¼ˆSetï¼‰ã€æ˜ å°„ï¼ˆMapï¼‰ã€‚</p>
<h2 id="æ•°å­—"><a class="header" href="#æ•°å­—">æ•°å­—</a></h2>
<p>Dartçš„æ•°å­—åŒ…æ‹¬64-bitæ•´æ•° int å’Œ 64-bitæµ®ç‚¹æ•° doubleã€‚
intçš„å–å€¼èŒƒå›´ä¸º -2<sup>63</sup>  è‡³ to 2<sup>63</sup> -1ã€‚
doubleæ˜¯åŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œéµå¾ª IEEE 754 æ ‡å‡†ã€‚</p>
<p>Dartæ˜¯ä¸€é—¨OOPç¼–ç¨‹è¯­è¨€ï¼Œintå’Œdoubleæ˜¯numçš„å­ç±»ï¼Œå› æ­¤å®ƒä»¬æœ‰ç€ä¸€äº›å…±åŒçš„æ–¹æ³•ï¼Œä¾‹å¦‚:</p>
<ul>
<li>parse(string)</li>
<li>abs()</li>
<li>ceil()</li>
<li>toString()</li>
</ul>
<p>ä¸‹é¢çš„ä»£ç å£°æ˜äº†ä¸€ä¸ªæ•´æ•°<code>radius</code> å’Œä¸€ä¸ªæµ®ç‚¹æ•° <code>pi</code>ï¼š</p>
<pre><code class="language-dart">// ch0104_1.dart
void main() {
  int radius = 5;
  double pi = 3.1416;
  print('area: ${radius * radius * pi}'); 
  // Output: area=78.53999999999999
}
</code></pre>
<p>é™¤äº†ä½¿ç”¨åè¿›åˆ¶ä¹¦å†™æ•´æ•°å¤–ï¼Œè¿˜å¯ä»¥ç”¨åå…­è¿›åˆ¶ã€‚å¯ä»¥ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•ä¹¦å†™æµ®ç‚¹æ•°ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="language-dart">// ch0104_2.dart
void main() {
  int radius = 0x10;
  double pi = 0.31416e1;
  print('radius=$radius area=${radius * radius * pi}');
  // Output: radius=16 area=804.2496
}
</code></pre>
<p>ä½†æ˜¯Dartå¹¶ä¸ç›´æ¥æ”¯æŒä¹¦å†™å…«è¿›åˆ¶æ•°ã€‚ä½ å¯ä»¥ç”¨  octal åŒ…æ¥å®ç°å…«è¿›åˆ¶çš„ä¹¦å†™ã€‚</p>
<pre><code class="language-dart">// ch0104_3.dart
// dart pub add octal
import 'package:octal/octal.dart'; 

void main() {
  int decimalValue = octal(123); // 83 in decimal
  print(decimalValue); // Output: 83
  print(decimalValue.toRadixString(8)); // Output: 123
}
</code></pre>
<h2 id="å­—ç¬¦ä¸²string"><a class="header" href="#å­—ç¬¦ä¸²string">å­—ç¬¦ä¸²ï¼ˆStringï¼‰</a></h2>
<p>Dartä¸­çš„Stringæ˜¯ä¸€ä¸ªUTF-16å€¼çš„æœ‰åºåºåˆ—ï¼Œå†™åœ¨ä¸€å¯¹å•å¼•å·æˆ–åŒå¼•å·é‡Œã€‚ä¸€ä¸ªéå¸¸niceçš„åŠŸèƒ½æ˜¯å­—ç¬¦ä¸²æ’å€¼ï¼Œå³åœ¨å­—ç¬¦ä¸²é‡Œä½¿ç”¨ <code>${expr}</code>  ã€‚</p>
<pre><code class="language-dart">// ch0104_4.dart
void main() {
  var str = "It's a beautiful day!";
  var str2 = 'It\'s a beautiful day!'; 
  print(str == str2); // Output: true

  var num = 5;
  print('There are $num apples.'); // Output: There are 5 apples.
  print('There are ${num + 2} oranges.'); // Output: There are 7 oranges.
}
</code></pre>
<p>ä¸Šä¾‹ä¸­<code>str2</code> å†™åœ¨ä¸€å¯¹å•å¼•å·ä¸­ï¼Œè¯¥è¡Œä¸­çš„ <code>\</code> ä¸ºè½¬ä¹‰ç¬¦ï¼Œ<code>\'</code>è¡¨ç¤ºä¸€ä¸ªå•å¼•å·ã€‚</p>
<p>ä¸¤ä¸ªå­—ç¬¦ä¸²å†™åœ¨ä¸€èµ·ï¼Œä¸­é—´å¯ä»¥ä½¿ç”¨ä¸€ä¸ª<code>+</code>ç¬¦å·ï¼ˆä½†é€šå¸¸äºˆä»¥çœç•¥ï¼‰ï¼Œ å°±è¡¨ç¤ºå°†è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²é¡ºåºæ‹¼æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚å› æ­¤å¯¹äºå¤šè¡Œæ–‡æœ¬ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="language-dart">  // ch0104_5.dart
  var str =
      'A: Nice to meet you!\n'
      'B: Nice to meet you, too!';
</code></pre>
<p>è¿™é‡Œçš„<code>\n</code>æ˜¯æ¢è¡Œç¬¦ã€‚ä¹¦å†™å¤šè¡Œæ–‡æœ¬æ›´æ–¹ä¾¿çš„åšæ³•æ˜¯å°†æ–‡æœ¬å†™åœ¨ä¸€å¯¹ä¸‰å¼•å·ï¼ˆ<code>'''</code>æˆ–<code>"""</code>ï¼‰ä¸­ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-dart">// ch0104_6.dart
void main() {
  var minAge = 18;
  var query =
      '''
SELECT id, name, age
FROM users
WHERE age &gt;= $minAge
''';
  print(query);
}
</code></pre>
<h2 id="å¸ƒå°”bool"><a class="header" href="#å¸ƒå°”bool">å¸ƒå°”ï¼ˆboolï¼‰</a></h2>
<p>å¸ƒå°”ç±»å‹åªæœ‰2ä¸ªå€¼ï¼Œ<code>true</code>å’Œ<code>false</code>ï¼Œä¸”å®ƒä»¬éƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚</p>
<pre><code class="language-dart">// ch0104_7.dart
void main() {
  var isGreater = 43 &gt; 34;
  print('isGreater: $isGreater'); // Output: isGreater: true
  print('2 &lt; -3: ${2 &lt; -3}'); // Output: 2 &lt; -3: false
}
</code></pre>
<h2 id="ç¬¦æ–‡rune"><a class="header" href="#ç¬¦æ–‡rune">ç¬¦æ–‡ï¼ˆRuneï¼‰</a></h2>
<p>ç¬¦æ–‡ä»£è¡¨unicodeæ–‡å­—ç³»ç»Ÿé‡Œçš„ä¸€ä¸ªç¬¦å·ã€‚unicodeä¸ºä¸–ç•Œä¸Šæ¯ä¸€ä¸ªæ–‡å­—æˆ–ç¬¦å·åˆ†é…äº†ä¸€ä¸ªæ•°å­—ï¼Œç§°ä¹‹ä¸ºcode pointã€‚unicode æœ€å¤šå¯æ”¯æŒ 1,114,112 ä¸ªcode pointï¼Œé€šè¿‡ 17 ä¸ª 16 ä½å¹³é¢å®ç°ï¼Œæ¯ä¸ªå¹³é¢å¯æ”¯æŒ 65,536 ä¸ªä¸åŒçš„code pointã€‚ unicodeå¸¸è§çš„ç¼–ç æ–¹å¼ï¼ˆå°†code pointæ˜ å°„ä¸ºäºŒè¿›åˆ¶æ•°ï¼‰æœ‰UTF-8ã€UTF-16å’ŒUTF-32ã€‚  Darté‡‡ç”¨UTF-16ç¼–ç ï¼Œæ¯ä¸ªcode unitä¸º16ä½ï¼ˆ2ä¸ªå­—èŠ‚ï¼‰ï¼Œæ¯ä¸ªç¬¦æ–‡å ç”¨1ä¸ªï¼ˆ0-65,535 code pointï¼‰æˆ–2ä¸ªcode unitï¼ˆ65,536åŠä»¥ä¸Š)ã€‚å¯¹å­—ç¬¦ç¼–ç æ„Ÿå…´è¶£çš„åŒå­¦ï¼Œè¯·ç»§ç»­å»äº†è§£ä¸‹ASCIIã€UTF-8ã€UTF-16å’ŒUTF-32ã€GBKç­‰ã€‚</p>
<p>Dartçš„Stringï¼ˆå­—ç¬¦ä¸²ï¼‰æœ¬è´¨ä¸Šæ˜¯code unitçš„åºåˆ—ã€‚</p>
<pre><code class="language-dart">// ch0104_8.dart
void main() {
  var s = "ç¬‘\u7b11lolğŸ˜†\u{1f606}"; // 1
  print(s); // 2 Output: ç¬‘ç¬‘lolğŸ˜†ğŸ˜†
  print('len: ${s.length}'); // 3 Output: len: 9

  print('code units: ${s.codeUnits}'); // 4
  // Output: code units: [31505, 31505, 108, 111, 108, 55357, 56838, 55357, 56838]

  print('runes: ${s.runes}'); // 5
  // Output: runes: (31505, 31505, 108, 111, 108, 128518, 128518)

  print(31505.toRadixString(16)); // 6 Output: 7b11
  print(128518.toRadixString(16)); // 7 Output: 1f606
}
</code></pre>
<ol>
<li>å£°æ˜å˜é‡<code>s</code>ï¼Œæ³¨æ„è¿™é‡Œ<code>\u7b11</code>å°±ç­‰äº<code>ç¬‘</code>è¿™ä¸ªå­—ç¬¦ï¼Œ<code>\uHHHH</code>è¡¨ç¤º<code>\u</code>åé¢æ˜¯code pointçš„åå…­è¿›åˆ¶è¡¨ç¤º<code>HHHH</code>ï¼›å¦‚æœè¯¥åå…­è¿›åˆ¶æ•°ä¸æ˜¯4ä½ï¼Œå°±å¿…é¡»ä½äºä¸€å †èŠ±æ‹¬å·<code>{}</code>ä¸­ï¼Œå¦‚<code>\u{1f606}</code>å°±ç­‰äºğŸ˜†è¿™ä¸ªemojiç¬¦å·;</li>
<li>æ‰“å° <code>s</code>ï¼Œä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡º <code>s</code>åŒ…å«äº†7ä¸ªç¬¦æ–‡ï¼ˆå­—ç¬¦);</li>
<li>æ‰“å°<code>s</code>çš„é•¿åº¦ï¼Œç»“æœä¸º9, å¯è§æ˜¯code unitçš„ä¸ªæ•°ï¼Œä¸‹é¢ä¸€è¡Œä»£ç å°è¯äº†è¿™ä¸€ç‚¹ï¼›</li>
<li>ä»£ç <code>s</code>çš„code point åºåˆ—;</li>
<li>ä»£ç <code>s</code>çš„ç¬¦æ–‡ï¼ˆå­—ç¬¦ï¼‰åºåˆ—;</li>
<li>ç¬¬6-7è¡Œä»£ç åˆ†åˆ«æ˜¾ç¤º31505å’Œ128518å¯¹åº”çš„åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œä»¥æ–¹ä¾¿åˆ†æã€‚</li>
</ol>
<p>è¯·ä»”ç»†æŸ¥çœ‹code units ä¸ runes å¹¶è¿›è¡Œå¯¹æ¯”ï¼Œè¿™å°†å¸®åŠ©ä½ ç†è§£Runeï¼ˆç¬¦æ–‡ï¼‰å’ŒStringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€‚</p>
<h3 id="ä½¿ç”¨-characters-åŒ…"><a class="header" href="#ä½¿ç”¨-characters-åŒ…">ä½¿ç”¨ <code>characters</code> åŒ…</a></h3>
<p>ä¸‹é¢è¿™ä¸ªç¤ºä¾‹åŒæ—¶æ¼”ç¤ºäº†<code>characters</code>åŠ<code>StringBuffer</code>ç±»çš„ä½¿ç”¨ã€‚<code>characters</code> ä¸º<code>String</code>ç±»æ·»åŠ äº†ä¸€ä¸ªæ‰©å±•æ–¹æ³•ï¼ˆç¬¬5ç« å†…å®¹ï¼‰<code>get characters</code>ã€‚<code>StringBuffer</code>æ˜¯æ‹¼æ¥å­—ç¬¦ä¸²çš„é«˜æ•ˆæ–¹å¼ã€‚ä»£ç ä¸­ä½¿ç”¨çš„ for-each å¾ªç¯å°†åœ¨ä¸‹ä¸€ç« èŠ‚ä»‹ç»ï¼Œè¿™é‡Œå…ˆäº†è§£ä¸‹ã€‚</p>
<pre><code class="language-dart">//ch0104_9.dart
//dart pub add characters
import 'package:characters/characters.dart';

void main() {
  const s = "ç¬‘ä¸€ç¬‘åå¹´å°‘ğŸ˜†"; // 1
  final sb = StringBuffer(); // 2 
  for (var ch in s.characters) { // 3
    sb.write(ch);
    sb.write(' ');
  }
  print(sb);
}

</code></pre>
<h2 id="è®°å½•record"><a class="header" href="#è®°å½•record">è®°å½•ï¼ˆRecordï¼‰</a></h2>
<p>Dart 3.0 å¼•å…¥äº†è®°å½•è¿™ä¸€æ•°æ®ç±»å‹ã€‚è®°å½•æ˜¯åŒ¿åçš„ã€ä¸å¯å˜çš„èšåˆç±»å‹ï¼Œæ˜¯å¼‚è´¨æ•°æ®çš„é›†åˆã€‚</p>
<pre><code class="language-dart">// ch0104_a.dart
void main() {
  var record = ('class 1', name: 'Alice', id: 1, 'good student'); // 1
  print(record); // 2 Output: (class 1, good student, id: 1, name: Alice)
  print(record.$1); // 3 Output: class 1
  print(record.$2); // Output: good student
  print(record.id); // 4 Ouput: 1
  print(record.name); // Output: Alice

  // record.id = 2; // 5
  // Error: The setter 'id' isn't defined for the class '(String, String, {int id, String name})'.
  // Try correcting the name to the name of an existing setter, or defining a setter or field named 'id'.
  //   record.id = 2;
  //          ^^
}
</code></pre>
<ol>
<li>å£°æ˜ä¸€ä¸ªå˜é‡<code>record</code>å¹¶èµ‹å€¼ï¼Œå¦‚ä½ æ‰€è§ï¼Œè®°å½•æœ‰ä½ç½®å­—æ®µå’Œå‘½åå­—æ®µï¼ˆå¦‚è¿™é‡Œçš„<code>id</code>å’Œ<code>name</code>ï¼‰;</li>
<li>æ‰“å° <code>record</code>ï¼Œæ³¨æ„è§‚å¯Ÿå­—æ®µçš„æ˜¾ç¤ºé¡ºåº;</li>
<li>æ‰“å° <code>record</code> çš„ç¬¬1ä¸ªä½ç½®å­—æ®µ<code>record.$1</code> ;</li>
<li>æ‰“å° <code>record</code> çš„å‘½åå­—æ®µ <code>record.id</code>;</li>
<li>ä¿®æ”¹ <code>record</code> çš„<code>id</code>ï¼Œé­é‡ç¼–è¯‘é”™è¯¯ï¼Œè¿™è¯´æ˜äº†è®°å½•æ˜¯ä¸å¯å˜çš„ï¼ŒåŒæ—¶ä»é”™è¯¯ä¿¡æ¯ä¸­å¯ä»¥çœ‹å‡ºï¼Œè®°å½•æ˜¯ä¸€ç§ç‰¹æ®Šçš„åŒ¿åç±»ã€‚</li>
</ol>
<h3 id="è®°å½•ç±»å‹"><a class="header" href="#è®°å½•ç±»å‹">è®°å½•ç±»å‹</a></h3>
<p>è®°å½•ï¼ˆRecordï¼‰æ²¡æœ‰æ˜ç¡®çš„ç±»å‹å£°æ˜ï¼Œå› ä¸ºå®ƒæ˜¯åŒ¿åçš„ï¼Œä½†è®°å½•æ˜¯æœ‰å½¢çŠ¶ï¼ˆShapleï¼‰çš„ã€‚æœ¬ä¾‹ä¸­ <code>record</code>çš„å½¢çŠ¶ä¸º<code>(String, String, {int id, String name})</code>ï¼›åœ¨ä¸€å¯¹èŠ±æ‹¬å·(<code>{}</code>)é‡Œçš„<code>int id, String name</code> ä¸ºå‘½åå­—æ®µ <code>id</code>ä¸<code>name</code>ï¼Œå…¶ç±»å‹åˆ†åˆ«ä¸º<code>int</code>ä¸<code>String</code>ï¼›æ²¡æœ‰èŠ±æ‹¬å·åŒ…å›´çš„ä¾¿æ˜¯ä½ç½®å­—æ®µã€‚</p>
<pre><code class="language-dart">// ch01004_b.dart
void main() {
  (int x, int y, int z) point = (1, 2, 3);
  var color = (1, 2, 3);
  print(point); // Output: (1, 2, 3)
  print(point == color); // Output: true

  ({int x, int y, int z}) point2 = (x: 1, y: 2, z: 3);
  var color2 = (r: 1, g: 2, b: 3);
  print(point2); // Output: (x: 1, y: 2, z: 3)
  print(color2); // Output: (b: 3, g: 2, r: 1)
  print(point2 == color2); // Output: false
}
</code></pre>
<p><code>point</code> ä¸ <code>color</code>å…·æœ‰ç›¸åŒçš„å½¢çŠ¶å’Œå€¼ï¼Œå› æ­¤ä»–ä»¬æ˜¯ç›¸ç­‰çš„ï¼Œè€Œ<code>point2</code> ä¸ <code>color2</code>çš„å½¢çŠ¶ä¸åŒï¼Œè‡ªç„¶å°±ä¸ç›¸ç­‰ã€‚</p>
<h3 id="è§£æ„ä¸å˜é‡äº¤æ¢"><a class="header" href="#è§£æ„ä¸å˜é‡äº¤æ¢">è§£æ„ä¸å˜é‡äº¤æ¢</a></h3>
<p>è®°å½•çš„è§£æ„ä¸å˜é‡äº¤æ¢éå¸¸å®ç”¨ã€‚</p>
<pre><code class="language-dart">// ch0104_c.dart
void main() {
  var (x, y) = (1, 2); // 1
  print('x=$x y=$y'); // Output: x=1 y=2

  (y, x) = (x, y); // 2
  print('x=$x y=$y'); // Output: x=2 y=1

  var (:name, :age) = (name: 'Bob', age: 20); // 3
  print('name=$name b=$age'); // Output: name=Bob b=20

  var (x: a, y: b) = (x: 3, y: 4); // 4
  print('a=$a b=$b'); // Output: a=3 b=4
  
  var (who, _, :nickname, fav: _) = (
    'Robert',
    'Naughty boy',
    nickname: 'Bob',
    fav: 'play the guitar',
  ); // 5
  print('who=$who nickname=$nickname'); // Output: who=Robert nickname=Bob
}
</code></pre>
<ol>
<li>è§£æ„è®°å½•<code>(1,2)</code>è‡³å±€éƒ¨å˜é‡<code>x</code>å’Œ<code>y</code>ï¼Œè¿™é‡Œä½¿ç”¨äº†æ¨¡å¼åŒ¹é…ï¼ˆç¬¬3ç« å†…å®¹ï¼‰;</li>
<li>äº¤æ¢<code>x</code>å’Œ<code>y</code>çš„å€¼;</li>
<li>ä½¿ç”¨å†’å·ï¼ˆ<code>:</code>ï¼‰è¯­æ³•ï¼Œè§£æ„å‘½åè®°å½•<code> (name: 'Bob', age: 20)</code>è‡³å±€éƒ¨å˜é‡<code>name</code>å’Œ<code>age</code> ;</li>
<li>è§£æ„å‘½åè®°å½•<code>  (x: 3, y: 4)</code>è‡³å±€éƒ¨å˜é‡<code>a</code>å’Œ<code>b</code> ;</li>
<li>è¿™æ˜¯ä¸€ä¸ªç»¼åˆä¾‹å­ï¼Œè¯·è¿ç”¨å·²å­¦çŸ¥è¯†è‡ªè¡Œåˆ†æã€‚</li>
</ol>
<h2 id="æšä¸¾enum"><a class="header" href="#æšä¸¾enum">æšä¸¾ï¼ˆEnumï¼‰</a></h2>
<p>æšä¸¾æ˜¯ä¸€ç§ç”¨äºè¡¨ç¤ºå›ºå®šæ•°é‡çš„å¸¸é‡å€¼çš„ç‰¹æ®Šç±»ã€‚ä½¿ç”¨å…³é”®å­—<code>enum</code>å£°æ˜ä¸ªä¸€ä¸ªæšä¸¾ã€‚</p>
<pre><code class="language-dart">// ch0104_d.dart
enum Color { red, green, blue }

void main() {
  print(Color.red); // Output: Color.red
  print(Color.blue.name); // Output: blue
  print(Color.blue.index); // Output: 2
}
</code></pre>
<p>æ¯ä¸ªæšä¸¾å€¼éƒ½æœ‰ä¸ªä¸ä¹‹å…³è”çš„æ•°å­—ï¼Œç§°ä¹‹ä¸º<code>index</code>ï¼Œè¯¥æ•°å­—ä»0å¼€å§‹ã€‚æšä¸¾æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œå› æ­¤å®ƒä¹Ÿå¯ä»¥å®šä¹‰å­—æ®µï¼ˆå®ä¾‹å˜é‡ï¼‰å’Œæ–¹æ³•ï¼Œåªä¸è¿‡æœ‰ä¸€äº›é™åˆ¶ï¼Œä¾‹å¦‚æšä¸¾çš„å®ä¾‹å˜é‡å¿…é¡»å£°æ˜ä¸º<code>final</code>ã€‚ç¬¬4ç« ä¼šæ›´è¯¦ç»†åœ°è®¨è®ºæšä¸¾ã€‚</p>
<h2 id="ç¬¦å·symbol"><a class="header" href="#ç¬¦å·symbol">ç¬¦å·ï¼ˆSymbol)</a></h2>
<p>ç¬¦å·å¯¹è±¡è¡¨ç¤º Dart ç¨‹åºä¸­å£°æ˜çš„æ“ä½œç¬¦æˆ–æ ‡è¯†ç¬¦ã€‚ä¸€èˆ¬æå°‘ç”¨åˆ°ï¼Œåœ¨æ­¤äº†è§£å³å¯ã€‚</p>
<pre><code class="language-dart">// ch0104_e.dart
void main() {
  print(#foo); // Output: Symbol("foo")
}
</code></pre>
<h2 id="typedef"><a class="header" href="#typedef">typedef</a></h2>
<p>ç”¨<code>typedef</code>å…³é”®å­—ä¸ºæ•°æ®ç±»å‹å–ä¸€ä¸ªåˆ«åã€‚</p>
<pre><code class="language-dart">//ch0104_f.dart
typedef Point = ({int x, int y});
typedef VoidCallback = void Function();
typedef IntList = List&lt;int&gt;;

void main() {
  Point p = (x: 1, y: 2);
  IntList nums = [3, 4, 5];
}

</code></pre>
<h2 id="å°æµ‹éªŒ"><a class="header" href="#å°æµ‹éªŒ">å°æµ‹éªŒ</a></h2>
<p>ä»¥ä¸‹ç¨‹åºçš„è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p>
<pre><code class="language-dart">// ch01004_quiz.dart
void main() {
  var point = (x: 1, y: 2, z: 3);
  ({num x, int y, int z}) point2 = (x: 1, y: 2, z: 3);
  print(point == point2);
}
</code></pre>
<h2 id="å‚è€ƒèµ„æ–™-3"><a class="header" href="#å‚è€ƒèµ„æ–™-3">å‚è€ƒèµ„æ–™</a></h2>
<ul>
<li><a href="https://dart.dev/language/built-in-types">https://dart.dev/language/built-in-types</a></li>
<li><a href="https://pub.dev/documentation/octal/latest/">https://pub.dev/documentation/octal/latest/</a></li>
<li><a href="https://docs.oracle.com/cd/E19253-01/817-2521/overview-207/index.html">Unicode Overview</a></li>
<li><a href="https://dart.dev/language/records">https://dart.dev/language/records</a></li>
<li><a href="https://dart.dev/language/enums">https://dart.dev/language/enums</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ“ä½œç¬¦"><a class="header" href="#æ“ä½œç¬¦">æ“ä½œç¬¦</a></h1>
<p>è®¡ç®—æœºç¨‹åºçš„è¡¨è¾¾å¼ç”±æ“ä½œç¬¦å’Œæ“ä½œæ•°æ„æˆã€‚å¦‚<code>1+2</code>è¿™ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œ<code>+</code>æ˜¯æ“ä½œç¬¦ï¼Œæ•°å­—<code>1</code>å’Œ<code>2</code>æ˜¯æ“ä½œæ•°ã€‚å¦‚æœè¡¨è¾¾å¼ä¸­åªæœ‰ä¸€ä¸ªæ“ä½œæ•°ï¼Œå®ƒä¾¿æ˜¯ä¸€å…ƒè¡¨è¾¾å¼ï¼›å¦‚æœæœ‰ä¸¤ä¸ªæ“ä½œæ•°ï¼Œå®ƒä¾¿æ˜¯äºŒå…ƒè¡¨è¾¾å¼ï¼›ç±»ä¼¼åœ°è¿˜æœ‰ä¸‰å…ƒè¡¨è¾¾å¼ã€‚ä¸€å…ƒè¡¨è¾¾å¼ä¸­çš„æ“ä½œç¬¦ä¸ºä¸€å…ƒæ“ä½œç¬¦ã€‚</p>
<p>Dartæä¾›äº†éå¸¸ä¸°å¯Œçš„æ“ä½œç¬¦ï¼Œä¸”æ”¯æŒä¸ºç±»ï¼ˆclassï¼Œç¬¬4-5ç« å†…å®¹ï¼‰å®šä¹‰æ“ä½œç¬¦ã€‚</p>
<ul>
<li><a href="ch01/dartpl0105.html#%E7%AE%97%E6%9C%AF%E6%93%8D%E4%BD%9C%E7%AC%A6">ç®—æœ¯æ“ä½œç¬¦</a></li>
<li><a href="ch01/dartpl0105.html#%E5%85%B3%E7%B3%BB%E6%93%8D%E4%BD%9C%E7%AC%A6">å…³ç³»æ“ä½œç¬¦</a></li>
<li><a href="ch01/dartpl0105.html#%E7%B1%BB%E5%9E%8B%E6%B5%8B%E8%AF%95%E6%93%8D%E4%BD%9C%E7%AC%A6">ç±»å‹æµ‹è¯•æ“ä½œç¬¦</a></li>
<li><a href="ch01/dartpl0105.html#%E8%B5%8B%E5%80%BC%E6%93%8D%E4%BD%9C%E7%AC%A6">èµ‹å€¼æ“ä½œç¬¦</a></li>
<li><a href="ch01/dartpl0105.html#%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C%E7%AC%A6">é€»è¾‘æ“ä½œç¬¦</a></li>
<li><a href="ch01/dartpl0105.html#%E4%BD%8D%E6%93%8D%E4%BD%9C%E7%AC%A6">ä½æ“ä½œç¬¦</a></li>
<li><a href="ch01/dartpl0105.html#%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F">æ¡ä»¶è¡¨è¾¾å¼</a></li>
<li><a href="ch01/dartpl0105.html#%E7%BA%A7%E8%81%94%E7%AC%A6%E5%8F%B7">çº§è”ç¬¦å·</a></li>
<li><a href="ch01/dartpl0105.html#%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C%E7%AC%A6">å…¶ä»–æ“ä½œç¬¦</a></li>
</ul>
<h2 id="ç®—æœ¯æ“ä½œç¬¦"><a class="header" href="#ç®—æœ¯æ“ä½œç¬¦">ç®—æœ¯æ“ä½œç¬¦</a></h2>
<div class="table-wrapper"><table><thead><tr><th>æ“ä½œç¬¦</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody>
<tr><td><code>+</code></td><td>åŠ </td><td><code>1 + 2</code>  <span class="hljs-comment"> <em>//3</em></span></td></tr>
<tr><td><code>-</code></td><td>å‡</td><td><code>4 - 3</code>  <span class="hljs-comment">  <em>//1</em></span></td></tr>
<tr><td><code>-</code><span class="hljs"><em>expr</em></span></td><td>ç¬¦å·å–å</td><td><code>-x</code></td></tr>
<tr><td><code>*</code></td><td>ä¹˜</td><td><code>3 * 5</code>  <span class="hljs-comment"> <em>//15</em></span></td></tr>
<tr><td><code>/</code></td><td>é™¤ï¼Œç»“æœæ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°</td><td><code>7 / 2</code>  <span class="hljs-comment">  <em>//3.5</em></span></td></tr>
<tr><td><code>~/</code></td><td>æ•´é™¤ï¼Œé™¤æ³•çš„æ•´æ•°éƒ¨åˆ†ï¼Œç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°</td><td><code>7 ~/ 2</code>  <span class="hljs-comment">  <em>//3</em></span></td></tr>
<tr><td><code>%</code></td><td>æ¨¡ï¼Œé™¤æ³•çš„ä½™æ•°éƒ¨åˆ†ï¼Œç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°æˆ–æµ®ç‚¹æ•°</td><td><code>7 % 2</code>  <span class="hljs-comment">  <em>//1</em></span></td></tr>
</tbody></table>
</div>
<p>Dartæ”¯æŒè‡ªå¢ï¼ˆ<code>++</code>ï¼‰ä¸è‡ªå‡ï¼ˆ<code>--</code>ï¼‰ä¸€å…ƒæ“ä½œç¬¦ã€‚è¡¨è¾¾å¼<code>x++</code> ç›¸å½“äº<code>x = x+1</code>ï¼Œ<code>x--</code> ç›¸å½“äº<code>x = x-1</code>ã€‚ è¿™ä¸¤ä¸ªæ“ä½œç¬¦ä½äºæ“ä½œæ•°ä¹‹å‰æˆ–ä¹‹åå‡å¯ï¼Œä½†æœ‰åŒºåˆ«ã€‚</p>
<pre><code class="language-dart">// ch0105_1.dart
void main() {
  var x = 3, y = 3;
  print('${x++} $x'); // Output: 3 4
  print('${++y} $y'); // Output: 4 4
}
</code></pre>
<p>è¡¨è¾¾å¼<code>x++</code> çš„å€¼ä¸º<code>x</code>ï¼Œå…ˆè¿”å›<code>x</code>ï¼Œå†å°†<code>x</code>è‡ªå¢1ï¼›è€Œè¡¨è¾¾å¼<code>++x</code>çš„å€¼ä¸º<code>x+1</code>ï¼Œä¹Ÿå°±æ˜¯å…ˆå°†<code>x</code>è‡ªå¢1ï¼Œå†è¿”å›<code>x</code>ã€‚
æˆ‘ä»¬ç”¨åŒæ ·çš„æ–¹å¼å»ç†è§£<code>x--</code> ä¸<code>--x</code>ã€‚</p>
<h2 id="å…³ç³»æ“ä½œç¬¦"><a class="header" href="#å…³ç³»æ“ä½œç¬¦">å…³ç³»æ“ä½œç¬¦</a></h2>
<p>å…³ç³»æ“ä½œç¬¦ç”¨äºå¸ƒå°”è¡¨è¾¾å¼ï¼ˆå…¶ç»“æœä¸º<code>true</code>æˆ–<code>false</code>ï¼‰ã€‚</p>
<div class="table-wrapper"><table><thead><tr><th>æ“ä½œç¬¦</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody>
<tr><td><code>==</code></td><td>ç­‰äº</td><td><code>5 == 5</code></td></tr>
<tr><td><code>!=</code></td><td>ä¸ç­‰äº</td><td><code>6 != 7</code></td></tr>
<tr><td><code>&gt;</code></td><td>å¤§äº</td><td><code>8 &gt; 7</code></td></tr>
<tr><td><code>&lt;</code></td><td>å°äº</td><td><code>6 &lt; 9</code></td></tr>
<tr><td><code>&gt;=</code></td><td>å¤§äºç­‰äº</td><td><code>4 &gt;= 3</code></td></tr>
<tr><td><code>&lt;=</code></td><td>å°äºç­‰äº</td><td><code>3 &lt;= 4</code></td></tr>
</tbody></table>
</div>
<p>å…³äº<code>==</code> æ“ä½œç¬¦ï¼š</p>
<ol>
<li>å¦‚æœ <code>x</code> æˆ– <code>y</code> ä¸º <code>null</code>ï¼Œåˆ™åªæœ‰å½“å®ƒä»¬éƒ½æ˜¯ <code>null</code>ï¼Œ<code>x==y</code> æ‰è¿”å› <code>true</code>ï¼›å¦‚æœåªæœ‰ä¸€ä¸ªä¸º <code>null</code>ï¼Œåˆ™<code>x==y</code> è¿”å› <code>false</code>ã€‚</li>
<li><code>x == y</code>æœ¬è´¨ä¸Šæ˜¯è°ƒç”¨ <code>x</code>çš„<code>==</code> æ“ä½œç¬¦æ–¹æ³•ï¼ˆä»¥<code>y</code>ä½œä¸ºå‚æ•°ï¼‰ï¼Œç„¶åè¿”å›å…¶ç»“æœï¼Œ ç±»ä¼¼äº <code>x.equals(y)</code> ã€‚</li>
<li>æå°‘æƒ…å†µä¸‹ï¼Œä½ éœ€è¦çŸ¥é“<code>x</code>å’Œ<code>y</code>æ˜¯å¦å¼•ç”¨äº†åŒä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨<code>identical(x,y)</code>ã€‚</li>
</ol>
<blockquote>
<p><strong><em>NOTE:</em></strong> æ–¹æ³•ã€å¯¹è±¡çš„æ¦‚å¿µå°†åœ¨ç¬¬4ç« ä»‹ç»ã€‚</p>
</blockquote>
<h2 id="ç±»å‹æµ‹è¯•æ“ä½œç¬¦"><a class="header" href="#ç±»å‹æµ‹è¯•æ“ä½œç¬¦">ç±»å‹æµ‹è¯•æ“ä½œç¬¦</a></h2>
<p><code>as</code>ã€<code>is</code> å’Œ <code>is!</code> æ“ä½œç¬¦ç”¨äºåœ¨è¿è¡Œæ—¶æ£€æŸ¥ç±»å‹ã€‚</p>
<div class="table-wrapper"><table><thead><tr><th>æ“ä½œç¬¦</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody>
<tr><td><code>as</code></td><td>ç±»å‹è½¬æ¢ï¼ˆè¯¥ç¬¦å·ä¹Ÿç”¨äº<code>import</code>è¯­å¥ä¸­ç»™åŒ…å–åˆ«åï¼‰</td><td><code>obj as String</code></td></tr>
<tr><td><code>is</code></td><td>å¦‚æœå¯¹è±¡å…·æœ‰æŒ‡å®šç±»å‹è¿”å›<code>true</code></td><td><code>obj is double</code></td></tr>
<tr><td><code>is!</code></td><td>å¦‚æœå¯¹è±¡ä¸å…·æœ‰æŒ‡å®šç±»å‹è¿”å›<code>true</code></td><td><code>obj is! num</code></td></tr>
</tbody></table>
</div>
<h2 id="èµ‹å€¼æ“ä½œç¬¦"><a class="header" href="#èµ‹å€¼æ“ä½œç¬¦">èµ‹å€¼æ“ä½œç¬¦</a></h2>
<p>é¦–å…ˆæ¥çœ‹ <code>=</code> å’Œ <code>??=</code> è¿™ä¸¤ä¸ªèµ‹å€¼æ“ä½œç¬¦ã€‚</p>
<div class="table-wrapper"><table><thead><tr><th>æ“ä½œç¬¦</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody>
<tr><td><code>=</code></td><td>èµ‹å€¼</td><td><code>x = 123;</code></td></tr>
<tr><td><code>??=</code></td><td>ä»…å½“å˜é‡ä¸º<code>null</code>æ‰å¯¹å…¶èµ‹å€¼</td><td><code> x ??= 234;</code></td></tr>
</tbody></table>
</div>
<p>å¤åˆèµ‹å€¼æ“ä½œç¬¦ç»„åˆäº†ä¸€ä¸ªæ“ä½œå’Œèµ‹å€¼ï¼Œä»¥ <code>+=</code> ä¸ºä¾‹ï¼Œ<code> x += y</code> å°±ç­‰ä»·äº <code> x = x + y</code>ã€‚å‡è®¾  <code>op</code> æ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œé‚£ä¹ˆ <code>a op= b</code> ç­‰ä»·äº  <code> a = a op b</code>ã€‚ä»¥ä¸‹æ˜¯å¤åˆèµ‹å€¼æ“ä½œç¬¦ï¼š</p>
<div class="table-wrapper"><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody>
<tr><td><code>*=</code></td><td><code>%=</code></td><td><code>&gt;&gt;&gt;=</code></td><td><code>^=</code></td></tr>
<tr><td><code>+=</code></td><td><code>/=</code></td><td><code>&lt;&lt;=</code></td><td><code>&amp;=</code></td></tr>
<tr><td><code>|=</code></td><td><code>-=</code></td><td><code>~/=</code></td><td><code>&gt;&gt;=</code></td></tr>
</tbody></table>
</div>
<h2 id="é€»è¾‘æ“ä½œç¬¦"><a class="header" href="#é€»è¾‘æ“ä½œç¬¦">é€»è¾‘æ“ä½œç¬¦</a></h2>
<p>æ‚¨ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦åè½¬æˆ–ç»„åˆå¸ƒå°”è¡¨è¾¾å¼ã€‚</p>
<div class="table-wrapper"><table><thead><tr><th>æ“ä½œç¬¦</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody>
<tr><td><code>!</code><span class="hljs"><em>expr</em></span></td><td>é€»è¾‘éï¼Œé€»è¾‘å–å</td><td><code>!x</code></td></tr>
<tr><td><code>||</code></td><td>é€»è¾‘æˆ–ï¼ˆORï¼‰</td><td><code>x == 3 || x ==4</code></td></tr>
<tr><td><code>&amp;&amp;</code></td><td>é€»è¾‘ä¸ï¼ˆANDï¼‰</td><td><code> x &gt;=1 &amp;&amp;  y &lt; 6</code></td></tr>
</tbody></table>
</div>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¨å¾®å¤æ‚çš„ä¾‹å­ï¼š</p>
<pre><code class="language-dart">if (ok &amp;&amp; (x &lt; 5 || y &gt; 6)) {
    print('good');
}
</code></pre>
<h2 id="ä½æ“ä½œç¬¦"><a class="header" href="#ä½æ“ä½œç¬¦">ä½æ“ä½œç¬¦</a></h2>
<p>Dartå¯ä»¥å¯¹æ•°å­—çš„æ¯ä¸€ä½ï¼ˆbitï¼‰è¿›è¡Œæ“ä½œã€‚</p>
<div class="table-wrapper"><table><thead><tr><th>æ“ä½œç¬¦</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody>
<tr><td><code>&amp;</code></td><td>ä¸ï¼ˆANDï¼‰</td><td><code> 1 &amp; 2</code> <span class="hljs-comment">  <em>//0</em></span></td></tr>
<tr><td><code>|</code></td><td>æˆ–ï¼ˆORï¼‰</td><td><code>1 | 2</code><span class="hljs-comment">  <em>//3</em></span></td></tr>
<tr><td><code>^</code></td><td>å¼‚æˆ–ï¼ˆXORï¼‰</td><td><code>2 ^ 3</code><span class="hljs-comment">  <em>//1</em></span></td></tr>
<tr><td><code>~</code><span class="hljs"><em>expr</em></span></td><td>æŒ‰ä½è¡¥ç ï¼ˆ0å˜ä¸º1ï¼Œ1å˜ä¸º0ï¼‰</td><td><code>ï½1</code><span class="hljs-comment">  <em>//-2</em></span></td></tr>
<tr><td><code>&lt;&lt;</code></td><td>å·¦ç§»ä½</td><td><code>1 &lt;&lt; 10</code><span class="hljs-comment">  <em>//1024</em></span></td></tr>
<tr><td><code>&gt;&gt;</code></td><td>å³ç§»ä½</td><td><code>1024 &gt;&gt; 9</code><span class="hljs-comment">  <em>//2</em></span></td></tr>
<tr><td><code>&gt;&gt;&gt;</code></td><td>æ— ç¬¦å·å³ç§»</td><td><code>-1 &gt;&gt;&gt; 61</code><span class="hljs-comment">  <em>//7</em></span></td></tr>
</tbody></table>
</div>
<h2 id="æ¡ä»¶è¡¨è¾¾å¼"><a class="header" href="#æ¡ä»¶è¡¨è¾¾å¼">æ¡ä»¶è¡¨è¾¾å¼</a></h2>
<p>å…ˆæ¥çœ‹ä¸‹é¢çš„ä»£ç ç‰‡æ®µ:</p>
<pre><code class="language-dart">  int n;
  if (x &lt; 3) {
    n = 3;
  } else {
    n = x;
  }
</code></pre>
<p>ä¸Šé¢è®¡ç®—<code>n</code> çš„ä»£ç ï¼Œç”¨æ¡ä»¶è¡¨è¾¾å¼å°±ç®€åŒ–ä¸º:</p>
<pre><code class="language-dart">  var n = x &lt; 3 ? 3 : x;
</code></pre>
<p>æ¡ä»¶è¡¨è¾¾å¼ <code>condition  ?  expr1  :  expr2</code> ï¼Œæœ‰ <code>?</code>å’Œ<code>:</code>2ä¸ªæ“ä½œç¬¦ï¼Œ<code>?</code>ä¹‹å‰ä¸ºä¸€ä¸ªè¡¨ç¤ºæ¡ä»¶çš„å¸ƒå°”è¡¨è¾¾å¼<code>condition</code>ï¼›å¦‚æœ<code>condition</code>çš„å€¼ä¸º<code>true</code>ï¼Œè¯¥è¡¨è¾¾å¼çš„å€¼å°±å–<code>expr1</code>çš„å€¼ï¼Œå¦åˆ™å– <code>expr2</code>çš„å€¼ã€‚</p>
<h2 id="çº§è”ç¬¦å·"><a class="header" href="#çº§è”ç¬¦å·">çº§è”ç¬¦å·</a></h2>
<p>Dartçš„çº§è”ç¬¦å·ï¼ˆ<code>..</code> å’Œ <code>?..</code>ï¼‰ç”¨äºå¯¹åŒä¸€ä¸ªå¯¹è±¡è¿›è¡Œä¸€ç³»åˆ—æ“ä½œã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µï¼š</p>
<pre><code class="language-dart">  var sb = StringBuffer();
  sb.write('Hello ');
  sb.write('Dart');
  sb.write('!');
  print(sb);
</code></pre>
<p>ç”¨çº§è”ç¬¦å·å°±ç®€åŒ–ä¸º:</p>
<pre><code class="language-dart">  print(
    StringBuffer()
      ..write('Hello ')
      ..write('Dart')
      ..write('!'),
  );
</code></pre>
<p><code>?..</code> ä¸ <code>..</code>ç±»ä¼¼ï¼Œåªä¸è¿‡ç”¨äºnullableå¯¹è±¡çš„ç¬¬ä¸€ä¸ªæ“ä½œã€‚</p>
<pre><code class="language-dart">  sb2
    ?..write('Hello ')
    ..write('Dart')
    ..write('!');
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­çš„<code>sb2</code>å¦‚æœæ˜¯<code>null</code>ï¼Œå°±ä¸ä¼šæ‰§è¡Œä»»ä½•çš„çº§è”æ“ä½œã€‚</p>
<h2 id="å…¶ä»–æ“ä½œç¬¦"><a class="header" href="#å…¶ä»–æ“ä½œç¬¦">å…¶ä»–æ“ä½œç¬¦</a></h2>
<p>ä¸‹é¢çš„æ“ä½œç¬¦å·²åœ¨å‰é¢ç« èŠ‚ä»‹ç»è¿‡ï¼Œä¸å†èµ˜è¿°ã€‚</p>
<div class="table-wrapper"><table><thead><tr><th>æ“ä½œç¬¦</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody>
<tr><td><code>()</code></td><td>å‡½æ•°è°ƒç”¨</td><td><code>doIt()</code></td></tr>
<tr><td><code>[]</code></td><td>ä¸‹æ ‡è®¿é—®</td><td><code>todoList[0]</code></td></tr>
<tr><td><code>?[]</code></td><td>æœ‰æ¡ä»¶ä¸‹æ ‡è®¿é—®</td><td><code>fruits?[0]</code></td></tr>
<tr><td><code>.</code></td><td>æˆå‘˜è®¿é—®</td><td><code>point.x</code></td></tr>
<tr><td><code>?.</code></td><td>æœ‰æ¡ä»¶æˆå‘˜è®¿é—®</td><td><code>point?.x</code></td></tr>
<tr><td><code>!</code></td><td>éç©ºæ–­è¨€</td><td><code>point!</code></td></tr>
<tr><td><code>...</code></td><td>å±•å¼€ä¸€ä¸ªé›†åˆï¼ˆcollectionï¼‰ï¼Œæ’å…¥å¦ä¸€ä¸ªé›†åˆï¼ˆcollectionï¼‰</td><td><code>...myList</code></td></tr>
<tr><td><code>...?</code></td><td>ä¸<code>...</code>ç±»ä¼¼ï¼Œé€‚ç”¨äºnullableå¯¹è±¡</td><td><code>....?anotherList</code></td></tr>
</tbody></table>
</div>
<h2 id="å‚è€ƒèµ„æ–™-4"><a class="header" href="#å‚è€ƒèµ„æ–™-4">å‚è€ƒèµ„æ–™</a></h2>
<ul>
<li><a href="https://dart.dev/language/operators">https://dart.dev/language/operators</a></li>
<li><a href="https://dart.dev/language/methods#operators">https://dart.dev/language/methods#operators</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ³¨é‡Š"><a class="header" href="#æ³¨é‡Š">æ³¨é‡Š</a></h1>
<p>ä»£ç ä¸­çš„æ³¨é‡Šå¸®åŠ©äººä»¬é˜…è¯»ä»£ç ï¼Œæ–‡æ¡£æ³¨é‡Šè¿˜ç”¨äºç”ŸæˆAPIï¼ˆåº”ç”¨ç¼–ç¨‹æ¥å£ï¼‰æ–‡æ¡£ã€‚Dart æ”¯æŒä¸‰ç§æ³¨é‡Šï¼š</p>
<ul>
<li><a href="ch01/dartpl0106.html#%E5%8D%95%E8%A1%8C%E6%B3%A8%E9%87%8A">å•è¡Œæ³¨é‡Š</a></li>
<li><a href="ch01/dartpl0106.html#%E5%A4%9A%E8%A1%8C%E6%B3%A8%E9%87%8A">å¤šè¡Œæ³¨é‡Š</a></li>
<li><a href="ch01/dartpl0106.html#%E6%96%87%E6%A1%A3%E6%B3%A8%E9%87%8A">æ–‡æ¡£æ³¨é‡Š</a></li>
</ul>
<p>å•è¡Œæ³¨é‡Šå’Œå¤šè¡Œæ³¨é‡Šä¼šè¢«ç¼–è¯‘å™¨å¿½ç•¥ï¼Œè€Œæ–‡æ¡£æ³¨é‡Šå¯ç”¨äºDartçš„æ–‡æ¡£ç”Ÿæˆå·¥å…·ï¼Œ<code>dart doc</code>ã€‚</p>
<h2 id="å•è¡Œæ³¨é‡Š"><a class="header" href="#å•è¡Œæ³¨é‡Š">å•è¡Œæ³¨é‡Š</a></h2>
<p>å•è¡Œæ³¨é‡Šä»¥<code>//</code>å¼€å¤´ï¼Œä»<code>//</code>åˆ°è¿™ä¸€è¡Œçš„æœ«å°¾ï¼Œéƒ½ä¼šè¢«Dartç¼–è¯‘å™¨å¿½ç•¥ã€‚</p>
<pre><code class="language-dart">  // This line will be ignored by Dart compiler
  print('Hello');
</code></pre>
<h2 id="å¤šè¡Œæ³¨é‡Š"><a class="header" href="#å¤šè¡Œæ³¨é‡Š">å¤šè¡Œæ³¨é‡Š</a></h2>
<p>å¤šè¡Œæ³¨é‡Šä»¥ <code>/*</code> å¼€å¤´ï¼Œä»¥<code>*/</code> ç»“å°¾ã€‚</p>
<pre><code class="language-dart">  /*
  This whole paragraph will be ignored by Dart compiler.
  Greetings to Dart.
  */
  print("Hello Dart!");
</code></pre>
<h2 id="æ–‡æ¡£æ³¨é‡Š"><a class="header" href="#æ–‡æ¡£æ³¨é‡Š">æ–‡æ¡£æ³¨é‡Š</a></h2>
<p>æ–‡æ¡£æ³¨é‡Šä»¥<code>///</code>å¼€å¤´ï¼ˆå•è¡Œæ–‡æ¡£æ³¨é‡Šï¼‰ï¼Œæˆ–ä»¥<code>/**</code>å¼€å§‹ä»¥<code>*/</code>ç»“æŸï¼ˆå¤šè¡Œæ–‡æ¡£æ³¨é‡Šï¼‰ã€‚åœ¨è¿ç»­çš„è¡Œä¸Šä½¿ç”¨ <code>///</code> ä¸å¤šè¡Œæ–‡æ¡£æ³¨é‡Šå…·æœ‰ç›¸åŒçš„æ•ˆæœã€‚</p>
<pre><code class="language-dart">// lib/ch0106_2.dart

/// A student class encapsulate student information,
/// including id, name and birthdate.
/// 
/// This class is immutable.
class Student {
  final int id;
  final String name;
  final DateTime birthdate;
  const Student(this.id, this.name, this.birthdate);
}
</code></pre>
<h2 id="å‚è€ƒèµ„æ–™-5"><a class="header" href="#å‚è€ƒèµ„æ–™-5">å‚è€ƒèµ„æ–™</a></h2>
<ul>
<li><a href="https://dart.dev/language/comments">https://dart.dev/language/comments</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="if-ä¸-switch-è¯­å¥"><a class="header" href="#if-ä¸-switch-è¯­å¥">if ä¸ switch è¯­å¥</a></h1>
<p>ç¨‹åºçš„æ§åˆ¶ç»“æ„åŒ…æ‹¬ï¼š</p>
<ul>
<li>é¡ºåºï¼ˆé¡ºåºæ‰§è¡Œï¼‰</li>
<li>åˆ†æ”¯ï¼ˆ<code>if</code>ã€<code>switch</code>ï¼‰</li>
<li>å¾ªç¯ï¼ˆ<code>for</code>ã€<code>while</code>ï¼‰</li>
</ul>
<p>åˆ†æ”¯è¯­å¥åŒ…æ‹¬ <code>if</code> å’Œ <code>switch</code>è¯­å¥ã€‚</p>
<h2 id="if"><a class="header" href="#if"><code>if</code></a></h2>
<p>ä¸‹ä¾‹ä¸­ï¼Œå¦‚æœ <code>isSunny</code>çš„å€¼ä¸º<code>true</code>ï¼Œå°±æ‰§è¡Œæ‰“å°ï¼Œå¦åˆ™ä»€ä¹ˆä¹Ÿä¸åšã€‚</p>
<pre><code class="language-dart">// ch0201_1.dart
import 'dart:math';

void main() {
  final rand = Random();
  final isSunny = rand.nextInt(10) % 2 == 0;
  if (isSunny) {
    print("Let's go to the park");
  }
}  
</code></pre>
<pre class="mermaid">flowchart TD
    B{æ¡ä»¶}--&gt;|true| C(ä»£ç å—)
    C --&gt; E([End])
    B --&gt;|false| E
</pre>
<p><code>if</code> æœ‰ä¸€ä¸ªå¯é€‰çš„<code>else</code>åˆ†æ”¯ã€‚</p>
<pre><code class="language-dart">  if (isSunny) {
    print("Let's go to the park");
  } else {
    print("It's not sunny");
  }
</code></pre>
<pre class="mermaid">flowchart TD
    B{æ¡ä»¶}--&gt;|true| C(ä¸»åˆ†æ”¯)
    C --&gt; E([End])
    B --&gt;|false| D(elseåˆ†æ”¯)
    D --&gt; E
</pre>
<p>è¿˜å¯ä»¥ä½¿ç”¨ <code>else if</code>ï¼Œåƒä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="language-dart">  if (isSunny) {
    print("Let's go to the park");
  } else if (isRaining) {
    print("Let's bring our raincoats");
  } else {
    print("Let's stay home");
  }
</code></pre>
<p>ä»è¯­æ³•ä¸Šè®²ï¼Œä¸Šä¾‹ä¸­æœ€åçš„<code>else</code>åˆ†æ”¯ä¹Ÿæ˜¯å¯é€‰çš„ã€‚</p>
<h3 id="if-case"><a class="header" href="#if-case">if-case</a></h3>
<p>ä» Dart 3.0 å¼€å§‹ï¼Œ <code>if</code> è¯­å¥æ”¯æŒ <code>case</code> å­å¥ï¼Œ<code>case</code>åé¢æ¥ä¸€ä¸ªæ¨¡å¼ï¼ˆpatternï¼Œç¬¬3ç« å†…å®¹ï¼‰ã€‚</p>
<pre><code class="language-dart">// ch0201_2.dart
void main() {
  var dat = [1, 2]; 
  if (dat case [_, _]) { // 1
    print('matched'); // 2
  } else {
    print('not matched'); // 2a
  }

  if (dat case [int x, int y]) { // 3
    print('x=$x y=$y'); // 4
  }
}

</code></pre>
<ol>
<li>ä½¿ç”¨ if-case æ£€æŸ¥ <code>dat</code>  æ˜¯å¦åŒ¹é…ä¸€ä¸ªåŒ…å«2ä¸ªå…ƒç´ çš„åˆ—è¡¨;</li>
<li>å¦‚æœåŒ¹é…ï¼Œå°±æ‰“å°å­—ç¬¦ä¸² <code>"matched"</code>ï¼Œå¦åˆ™æ‰“å°<code>"not matched"</code> (2a);</li>
<li>ä½¿ç”¨ if-case å°†  <code>dat</code>ä¸åˆ—è¡¨è¿›è¡ŒåŒ¹é…ï¼Œå¹¶æ•è·åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚</li>
</ol>
<h2 id="switch"><a class="header" href="#switch"><code>switch</code></a></h2>
<p>å¦‚æœéœ€è¦åŒ¹é…å¤šä¸ªcaseï¼Œåº”ä½¿ç”¨<code>switch</code> è¯­å¥ï¼Œè€Œéä¸€ä¸ªåˆä¸€ä¸ªçš„<code>else if</code>ã€‚</p>
<pre class="mermaid">flowchart TD
    A{switch}--&gt;|case1| B(case1)
    A --&gt; |case2| C(case2)
    A --&gt; |case...| D(case...)
    A --&gt; |default| E(defaultåˆ†æ”¯)
    B --&gt; Z([End])
    C --&gt; Z
    D --&gt; Z
    E --&gt; Z
</pre>
<pre><code class="language-dart">// ch0201_3.dart
void main() {
  var status = 'done';
  switch (status) {
    case 'done':
      print('done');
    case 'ongoing':
      print('ongoing');
    case 'pending':
      print('pending');
    default: // case _:
      print('unknown status: $status');
  }
}
</code></pre>
<p>å¦‚æœå…¶ä»–caseéƒ½ä¸åŒ¹é…ï¼Œåˆ™æ‰§è¡Œdefault caseçš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ <code>default</code>  æˆ– <code>case _</code>  æ ‡è®°çš„ä»£ç  ã€‚default case è¦æ”¾åœ¨æœ€åã€‚</p>
<h3 id="fallthrough-ä¸-æ ‡ç­¾lablel"><a class="header" href="#fallthrough-ä¸-æ ‡ç­¾lablel">fallthrough ä¸ æ ‡ç­¾ï¼ˆlablelï¼‰</a></h3>
<p>ç©ºcaseï¼ˆempty caseï¼‰æ˜¯æŒ‡ä¸åšä»»ä½•å¤„ç†çš„caseã€‚é»˜è®¤æƒ…å†µä¸‹ç©ºcaseä¼šfall throughåˆ°ä¸‹ä¸€ä¸ªcaseï¼Œä½¿å¾—caseså¯ä»¥å…±äº«ä»£ç å—ã€‚å¦‚æœæƒ³è®©ç©ºcase fall throughåˆ°å…¶ä»–çš„caseï¼ˆéä¸‹ä¸€ä¸ªcaseï¼‰ï¼Œä½¿ç”¨æ ‡ç­¾ï¼ˆlabelï¼‰å’Œ <code>continue</code>æ¥å®ç°ã€‚</p>
<pre><code class="language-dart">// ch0201_4.dart
void main() {
  var status = 'canceled';
  switch (status) {
    case 'canceled': // 1 empty case
    case 'done': // 1a
      print('done');
    todo: // 2
    case 'todo':
      print('todo');
    case 'pending':
      print('pending');
      continue todo; // 3
    case 'ongoing':
      print('ongoing');
    case _:
      print('unknown status: $status');
  }
}
</code></pre>
<ol>
<li>è¿™æ˜¯ä¸€ä¸ªç©ºcaseï¼ˆ <code>canceled</code> ï¼‰ï¼Œå®ƒæ²¡æœ‰å¯¹åº”çš„ä»£ç å—ï¼Œfall through åˆ°ä¸‹ä¸€ä¸ªcaseï¼ˆ<code>done</code> ï¼‰ï¼Œ è¿™ä¸¤ä¸ªcaseå…±äº«äº†ä»£ç å—ï¼ˆ<code>print('done')</code>ï¼‰ ; æ­¤å¤–è¿™ä¸¤ä¸ªcaseä¹Ÿå¯ä»¥å†™æˆ</li>
</ol>
<pre><code class="language-dart">    case 'canceled' || 'done':
      print('done');
</code></pre>
<ol start="2">
<li>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªæ ‡ç­¾ <code>todo</code>ï¼›</li>
<li>åœ¨æ‰§è¡Œå®Œä¸Šä¸€è¡Œä»£ç åï¼ˆ<code>print('pending')</code>ï¼‰ï¼Œè·³è½¬è‡³ <code>todo</code> æ ‡ç­¾æ‰€åœ¨ä½ç½®ç»§ç»­æ‰§è¡Œï¼ˆ<code> print('todo')</code>ï¼‰ã€‚</li>
</ol>
<p>å¦‚æœä¸æƒ³è®©ç©ºcase fall throughï¼Œ ä½¿ç”¨  <code>break</code> å³å¯ã€‚</p>
<pre><code class="language-dart">    case 'canceled':
      break;
</code></pre>
<h3 id="switch-è¡¨è¾¾å¼"><a class="header" href="#switch-è¡¨è¾¾å¼"><code>switch</code> è¡¨è¾¾å¼</a></h3>
<p><code>switch</code>è¡¨è¾¾å¼å°†è¿”å›ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼æ¥è‡ªäºåŒ¹é…çš„caseçš„è¡¨è¾¾å¼ã€‚å…ˆæ¥çœ‹ä¸€ä¸ªæ™®é€šçš„switchè¯­å¥ï¼š</p>
<pre><code class="language-dart">// ch0201_5.dart
void main() {
  var x = 1.0, y = 2.0;
  var op = '+';
  double r;
  switch (op) {
    case '+':
      r = x + y;
    case '-':
      r = x - y;
    case '*':
      r = x * y;
    case '/':
      r = x / y;
    case '%':
      r = x % y;
    case _:
      throw 'unknown op: $op';
  }
  print('$x$op$y=$r');
}
</code></pre>
<p>ç”¨<code>switch</code>è¡¨è¾¾å¼æ”¹å†™ï¼š</p>
<pre><code class="language-dart">// ch0201_6.dart
void main() {
  var x = 1.0, y = 2.0;
  var op = '+';
  var r = switch (op) {
    '+' =&gt; x + y,
    '-' =&gt; x - y,
    '*' =&gt; x * y,
    '/' =&gt; x / y,
    '%' =&gt; x % y,
    _ =&gt; throw 'unknown op: $op',
  };
  print('$x$op$y=$r');
}
</code></pre>
<p>åœ¨è¯­æ³•æ–¹é¢ï¼Œä¸<code>switch</code> è¯­å¥ç›¸æ¯”ï¼Œ<code>switch</code>è¡¨è¾¾å¼ï¼š</p>
<ol>
<li>caseä¸ä»¥ <code>case</code> å…³é”®å­—å¼€å¤´;</li>
<li>caseä¸»ä½“æ˜¯ä¸€ä¸ªå•ä¸€çš„è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯ä¸€ç³»åˆ—çš„è¯­å¥;</li>
<li>æ¯ä¸ªcaseéƒ½å¿…é¡»æœ‰ä¸€ä¸ªä¸»ä½“ï¼›å¯¹äºç©ºcaseï¼Œæ²¡æœ‰éšå¼çš„ fallthrough;</li>
<li>caseæ¨¡å¼ä¸å…¶ä¸»ä½“ä½¿ç”¨ <code>=&gt;</code> è€Œä¸æ˜¯ <code>:</code> åˆ†éš”;</li>
<li>å„ä¸ªcaseä¹‹é—´ç”¨ <code>,</code> åˆ†éš”ï¼ˆå…è®¸åœ¨ç»“å°¾æ·»åŠ å¯é€‰çš„<code> ,</code> ï¼‰;</li>
<li>default case åªèƒ½ç”¨ <code>_</code>ï¼Œ æ— æ³•ç”¨<code>default</code>ã€‚</li>
</ol>
<h3 id="è¯¦å°½æ€§æ£€æŸ¥"><a class="header" href="#è¯¦å°½æ€§æ£€æŸ¥">è¯¦å°½æ€§æ£€æŸ¥</a></h3>
<p>ä¸‹é¢è¿™æ®µä»£ç å°†å¼•èµ·ç¼–è¯‘é”™è¯¯ï¼š</p>
<pre><code class="language-dart">//ch0201_7.dart
void main() {
  bool? win;
  var score = switch (win) {
    true =&gt; 2,
    false =&gt; 0,
  };
  // Error: The type 'bool?' is not exhaustively matched by the switch cases since it doesn't match 'null'.
  // Try adding a wildcard pattern or cases that match 'null'.
  //   var score = switch (win) {
  //                       ^
}
</code></pre>
<p>å¯¹äºä¸€ä¸ª <code>boo?</code>ç±»å‹çš„å˜é‡ï¼Œå®ƒçš„å€¼æ˜¯ç©·ä¸¾çš„ï¼Œå³ <code>true</code>ã€<code>false</code>å’Œ <code>null</code>ï¼ŒDartç¼–è¯‘å™¨å°†å¯¹è¿™ç±»å¯ç©·ä¸¾ç±»å‹çš„å˜é‡è¿›è¡Œè¯¦å°½æ€§æ£€æŸ¥ã€‚ä¸Šä¾‹çš„ç¼–è¯‘é”™è¯¯å‘Šè¯‰æˆ‘ä»¬ç¼ºå°‘äº†å¯¹ <code>null</code> case çš„å¤„ç†ã€‚å¸¸è§çš„å¯ç©·ä¸¾ç±»å‹è¿˜æœ‰<code>bool</code>ã€æšä¸¾ï¼ˆEnumï¼‰å’Œ<a href="https://dart.dev/language/class-modifiers#sealed">å¯†å°ç±»ï¼ˆsealed classï¼‰</a>ã€‚</p>
<p>ä¸‹ä¾‹æ¼”ç¤ºäº†é’ˆå¯¹æšä¸¾çš„è¯¦å°½æ€§æ£€æŸ¥ã€‚</p>
<pre><code class="language-dart">// ch0201_8.dart
void main() {
  var x = 1.0, y = 2.0;
  var op = Op.plus;
  var r = switch (op) {
    Op.plus =&gt; x + y,
    // Op.minus =&gt; x - y,
  };
  // Error: The type 'Op' is not exhaustively matched by the switch cases since it doesn't match 'Op.minus'.
  //  - 'Op' is from 'bin/ch02/ch0201_8.dart'.
  // Try adding a wildcard pattern or cases that match 'Op.minus'.
  //   var r = switch (op) {
  //                   ^
}

enum Op { plus, minus }
</code></pre>
<p>ä¸‹ä¾‹æ¼”ç¤ºäº†é’ˆå¯¹å¯†å°ç±»çš„è¯¦å°½æ€§æ£€æŸ¥ã€‚ä¸€ä¸ª<a href="https://dart.dev/language/class-modifiers#sealed">å¯†å°ç±»</a>çš„å­ç±»æ˜¯æœ‰é™ä¸ªçš„ï¼Œ<code>switch</code>è¯­å¥æˆ–è¡¨è¾¾å¼å°†å¯¹å…¶å­ç±»è¿›è¡Œè¯¦å°½æ€§æ£€æŸ¥ã€‚</p>
<pre><code class="language-dart">// ch0201_9.dart
void main() {
  Op op = Plus(1.0, 2.0);
  var r = switch (op) {
    Plus(:double x, :double y) =&gt; x + y,
    // Minus(:double x, :double y) =&gt; x - y,
  };
  // Error: The type 'Op' is not exhaustively matched by the switch cases since it doesn't match 'Minus()'.
  //  - 'Op' is from 'bin/ch02/ch0201_9.dart'.
  // Try adding a wildcard pattern or cases that match 'Minus()'.
  //   var r = switch (op) {
  //                   ^
}

sealed class Op {
  final double x;
  final double y;

  Op(this.x, this.y);
}

class Plus extends Op {
  Plus(super.x, super.y);
}

class Minus extends Op {
  Minus(super.x, super.y);
}
</code></pre>
<p>ç¬¬4-5ç« å°†è¯¦ç»†è®¨è®ºç±»çš„ç›¸å…³æ¦‚å¿µã€‚</p>
<h2 id="å®ˆæŠ¤å­å¥"><a class="header" href="#å®ˆæŠ¤å­å¥">å®ˆæŠ¤å­å¥</a></h2>
<p>å®ˆæŠ¤å­å¥ï¼ˆguard clauseï¼‰æ˜¯å¯é€‰çš„ï¼Œå®ƒå‡ºç°åœ¨caseå­å¥ä¹‹åï¼Œä½¿ç”¨å…³é”®å­— <code>when</code>ã€‚å®ˆæŠ¤å­å¥å¯ä»¥å‡ºç°åœ¨ if-case ä»¥åŠ <code>switch</code> è¯­å¥å’Œè¡¨è¾¾å¼ä¸­ã€‚</p>
<pre><code class="language-dart">// ch0201_a.dart
void main() {
  var year = 2025;
  bool showAges = true;
  switch (year) {
    case &gt;= 2000 when showAges &amp;&amp; year &lt; 2010:
      print('2000s');
    case &gt;= 2010 when showAges &amp;&amp; year &lt; 2020:
      print('2010s');
    case &gt;= 2020 when showAges &amp;&amp; year &lt; 2030:
      print('2020s');
  }

  var dat = [3, 4];
  if (dat case [int x, int y] when x &lt; y) {
    print('x=$x y=$y');
  }
}
</code></pre>
<h2 id="å‚è€ƒèµ„æ–™-6"><a class="header" href="#å‚è€ƒèµ„æ–™-6">å‚è€ƒèµ„æ–™</a></h2>
<ul>
<li><a href="https://dart.dev/language/branches">https://dart.dev/language/branches</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="for-ä¸-while-å¾ªç¯"><a class="header" href="#for-ä¸-while-å¾ªç¯">for ä¸ while å¾ªç¯</a></h1>
<p>æ§åˆ¶ç»“æ„é‡Œçš„å¾ªç¯æŒ‡çš„æ˜¯é‡å¤æ‰§è¡Œä¸€æ®µä»£ç ï¼Œç›´åˆ°å¾ªç¯æ¡ä»¶ä¸å†æ»¡è¶³ï¼Œæˆ–ä½¿ç”¨<code>break</code>å…³é”®å­—è·³å‡ºå¾ªç¯ã€‚Dartæ§åˆ¶ç»“æ„é‡Œçš„å¾ªç¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>ç»å…¸ <code>for</code> å¾ªç¯</li>
<li><code>for-in</code> å¾ªç¯</li>
<li><code>while</code> å¾ªç¯</li>
<li><code>do-while</code>å¾ªç¯</li>
</ul>
<h2 id="for-å¾ªç¯"><a class="header" href="#for-å¾ªç¯"><code>for</code> å¾ªç¯</a></h2>
<p>ä¸‹é¢è¿™æ®µä»£ç ä½¿ç”¨ç»å…¸çš„<code>for</code>å¾ªç¯æ‰“å°æ•°å­—0åˆ°9ã€‚</p>
<pre><code class="language-dart">// ch0202_1.dart
void main() {
  for (var i = 0; i &lt; 10; i++) {
    print('$i');
  }
}
</code></pre>
<p>ç»å…¸<code>for</code>å¾ªç¯çš„è¯­æ³•:</p>
<pre><code class="language-dart">  for (åˆå§‹åŒ–åˆ—è¡¨; å¾ªç¯æ¡ä»¶; åç½®æ“ä½œ) {
    å¾ªç¯ä½“
  }
</code></pre>
<pre class="mermaid">flowchart TD
    A([åˆå§‹åŒ–åˆ—è¡¨]) --&gt; B{å¾ªç¯æ¡ä»¶}
    B --&gt;|true| C(å¾ªç¯ä½“)
    C --&gt;|continue| D(åç½®æ“ä½œ)
    D --&gt; B
    B ----&gt;|false| E([End])
    C ----&gt;|break| E
</pre>
<p>åç½®æ“ä½œå³æ‰§è¡Œå®Œå¾ªç¯ä½“ä¹‹åçš„æ“ä½œã€‚åˆå§‹åŒ–åˆ—è¡¨ã€ å¾ªç¯æ¡ä»¶ã€åç½®æ“ä½œï¼Œè¿™ä¸‰éƒ¨åˆ†ç”¨åˆ†å·ï¼ˆ<code>;</code>ï¼‰åˆ†å‰²ï¼Œä¸”æ¯ä¸€éƒ¨åˆ†éƒ½å¯ä»¥çœç•¥ï¼ˆä½†å¿…é¡»ä¿ç•™åˆ†å·ï¼‰ã€‚å¦‚æœå¾ªç¯ä½“åªæœ‰ä¸€æ¡è¯­å¥ï¼ŒåŒ…å›´å¾ªç¯ä½“çš„é‚£å¯¹èŠ±æ‹¬å·ï¼ˆ<code>{}</code>ï¼‰ å¯ä»¥çœç•¥ï¼Œä½†ä¸å»ºè®®è¿™ä¹ˆåšã€‚</p>
<p>ä¸‹é¢è¿™æ®µä»£ç å°†æ‰“å°ä¹ä¹ä¹˜æ³•è¡¨ï¼š</p>
<pre><code class="language-dart">// ch0202_2.dart
import 'dart:io';

import 'package:sprintf/sprintf.dart';

void main() {
  for (var i = 1; i &lt; 10; i++) {
    for (var j = 1; j &lt; 10; j++) {
      stdout.write(sprintf('%2d ', [i * j]));
    }
    stdout.write('\n');
  }
}
</code></pre>
<p>ä¸‹é¢è¿™æ®µä»£ç å°†æ•°å­—10åˆ†è§£ä¸º2ä¸ªéè´Ÿæ•´æ•°ä¹‹å’Œï¼š</p>
<pre><code class="language-dart">// ch0202_3.dart
void main() {
  for (var i = 0, j = 10; i &lt;= j; i++, j--) {
    print('$i + $j = 10');
  }
  // Output:
  // 0 + 10 = 10
  // 1 + 9 = 10
  // 2 + 8 = 10
  // 3 + 7 = 10
  // 4 + 6 = 10
  // 5 + 5 = 10
}
</code></pre>
<p>ä¸‹é¢è¿™æ®µä»£ç çš„åŠŸèƒ½ä¸€æ ·ï¼Œä½†çœç•¥äº†å¾ªç¯æ¡ä»¶ <code>i &lt;= j</code>ï¼Œ æ”¹ç”¨<code>break</code>è¯­å¥æ¥è·³å‡ºå¾ªç¯ï¼š</p>
<pre><code class="language-dart">// ch0202_4.dart
void main() {
  for (var i = 0, j = 10; ; i++, j--) {
    if (i &gt; j) break;
    print('$i + $j = 10');
  }
}
</code></pre>
<h3 id="for-in"><a class="header" href="#for-in"><code>for-in</code></a></h3>
<p>ä½¿ç”¨ç»å…¸çš„<code>for</code>è¯­å¥æ‰“å°å­—æ¯A-Eï¼š</p>
<pre><code class="language-dart">// ch0202_5.dart
import 'dart:io';

void main() {
  var letters = ['A', 'B', 'C', 'D', 'E'];
  for (var i = 0; i &lt; letters.length; i++) {
    stdout.write('${letters[i]} '); // Output: A B C D E
  }
}
</code></pre>
<p>ä½¿ç”¨ for-inè¯­å¥æ”¹å†™ä¸Šè¿°ä»£ç ï¼Œæ›´ä¸ºç®€æ´ï¼š</p>
<pre><code class="language-dart">// ch0202_6.dart
import 'dart:io';

void main() {
  var letters = ['A', 'B', 'C', 'D', 'E'];
  for (var letter in letters) {
    stdout.write('$letter '); // Output: A B C D E
  }
}
</code></pre>
<h2 id="while-å’Œ-do-while"><a class="header" href="#while-å’Œ-do-while"><code>while</code> å’Œ <code>do-while</code></a></h2>
<p><code>while</code> å¾ªç¯åœ¨å¾ªç¯ä½“ä¹‹å‰æ£€æŸ¥å¾ªç¯æ¡ä»¶ï¼Œè€Œ<code>do-while</code>åˆ™æ˜¯åœ¨å¾ªç¯æä¹‹åæ£€æŸ¥ã€‚</p>
<p><strong><em>while</em></strong> å¾ªç¯ï¼š</p>
<pre class="mermaid">flowchart TD
    B{å¾ªç¯æ¡ä»¶}--&gt;|true| C(å¾ªç¯ä½“)
    C --&gt;|continue| B
    C --&gt;|break|E
    B ----&gt;|false| E([End])
</pre>
<p><strong><em>do-while</em></strong> å¾ªç¯ï¼š</p>
<pre class="mermaid">flowchart TD
    C(å¾ªç¯ä½“) --&gt;|continue| B{å¾ªç¯æ¡ä»¶}
    B --&gt;|true| C
    C --&gt;|break|E
    B ----&gt;|false| E([End])

</pre>
<p>ä¸‹é¢è¿™æ®µä»£ç å…ˆæ‰“å°æ•°å­—0åˆ°9ï¼Œå†æ‰“å°æ•°å­—10åˆ°1ï¼ˆé€’å‡ï¼‰ã€‚</p>
<pre><code class="language-dart">//ch0102_7.dart
void main() {
  // print 0,1,...,9
  var x = 0;
  while (x &lt; 10) {
    print(x++);
  }

  // print 10,9,...,1
  do {
    print(x--);
  } while (x &gt; 0);
}
</code></pre>
<h2 id="break-å’Œ-continue"><a class="header" href="#break-å’Œ-continue"><code>break</code> å’Œ <code>continue</code></a></h2>
<p><code>break</code>ç”¨äºè·³å‡ºå½“å‰å¾ªç¯ï¼Œ<code>continue</code>ç”¨äºè·³è½¬è‡³ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚ä¸‹é¢è¿™æ®µä»£ç ä½¿ç”¨<code>for</code>å¾ªç¯ï¼Œæ‰“å°1åˆ°9ä¹‹é—´çš„å¥‡æ•°ã€‚</p>
<pre><code class="language-dart">// ch0202_8.dart
void main() {
  for (var x = 1; ; x++) {
    if (x == 10) break;
    if (x % 2 == 0) continue;
    print(x);
  }
}
</code></pre>
<h2 id="æ ‡ç­¾"><a class="header" href="#æ ‡ç­¾">æ ‡ç­¾</a></h2>
<p><code>break</code> å’Œ <code>continue</code> ä»…å¯¹æ‰€åœ¨çš„ï¼ˆå†…å±‚ï¼‰å¾ªç¯èµ·ä½œç”¨ã€‚å¦‚æœè¦è·³å‡ºï¼ˆ<code>break</code>ï¼‰å¤–å±‚å¾ªç¯ï¼Œæˆ–è·³è½¬è‡³ï¼ˆ<code>continue</code>ï¼‰å¤–å±‚å¾ªç¯çš„ä¸‹ä¸€æ¬¡è¿­ä»£ï¼Œé¡»å€ŸåŠ©æ ‡ç­¾ã€‚æ ‡ç­¾æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œåè·Ÿå†’å·ï¼ˆ<code>labelName:</code>ï¼‰ï¼›å°†æ ‡ç­¾æ”¾åœ¨è¯­å¥ä¹‹å‰ä»¥åˆ›å»ºå¸¦æ ‡ç­¾çš„è¯­å¥ã€‚</p>
<pre><code class="language-dart">// ch0202_9.dart

import 'dart:io';

void main() {
  outerLoop:
  for (var i = 0; i &lt; 10; i++, print('')) {
    for (var j = 0; j &lt; 10; j++) {
      if (j == 4) continue outerLoop;
      stdout.write(' ' * (i &gt; 0 ? 1 : 2));
      stdout.write(10 * i + j);
    }
  }
}
</code></pre>
<p>æ­¤ä¾‹ä¸­çš„ <code>continue outerLoop;</code> å°±ç›¸å½“äº <code>break</code>ã€‚</p>
<h2 id="å°æµ‹éªŒ-1"><a class="header" href="#å°æµ‹éªŒ-1">å°æµ‹éªŒ</a></h2>
<ul>
<li>åˆ†åˆ«ä½¿ç”¨ <code>while</code> å’Œ<code>do-while</code> æ”¹å†™ <code>ch0202_8.dart</code>ã€‚</li>
<li>ç¤ºä¾‹ <code>ch0202_9.dart</code> ä¸­ï¼Œå¦‚æœå°†  <code>continue outerLoop;</code> æ”¹ä¸º  <code>break outerLoop;</code> ç¨‹åºçš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ–­è¨€"><a class="header" href="#æ–­è¨€">æ–­è¨€</a></h1>
<p>æ–·è¨€ï¼ˆAssertionï¼‰æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å¼€å‘å·¥å…·ã€‚ä¸‹é¢çš„ä»£ç åœ¨è°ƒè¯•æ¨¡å¼ï¼ˆdebug modeï¼‰ä¸‹è¿è¡Œï¼Œå°†äº§ç”Ÿä¸€ä¸ªæ–­è¨€é”™è¯¯ï¼ˆAssertionErrorï¼‰ã€‚</p>
<pre><code class="language-dart">// ch0203_1.dart
void main() {
  var str = '';
  assert(str.isNotEmpty, "str cannot be empty");
  // do something else
}
</code></pre>
<p><code>assert</code> æ¥æ”¶2ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯å¸ƒå°”è¡¨è¾¾å¼ï¼Œ ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œä¹ƒé”™è¯¯æç¤ºä¿¡æ¯ï¼›åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œå½“ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ä¸º<code>false</code>æ—¶ï¼Œå°†å‡ºç°æ–­è¨€é”™è¯¯ã€‚</p>
<p>æ–­è¨€ä»…åœ¨è°ƒè¯•æ¨¡å¼ï¼ˆdebug modeï¼‰ä¸‹èµ·ä½œç”¨ã€‚å¯¹äºå‘å¸ƒæ¨¡å¼ï¼ˆrelease modeï¼‰ï¼Œé™¤éåœ¨ç¼–è¯‘æ—¶æ˜¾ç¤ºå¯ç”¨äº†æ–­è¨€ï¼Œ æ‰€æœ‰çš„<code>assert</code> è¯­å¥éƒ½å°†è¢«å¿½ç•¥ï¼Œä»è€Œä¸ä¼šå¹²é¢„ç¨‹åºçš„æ‰§è¡Œæµç¨‹ã€‚åœ¨Dartçš„ç›¸å…³å‘½ä»¤ä¸­ï¼ˆä¾‹å¦‚ <code>dart run</code>ã€<code>dart compile exe</code>ï¼‰ï¼Œé€šè¿‡<code>--enable-asserts</code> å‚æ•°å¯ç”¨æ–­è¨€ï¼Œå¦‚</p>
<pre><code class="language-sh">dart run --enable-asserts bin/ch02/ch0203_1.dart
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å‡½æ•°-function"><a class="header" href="#å‡½æ•°-function">å‡½æ•° ï¼ˆFunctionï¼‰</a></h1>
<p>æœ¬ç« èŠ‚å°†ä»‹ç»å‡½æ•°çš„åŸºæœ¬æ¦‚å¿µï¼Œä½ç½®å‚æ•°ã€å‘½åå‚æ•°ã€å‡½æ•°ç±»å‹ã€åŒ¿åå‡½æ•°ç­‰å†…å®¹ï¼Œå°†åœ¨åç»­ç« èŠ‚é™†ç»­ä»‹ç»ã€‚æˆ‘ä»¬å·²ç»å¤šæ¬¡è§è¿‡<code>main</code>å‡½æ•°ï¼Œå®ƒæ˜¯ç¨‹åºçš„å…¥å£ã€‚æŠ½è±¡åœ°è¯´ï¼Œå‡½æ•°å¯¹è¾“å…¥æ•°æ®ï¼ˆè¾“å…¥å‚æ•°åˆ—è¡¨ï¼‰è¿›è¡Œå¤„ç†ï¼Œç„¶åè¾“å‡ºå…¶å¤„ç†ç»“æœï¼ˆè¿”å›å€¼ï¼‰ã€‚</p>
<pre class="mermaid">flowchart LR
   a(( )) --&gt;|è¾“å…¥å‚æ•°| B(å¤„ç†ï¼ˆå‡½æ•°ä½“ï¼‰)
   B --&gt; |è¿”å›å€¼|c(( ))
</pre>
<p>å…ˆæ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ç¨‹åºï¼Œè®¡ç®—å¹³é¢ä¸Šä¸¤ç‚¹ä¹‹é—´çš„æ¬§å¼è·ç¦»:</p>
<p>\( \sqrt{(x_1-x_2)^2 + (y_1-y_2)^2} \)</p>
<pre><code class="language-dart">//ch0204_1.dart
import 'dart:math';

typedef Point = ({double x, double y}); // 1

void main() {
  var a = (x: 1, y: 2), b = (x: 3, y: 4); // 2
  var distance = sqrt(
    (a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y),
  ); // 3
  print('$a -&gt; $b: $distance'); // 3a

  var c = (x: 6, y: 5); //4
  distance = sqrt((a.x - c.x) * (a.x - c.x) + (a.y - c.y) * (a.y - c.y)); //5
  print('$a -&gt; $c: $distance'); // 5a
}

</code></pre>
<ol>
<li>ä½¿ç”¨<code>typedef</code>åˆ›å»ºä¸€ä¸ªç±»å‹åˆ«å<code>Point</code>ï¼Œå®ƒä»£è¡¨äº†äºŒç»´å¹³é¢é‡Œçš„ä¸€ä¸ªç‚¹;</li>
<li>å£°æ˜å¹¶åˆå§‹åŒ–2ä¸ª<code>Point</code>ï¼Œ<code>a</code> å’Œ <code>b</code>;</li>
<li>è®¡ç®—<code>a</code>ã€<code>b</code>é—´çš„æ¬§å¼è·ç¦»ï¼Œéšåæ‰“å° (3a)ï¼›</li>
<li>å£°æ˜å¹¶åˆå§‹åŒ–<code>Point c</code>;</li>
<li>è®¡ç®—<code>a</code>ã€<code>c</code>é—´çš„æ¬§å¼è·ç¦»ï¼Œéšåæ‰“å° (5a)ï¼›</li>
</ol>
<p>å°†è®¡ç®—æ¬§å¼è·ç¦»çš„ä»£ç ï¼ŒæŠ½å–æˆä¸€ä¸ªå‡½æ•° <code>distance</code>ï¼Œç„¶åæ”¹å†™ä¸Šä¾‹ï¼š</p>
<pre><code class="language-dart">//ch0204_2.dart
import 'dart:math';

typedef Point = ({double x, double y}); 

void main() {
  Point a = (x: 1, y: 2), b = (x: 3, y: 4);
  print('$a -&gt; $b: ${distance(a, b)}'); // 2

  Point c = (x: 6, y: 5);
  print('$a -&gt; $c: ${distance(a, c)}'); // 3
}

double distance(Point a, Point b) { // 1
  final dx = a.x - b.x;
  final dy = a.y - b.y;
  return sqrt(dx * dx + dy * dy);
}
</code></pre>
<ol>
<li>å®šä¹‰å‡½æ•°<code>distance</code>ï¼Œå®ƒè®¡ç®—å¹³é¢ä¸Šä¸¤ç‚¹é—´çš„æ¬§å¼è·ç¦»;</li>
<li>è°ƒç”¨<code>distance</code>è®¡ç®—<code>a</code>ã€<code>b</code>é—´çš„æ¬§å¼è·ç¦»;</li>
<li>è°ƒç”¨<code>distance</code>è®¡ç®—<code>a</code>ã€<code>c</code>é—´çš„æ¬§å¼è·ç¦»ã€‚</li>
</ol>
<p>é‡æ„ï¼ˆæ”¹å†™ï¼‰åçš„ç¨‹åºï¼ŒåŠŸèƒ½ä¸å˜ï¼Œä½†æ›´ä¸ºç®€æ´æ˜“è¯»ï¼Œæ¶ˆé™¤äº†é‡å¤ä»£ç ï¼ˆè®¡ç®—æ¬§å¼è·ç¦»ï¼‰ï¼Œå¹¶å¯å¯¹è¯¥ä»£ç å—ï¼ˆ<code>distance</code> å‡½æ•°ï¼‰è¿›è¡Œå•å…ƒæµ‹è¯•ï¼ˆç¬¬8ç« å†…å®¹ï¼‰ã€‚</p>
<h2 id="å‘½åå‡½æ•°"><a class="header" href="#å‘½åå‡½æ•°">å‘½åå‡½æ•°</a></h2>
<p>é€šå¸¸ï¼Œåˆ›å»ºä¸€ä¸ªå‘½åå‡½æ•°çš„è¯­æ³•ä¸º:</p>
<pre><code class="language-dart">è¿”å›å€¼çš„ç±»å‹ å‡½æ•°åç§°(è¾“å…¥å‚æ•°åˆ—è¡¨){
   å‡½æ•°ä½“
}
</code></pre>
<p>å¯¹äºä¸Šè¿° <code>distance</code>å‡½æ•°ï¼š</p>
<ul>
<li>è¿”å›å€¼çš„ç±»å‹ï¼š <code>double</code>;</li>
<li>å‡½æ•°åç§°ï¼š<code>distance</code></li>
<li>è¾“å…¥å‚æ•°åˆ—è¡¨ï¼š<code>Point a, Point b</code>
<ul>
<li><code>Point a</code> è¡¨ç¤ºè¾“å…¥å‚æ•° <code>a</code>çš„æ•°æ®ç±»å‹ä¸º<code>Point</code>;</li>
</ul>
</li>
<li>èŠ±æ‹¬å·ï¼ˆ<code>{}</code>ï¼‰å†…çš„ä»£ç ä¸ºå‡½æ•°ä½“;</li>
<li>ä½¿ç”¨<code>return</code>è¿”å›å‡½æ•°çš„è¿”å›å€¼ã€‚</li>
</ul>
<p>å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œç”¨<code>void</code>è¡¨ç¤ºï¼š</p>
<pre><code class="language-dart">void printMe(String me) {
  print(me);
  // return;
}  
</code></pre>
<p>åƒæ­¤ä¾‹ä¸­çš„<code>return;</code>ï¼Œå®ƒä½äºå‡½æ•°ä½“çš„æœ€åä¸€è¡Œï¼Œé€šå¸¸äºˆä»¥çœç•¥ã€‚</p>
<p>ä¸‹é¢ä¸¤ç‚¹é€šå¸¸ä¸è¢«é¼“åŠ±ï¼Œé™¤éä½ æœ‰å……åˆ†çš„ç†ç”±ï¼Œå› ä¸ºå®ƒè®©Dartçš„é™æ€ç±»å‹åˆ†æå¤±æ•ˆï¼š</p>
<ul>
<li>å‘½åå‡½æ•°çš„è¿”å›å€¼çš„ç±»å‹ï¼Œå¦‚æœä¸å†™å‡ºæ¥ï¼Œå°±è¡¨ç¤ºå®ƒæ˜¯ <code>dynamic</code> ï¼ˆè€Œä¸æ˜¯<code>void</code>ï¼‰;</li>
<li>ç±»ä¼¼åœ°ï¼Œå‘½åå‡½æ•°çš„è¾“å…¥å‚æ•°çš„ç±»å‹ï¼Œå¦‚æœä¸å†™æ˜ï¼Œå°±ä»£è¡¨<code>dynamic</code> ã€‚</li>
</ul>
<h2 id="è¿”å›å€¼"><a class="header" href="#è¿”å›å€¼">è¿”å›å€¼</a></h2>
<p>å¦‚æœæ²¡æœ‰æŒ‡å®šè¿”å›å€¼ï¼Œåˆ™è¯­å¥ <code>return null;</code> ä¼šè¢«éšå¼é™„åŠ åˆ°å‡½æ•°ä½“ä¸­ï¼Œå‡½æ•°å°†è¿”å›<code>null</code>ã€‚</p>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°éœ€è¦è¿”å›å¤šä¸ªå€¼ï¼Œé€šå¸¸è¿”å›ä¸€ä¸ªè®°å½•ï¼ˆRecordï¼‰ç±»å‹ã€‚</p>
<pre><code class="language-dart">// ch0204_3.dart
(bool ok, String) foo() {
  // Do something
  return (true, 'done');
}
</code></pre>
<h2 id="arrow-è¯­æ³•"><a class="header" href="#arrow-è¯­æ³•">arrow è¯­æ³•</a></h2>
<p>å¦‚æœå‡½æ•°ä½“åªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥ä½¿ç”¨arrowï¼ˆç®­å¤´ï¼‰è¯­æ³•æ¥ç®€åŒ–ã€‚ä¾‹å¦‚</p>
<pre><code class="language-dart">int increase(int value) {
  return value + 1;
}
</code></pre>
<p>ä½¿ç”¨arrowè¯­æ³•ç®€åŒ–ä¸ºï¼š</p>
<pre><code class="language-dart">int increase(int value) =&gt; value + 1;
</code></pre>
<h2 id="getter-ä¸-setter"><a class="header" href="#getter-ä¸-setter">getter ä¸ setter</a></h2>
<p>getter ä¸ settter æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œåˆ†åˆ«ä½¿ç”¨ <code>get</code> ä¸  <code>set</code> å…³é”®å­—å®šä¹‰ ã€‚</p>
<pre><code class="language-dart">// ch0204_5.dart
var _foo = 1;

int get foo =&gt; _foo;

set foo(int value) {
  if (value &gt; 0) {
    _foo = value;
  }
}

void main() {
  print('foo=$foo'); // Output: foo=1
  foo = 2;
  foo = -1;
  print('foo=$foo'); // Output: foo=2
}

</code></pre>
<p>æ­¤ä¾‹ä¸­çš„<code>foo</code>åœ¨ä½¿ç”¨è€…çœ‹æ¥ï¼Œå°±åƒä¸€ä¸ªå˜é‡ï¼Œä½†<code>foo</code> setter ç»™ç§æœ‰å˜é‡ <code>_foo</code>æä¾›äº†é¢å¤–çš„ä¿æŠ¤ï¼Œå®ƒåªå°†æ­£æ•°èµ‹å€¼ç»™<code>_foo</code>ã€‚</p>
<h2 id="mainå‡½æ•°"><a class="header" href="#mainå‡½æ•°"><code>main</code>å‡½æ•°</a></h2>
<p>ç¨‹åºçš„å…¥å£<code>main</code>å‡½æ•°ï¼Œè¿”å›<code>void</code>ï¼Œæœ‰ä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œå…¶ç±»å‹ä¸º<code>List&lt;String&gt;</code>ï¼Œç”¨äºå‘½ä»¤è¡Œç¨‹åºä¸­ã€‚</p>
<pre><code class="language-dart">// ch0204_4.dart
void main(List&lt;String&gt; args) {
  for (var arg in args) {
    print(arg);
  }
}
</code></pre>
<p>æ­¤ç¨‹åºæ‰“å°å‘½ä»¤è¡Œå‚æ•°ï¼Œä¸€ä¸ªå‚æ•°ä¸€è¡Œã€‚ä½¿ç”¨<code>dart run</code>è¿è¡Œå®ƒ:</p>
<pre><code class="language-sh">$ dart run bin/ch02/ch0204_4.dart hello dart
hello
dart
</code></pre>
<blockquote>
<p><strong><em>NOTE:</em></strong> å¯ä½¿ç”¨ <a href="https://pub.dev/packages/args">args åº“</a>æ¥å®šä¹‰å’Œè§£æå‘½ä»¤è¡Œå‚æ•°ã€‚</p>
</blockquote>
<h2 id="å¤–éƒ¨å‡½æ•°external-function"><a class="header" href="#å¤–éƒ¨å‡½æ•°external-function">å¤–éƒ¨å‡½æ•°ï¼ˆexternal functionï¼‰</a></h2>
<p>å¤–éƒ¨å‡½æ•°çš„å‡½æ•°ä½“ï¼ˆå®ç°ï¼‰ä¸å‡½æ•°å£°æ˜æ˜¯åˆ†ç¦»çš„ã€‚å¤–éƒ¨å‡½æ•°çš„å®ç°å¯ä»¥æ¥è‡ªå¦ä¸€ä¸ªDartåº“ï¼Œæ›´å¸¸è§çš„æ˜¯ï¼Œæ¥è‡ªå…¶å®ƒç¼–ç¨‹è¯­è¨€ï¼ˆä¾‹å¦‚Cï¼‰ã€‚ä½¿ç”¨ <code>external</code> å£°æ˜ä¸€ä¸ªå¤–éƒ¨å‡½æ•°ï¼Œä¾‹å¦‚ <code>Object</code>ç±»ä¸­çš„ <code>toString()</code>  æ–¹æ³•:</p>
<pre><code class="language-dart">  external String toString();
</code></pre>
<h2 id="å°æµ‹éªŒ-2"><a class="header" href="#å°æµ‹éªŒ-2">å°æµ‹éªŒ</a></h2>
<p>ä¸‹ä¾‹ä¸­çš„<code>printMe2</code>çš„è¿”å›ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿå®é™…ä¸Šå®ƒè¿”å›äº†ä»€ä¹ˆï¼Ÿå‚æ•°<code>me</code>çš„ç±»å‹åˆæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<pre><code class="language-dart">printMe2(me) {
  print(me);
}
</code></pre>
<h2 id="å‚è€ƒèµ„æ–™-7"><a class="header" href="#å‚è€ƒèµ„æ–™-7">å‚è€ƒèµ„æ–™</a></h2>
<ul>
<li><a href="https://dart.dev/language/functions">https://dart.dev/language/functions</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å‡½æ•°å‚æ•°"><a class="header" href="#å‡½æ•°å‚æ•°">å‡½æ•°å‚æ•°</a></h1>
<p>å‡½æ•°å‚æ•°æœ‰<a href="ch02/dartpl0205.html#%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0">ä½ç½®å‚æ•°</a>å’Œ<a href="ch02/dartpl0205.html#%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0">å‘½åå‚æ•°</a>ä¹‹åˆ†ï¼Œå¦å¤–è¿˜æœ‰<a href="ch02/dartpl0205.html#%E5%8F%AF%E9%80%89%E5%8F%82%E6%95%B0">å¯é€‰å‚æ•°</a>ã€‚</p>
<h2 id="ä½ç½®å‚æ•°"><a class="header" href="#ä½ç½®å‚æ•°">ä½ç½®å‚æ•°</a></h2>
<p>ä¸Šä¸€èŠ‚ä¸­çš„ç¤ºä¾‹å‡½æ•°ï¼Œåªä½¿ç”¨äº†ä½ç½®å‚æ•°ï¼Œè¿™äº›å‚æ•°åœ¨å‚æ•°åˆ—è¡¨ä¸­çš„é¡ºåºè‡³å…³é‡è¦ã€‚</p>
<pre><code class="language-dart">// ch0205_1.dart
void main(List&lt;String&gt; args) {
  print(power(2, 5)); // 2 Output: 32
  print(power(5, 2)); // 3 Output: 25
}

int power(int base, int exponent) { // 1
  int result = 1;
  for (int i = 0; i &lt; exponent; i++) {
    result *= base;
  }
  return result;
}
</code></pre>
<ol>
<li>åˆ›å»ºå‡½æ•°<code>power</code>ï¼Œ è¿”å› <code>base</code>çš„<code>exponent</code>æ¬¡æ–¹;</li>
<li>æ‰“å° 2 çš„ 5 æ¬¡æ–¹ï¼ˆ32ï¼‰;</li>
<li>æ‰“å° 5 çš„ 2 æ¬¡æ–¹ï¼ˆ25ï¼‰ã€‚</li>
</ol>
<p>å¯è§åœ¨è°ƒç”¨<code>power</code>å‡½æ•°æ—¶ï¼Œå¿…é¡»æ³¨æ„å‚æ•°çš„é¡ºåºã€‚</p>
<h2 id="å‘½åå‚æ•°"><a class="header" href="#å‘½åå‚æ•°">å‘½åå‚æ•°</a></h2>
<p>å‘½åå‚æ•°ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æœ‰åå­—çš„å‚æ•°ã€‚ä¸‹é¢ä½¿ç”¨å‘½åå‚æ•°æ¥åˆ›å»º<code>power</code>å‡½æ•°ï¼š</p>
<pre><code class="language-dart">// ch0205_2.dart
void main() {
  print(power(base: 2, exponent: 5)); // 2 Output: 32
  print(power(exponent: 2, base: 5)); // 3 Output: 25
}

power({required int base, required int exponent}) { // 1
  // ... (omited for brevity)
}
</code></pre>
<p>è¯­æ³•æ–¹é¢ï¼Œ</p>
<ul>
<li>å‘½åå‚æ•°è¢«ä¸€å¯¹èŠ±æ‹¬å·ï¼ˆ<code>{}</code>ï¼‰åŒ…å›´ï¼›</li>
<li><code>required</code> å…³é”®å­—ï¼Œè¡¨ç¤ºå‡½æ•°çš„è°ƒç”¨æ–¹å¿…é¡»ä¼ é€’è¯¥å‚æ•°ï¼›</li>
<li>è°ƒç”¨å‡½æ•°æ—¶ï¼Œé‡‡ç”¨<code>å‚æ•°å:å‚æ•°å€¼</code>çš„å½¢å¼ï¼ˆå¦‚<code>base: 2</code>ï¼‰ï¼Œç»™å‘½åå‚æ•°ä¼ å€¼ ã€‚</li>
</ul>
<h2 id="å¯é€‰å‚æ•°"><a class="header" href="#å¯é€‰å‚æ•°">å¯é€‰å‚æ•°</a></h2>
<p>å¯¹äºå‘½åå‚æ•°ï¼Œæ— <code>required</code>ä¿®é¥°æ—¶ï¼Œè¡¨ç¤ºæ˜¯å¯é€‰çš„ã€‚</p>
<p>æ— è®ºæ˜¯ä½ç½®å‚æ•°è¿˜æ˜¯å‘½åå‚æ•°ï¼š</p>
<ul>
<li>å¯¹<code>nullable</code>ï¼ˆå¯ç©ºï¼‰å‚æ•°ï¼Œå¯é€‰å‚æ•°çš„é»˜è®¤å€¼æ˜¯<code>null</code>;</li>
<li>å¯¹<code>non-nullable</code> ï¼ˆä¸å¯ç©ºï¼‰å‚æ•°ï¼Œå¿…é¡»æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ï¼Œæ‰èƒ½æˆä¸ºå¯é€‰å‚æ•°;</li>
<li>åœ¨å‚æ•°ååä½¿ç”¨ <code>=</code> æ¥æŒ‡å®šé»˜è®¤å€¼ã€‚</li>
</ul>
<pre><code class="language-dart">// ch0205_3.dart
void main() {
  print(increase(5)); // Output: 6
  print(increase(5, increment: 2)); // Output: 7

  print(descrease(5)); // Output: 4
  print(descrease(5, 2)); // Output: 3
}

int increase(int value, {int increment = 1}) =&gt; value + increment;

int descrease(int value, [int? decrement]) =&gt; value - (decrement ?? 1);
</code></pre>
<p>å¯é€‰çš„ä½ç½®å‚æ•°ï¼ˆå¯ä»¥æ˜¯å¤šä¸ªï¼‰ï¼Œå¿…é¡»æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åï¼Œæ”¾åœ¨ä¸€å¯¹ä¸­æ‹¬å·é‡Œï¼ˆ<code>[ ]</code>ï¼‰ã€‚</p>
<h2 id="æ··åˆä½¿ç”¨ä½ç½®å‚æ•°ä¸å‘½åå‚æ•°"><a class="header" href="#æ··åˆä½¿ç”¨ä½ç½®å‚æ•°ä¸å‘½åå‚æ•°">æ··åˆä½¿ç”¨ä½ç½®å‚æ•°ä¸å‘½åå‚æ•°</a></h2>
<p>ä½ç½®å‚æ•°å’Œå‘½åå‚æ•°å¯ä»¥æ··åˆä½¿ç”¨ï¼Œå¦‚ä¸Šä¾‹ä¸­çš„<code>int increase(int value, {int increment = 1})</code>ï¼Œä½†æ··åˆä½¿ç”¨æ—¶ï¼š</p>
<ul>
<li>ä½ç½®å‚æ•°å¿…é¡»åœ¨å‚æ•°åˆ—è¡¨çš„å¼€å¤´ï¼ˆå³å…ˆå®šä¹‰ä½ç½®å‚æ•°ï¼‰;</li>
<li>æ­¤æ—¶ä¸èƒ½å®šä¹‰å¯é€‰çš„ä½ç½®å‚æ•°ã€‚</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å‡½æ•°ç±»å‹åŒ¿åå‡½æ•°ä¸é—­åŒ…"><a class="header" href="#å‡½æ•°ç±»å‹åŒ¿åå‡½æ•°ä¸é—­åŒ…">å‡½æ•°ç±»å‹ã€åŒ¿åå‡½æ•°ä¸é—­åŒ…</a></h1>
<p>åœ¨Darté‡Œï¼Œå‡½æ•°åƒæ™®é€šå˜é‡ä¸€æ ·ï¼Œå¯ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œæˆ–ä»ä¸€ä¸ªå‡½æ•°è¿”å›ï¼Œè¿™ä¾¿æ˜¯æ‰€è°“çš„å‡½æ•°ä¹ƒä¸€ç­‰å…¬æ°‘ï¼ˆfirst-class objectï¼‰ã€‚åœ¨Darté‡Œå¯ä»¥å®šä¹‰<a href="ch02/dartpl0206.html##%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0">åŒ¿åå‡½æ•°</a> ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åç§°çš„å‡½æ•°ï¼Œè¿™åœ¨å®é™…åº”ç”¨ä¸­æä¸ºæ–¹ä¾¿ã€‚<a href="ch02/dartpl0206.html#%E9%97%AD%E5%8C%85closure">é—­åŒ…ï¼ˆClosureï¼‰</a>æ˜¯ä¸ä¹‹ç›¸å…³çš„å¦ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œè¯¦è§åæ–‡ã€‚</p>
<h2 id="å‡½æ•°ç±»å‹"><a class="header" href="#å‡½æ•°ç±»å‹">å‡½æ•°ç±»å‹</a></h2>
<p>é¦–å…ˆé€šè¿‡ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¥çœ‹ä¸€çœ‹ä»€ä¹ˆæ˜¯å‡½æ•°ç±»å‹ï¼ˆfuntion typeï¼‰ã€‚</p>
<pre><code class="language-dart">// ch0206_1.dart
void main() {
  int increase(int value, {int increment = 1}) =&gt; value + increment; // 3
  var increaseFunc = increase; // 4

  print(addFunc); // 5
  print(increaseFunc); // 5a

  //Output:
  //Closure: (int, int) =&gt; int from Function 'add': static.
  //Closure: (int, {int increment}) =&gt; int
}

int add(int a, int b) =&gt; a + b; // 1

int Function(int a, int b) addFunc = add; // 2

int Function(int, int) addFunc2 = add; // 2a

var addFunc3 = add; // 2b
</code></pre>
<ol>
<li>å£°æ˜å‡½æ•°<code>add</code>;</li>
<li>å£°æ˜å˜é‡<code>addFunc</code> å¹¶èµ‹å€¼ä¸º<code>add</code>ï¼Œå®ƒçš„ç±»å‹æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ <code>int Function(int a, int b) </code>ï¼Œ å¯è§å‡½æ•°ç±»å‹çš„å†™æ³•ä¸å£°æ˜ä¸€ä¸ªå‡½æ•°ç±»ä¼¼ï¼Œå»æ‰å‡½æ•°ä½“ï¼Œç„¶åå°†å‡½æ•°åç§°æ¢æˆå…³é”®å­—<code>Function</code>å³å¯ï¼ŒåŒæ—¶å¯çœç•¥ä½ç½®å‚æ•°çš„åç§°ï¼ˆ2aï¼‰;</li>
<li>åœ¨<code>main</code>å‡½æ•°çš„å†…éƒ¨ï¼Œå£°æ˜å‡½æ•°<code>increase</code>;</li>
<li>å£°æ˜å˜é‡<code>increaseFunc</code> å¹¶èµ‹å€¼ä¸º<code>increase</code>;</li>
<li>æ‰“å°<code>addFunc</code>ä¸<code>increaseFunc</code>ï¼Œæ³¨æ„è§‚å¯Ÿå…¶è¾“å‡ºã€‚</li>
</ol>
<p><code>increase</code> å‡½æ•°å®šä¹‰åœ¨<code>main</code>å‡½æ•°çš„å†…éƒ¨ï¼Œè¿™ä¾¿æ˜¯åµŒå¥—å‡½æ•°çš„æ¦‚å¿µã€‚<code>Closure: (int, int) =&gt; int from Function 'add': static.</code>ï¼Œè¿™è¡¨æ˜<code>addFunc</code>çš„å€¼æ˜¯ä¸€ä¸ª<a href="ch02/dartpl0206.html#%E9%97%AD%E5%8C%85closure">é—­åŒ…ï¼ˆClosureï¼‰</a>ï¼Œå¹¶ä¸”å®ƒæ¥è‡ªå…¨å±€ï¼ˆ<code>static</code>ï¼‰çš„<code>add</code>å‡½æ•°ã€‚è¿™é‡Œçš„å…¨å±€è®²çš„æ˜¯ä½œç”¨åŸŸï¼ˆLexical Scopeï¼‰ã€‚</p>
<h2 id="ä½¿ç”¨-typedef"><a class="header" href="#ä½¿ç”¨-typedef">ä½¿ç”¨ <code>typedef</code></a></h2>
<p>ä½¿ç”¨ <code>typedef</code> å…³é”®å­—ç»™å‡½æ•°ç±»å‹å–ä¸€ä¸ªåˆ«åï¼š</p>
<pre><code class="language-dart">typedef AddFunction = int Function(int a, int b);
AddFunction addFunc4 = add;

typedef VoidCallback = void Function();
</code></pre>
<p><code>typedef</code> ä¹Ÿç”¨äºç»™æ•°æ®ç±»å‹å–åˆ«åï¼š</p>
<pre><code class="language-dart">typedef IntList = List&lt;int&gt;;
</code></pre>
<h2 id="è¯æ³•èŒƒå›´lexical-scope"><a class="header" href="#è¯æ³•èŒƒå›´lexical-scope">è¯æ³•èŒƒå›´ï¼ˆLexical Scopeï¼‰</a></h2>
<p>ä»è¯­æ³•ä¸Šçœ‹ï¼Œä¸€å¯¹èŠ±æ‹¬å·ï¼ˆ<code>{}</code>ï¼‰ä¾¿å®šä¹‰äº†ä¸€ä¸ªè¯æ³•èŒƒå›´ï¼Œå³ä½œç”¨åŸŸã€‚ä½œç”¨åŸŸåµŒå¥—è€Œæˆï¼Œå¤–å±‚ä½œç”¨åŸŸå†…çš„å˜é‡å¯¹å†…å±‚å¯è§ï¼Œåä¹‹ä¸ç„¶ã€‚ä¸‹é¢æ˜¯æ¥è‡ª<a href="https://dart.dev/language/functions#lexical-scope">å®˜æ–¹æ–‡æ¡£</a>çš„ç¤ºä¾‹:</p>
<pre><code class="language-dart">// ch0206_2.dart
bool topLevel = true;

void main() {
  var insideMain = true;

  void myFunction() {
    var insideFunction = true;

    void nestedFunction() {
      var insideNestedFunction = true;

      assert(topLevel);
      assert(insideMain);
      assert(insideFunction);
      assert(insideNestedFunction);
    }
  }
}
</code></pre>
<h2 id="åŒ¿åå‡½æ•°"><a class="header" href="#åŒ¿åå‡½æ•°">åŒ¿åå‡½æ•°</a></h2>
<p>åƒ<code>main </code>ã€<code>print</code>è¿™äº›æ˜¯å‘½åï¼ˆå…·åï¼‰å‡½æ•°ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºæ²¡æœ‰åç§°çš„å‡½æ•°ï¼Œç§°ä¹‹ä¸ºåŒ¿åå‡½æ•°ï¼Œæˆ–lambdaè¡¨è¾¾å¼ æˆ– é—­åŒ…ã€‚</p>
<p>åŒ¿åå‡½æ•°ç»å¸¸ä½œä¸ºå…¶ä»–å‡½æ•°çš„å‚æ•°ï¼Œå®ƒä¸å‘½åå‡½æ•°ç±»ä¼¼ï¼Œç‰¹åˆ«ä¹‹å¤„åœ¨äºï¼š</p>
<ul>
<li>æ²¡æœ‰å‡½æ•°åç§°ï¼›</li>
<li>ä¹Ÿæ— éœ€å£°æ˜è¿”å›å€¼çš„ç±»å‹ï¼›</li>
<li>å‚æ•°çš„ç±»å‹æ˜¯å¯é€‰çš„ã€‚</li>
</ul>
<p>è¯­æ³•æ ¼å¼ï¼š</p>
<pre><code class="language-dart">(å‚æ•°åˆ—è¡¨) {
  å‡½æ•°ä½“
}
</code></pre>
<p>ä¸‹é¢çš„ç¤ºä¾‹ç¨‹åºåˆ†æä¸€å¥è‹±æ–‡ï¼Œç„¶åæ‰“å°å…¶ä¸­çš„å•è¯åŠå…¶é•¿åº¦ã€‚</p>
<pre><code class="language-dart">// ch0206_3.dart
void main() {
  var sentence = 'Its quaint events were hammered out'; // 1
  var stats = sentence.split(' ').map((word) =&gt; (word, word.length)); // 2
  stats.forEach(print); // 3
  // Output:
  // (Its, 3)
  // (quaint, 6)
  // (events, 6)
  // (were, 4)
  // (hammered, 8)
  // (out, 3)
}
</code></pre>
<ol>
<li><code>sentence</code>æ˜¯ä¸€å¥è‹±æ–‡;</li>
<li><code> sentence.split(' ')</code> ä½¿ç”¨ç©ºæ ¼ç¬¦ï¼ˆ<code>' '</code>ï¼‰åˆ†å‰² <code>sentence</code>ï¼Œå¾—åˆ°ä¸€ä¸ªå•è¯ï¼ˆ<code>word</code>ï¼‰çš„åˆ—è¡¨;
ç„¶åå°†æ¯ä¸ªå•è¯æ˜ å°„ï¼ˆ<code>map</code>ï¼‰ä¸ºä¸€ä¸ªè®°å½•ï¼Œå†…å®¹ä¸ºå•è¯åŠå…¶é•¿åº¦ï¼ˆ<code>(word, word.length)</code>ï¼‰;
è¿™ä¸€å¥ç»“æŸæ—¶å°†å¾—åˆ°ç»Ÿè®¡ç»“æœ<code>stats</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ª <a href="https://api.dart.dev/dart-core/Iterable-class.html"><code> Iterable</code> å¯¹è±¡</a>ï¼ˆå¯å°†<code>Iterable</code>ç®€å•ç†è§£ä¸ºä¸€ä¸ªæ›´ä¸ºæ³›åŒ–çš„åˆ—è¡¨ï¼Œé€šè¿‡ç‰¹å®šçš„æ–¹æ³•è®¿é—®å…¶å…ƒç´ ï¼‰;</li>
<li>ä½¿ç”¨<code>Iterable.forEach</code> æ–¹æ³•ï¼Œæ‰“å°<code>stats</code> ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œè¿™é‡Œå°†<code>print</code>å‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥<code>forEach</code>ã€‚</li>
</ol>
<p>ç¬¬2å¥ä¸­çš„<code>(word) =&gt; (word, word.length)</code> æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå®ƒä½œä¸ºå‚æ•°ä¼ å…¥<code>map</code>å‡½æ•°ã€‚</p>
<h2 id="é—­åŒ…closure"><a class="header" href="#é—­åŒ…closure">é—­åŒ…ï¼ˆClosureï¼‰</a></h2>
<p>é—­åŒ…æ˜¯ä¸€ä¸ªå®¹æ˜“è®©äººè¿·ç³Šçš„æ¦‚å¿µã€‚ç®€è¨€ä¹‹ï¼Œé—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆæˆ–å‡½æ•°å€¼ã€å‡½æ•°å¯¹è±¡ï¼‰ï¼Œå¾ˆå¤šæ—¶å€™å®ƒæ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚é—­åŒ…è¿™ä¸ªæ¦‚å¿µä¹‹æ‰€ä»¥ä¼šè¯ç”Ÿï¼Œæ˜¯å› ä¸ºå®ƒçš„å®ç”¨æ€§ä¸ç‰¹æ®Šæ€§ï¼š</p>
<blockquote>
<p>é—­åŒ…å³ä½¿è„±ç¦»äº†å®šä¹‰å®ƒçš„ä½œç”¨åŸŸï¼ˆåŸå§‹ä½œç”¨åŸŸï¼‰ï¼Œä¾ç„¶å¯ä»¥è®¿é—®åŸå§‹ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚</p>
</blockquote>
<p>å¦‚æœä¸€é—¨ç¼–ç¨‹è¯­è¨€å…·æœ‰ä¸Šè¿°ç‰¹æ€§ï¼Œæ¯”å¦‚Dartï¼Œæˆ‘ä»¬å°±è¯´Dartæ”¯æŒé—­åŒ…ï¼Œå¯è§é—­åŒ…è¿™ä¸ªè¯ä¹Ÿç”¨æ¥è¡¨ç¤ºç¼–ç¨‹è¯­è¨€çš„è¿™ä¸€ç‰¹ç‚¹(feature)ã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªç¤ºä¾‹æ¥è‡ª<a href="https://dart.dev/language/functions#lexical-closures">å®˜æ–¹æ–‡æ¡£</a>ï¼š</p>
<pre><code class="language-dart">// ch0206_4.dart
Function makeAdder(int addBy) {// 1
  return (int i) =&gt; addBy + i; // funcA
}

void main() {
  var add2 = makeAdder(2); // 2
  var add4 = makeAdder(4); // 2a

  assert(add2(3) == 5); // 3
  assert(add4(3) == 7); // 3a
}
</code></pre>
<ol>
<li><code>makeAdder</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•° <code> (int i) =&gt; addBy + i;</code> ï¼Œä¸ºæ–¹ä¾¿æè¿°ï¼Œç§°ä¹‹ä¸º<code>funcA</code>;</li>
<li>åˆ†åˆ«è°ƒç”¨ <code>makeAdder(2)</code>ã€ <code>makeAdder(4)</code>  å¾—åˆ°å‡½æ•° <code>add2</code>ã€<code>add4</code>;</li>
<li>æ–­è¨€ <code>add2(3)</code>ç­‰äº5ï¼Œ æ–­è¨€ <code>add4(3)</code>ç­‰äº7ã€‚</li>
</ol>
<p><code>add2</code>ã€<code>add4</code> éƒ½è®°ä½äº†<code>makeAdder</code>è¢«è°ƒç”¨æ—¶çš„<code>addBy</code>ï¼ˆ<code>makeAdder</code>çš„å‚æ•°ï¼‰ã€‚ä»æ•°å­¦çš„è§’åº¦æ¥çœ‹<code>funcA</code>:</p>
<p>\( funcA( i ) = addBy + i \)</p>
<p>è¿™ä¸ªå‡½æ•°é‡Œçš„è‡ªå˜é‡æ˜¯<code>i</code>ï¼Œ <code>addBy</code>æ˜¯ä¸€ä¸ªå¸¸é‡ã€‚ <code>add2 = makeAdder(2)</code>ï¼Œ ç›¸å½“äºæŒ‡å®šå¸¸é‡ <code>addBy = 2</code>ï¼Œ<code>add4</code>ç±»ä¼¼ã€‚<code>add2</code>ã€<code>add4</code> ç­‰éƒ½æ˜¯é—­åŒ…ã€‚</p>
<h2 id="å°æµ‹éªŒ-3"><a class="header" href="#å°æµ‹éªŒ-3">å°æµ‹éªŒ</a></h2>
<p>ä¿®æ”¹ç¤ºä¾‹ç¨‹åº<code>ch0206_3.dart</code>ï¼Œå°†ç»Ÿè®¡ç»“æœæŒ‰å•è¯çš„é•¿åº¦é™åºæ’åºã€‚æç¤ºï¼šä½¿ç”¨<code>List.sort</code>æ–¹æ³•ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="é€’å½’"><a class="header" href="#é€’å½’">é€’å½’</a></h1>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°ç›´æ¥æˆ–é—´æ¥è°ƒç”¨å®ƒè‡ªå·±ï¼Œæˆ‘ä»¬ä¾¿ç§°ä¹‹ä¸ºé€’å½’å‡½æ•°ã€‚ä¹‹æ‰€ä»¥è®¨è®ºå®ƒï¼Œæ˜¯å› ä¸ºé€’å½’æ˜¯ä¸€ç§è§£å†³é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ï¼Œä¹Ÿæ˜¯ä¸€ç§åˆ†æ²»çš„æ€æƒ³ï¼Œå®ƒé’ˆå¯¹ç‰¹å®šçš„é—®é¢˜ï¼Œè¿™ç±»é—®é¢˜åœ¨ç»“æ„ä¸Šå¯ä»¥è¿›ä¸€æ­¥åˆ†è§£ä¸ºç›¸ä¼¼çš„å­é—®é¢˜ã€‚ä¾‹å¦‚é˜¶ä¹˜å‡½æ•°ï¼š</p>
<p>\( n! = (n-1)!*n \)</p>
<p>ä¸‹é¢çš„ä»£ç è®¡ç®—æ–æ³¢é‚£å¥‘ï¼ˆFibonacciï¼‰æ•°åˆ—ï¼š</p>
<p>\( fib(0)=0, fib(1) = 1 \)</p>
<p>\( fib(n) = fib(n-1) + fib(n-2),   n &gt;1 \)</p>
<pre><code class="language-dart">// ch0207_1.dart
void main() {
  var n = 20;
  print('fib($n) = ${fib(n).$2}'); // Output: fib(20) = 6765
}

/// fib function returns (fib(n - 1), fib(n))
(int, int) fib(int n) {
  if (n &lt;= 1) return (0, 1);
  var (a, b) = fib(n - 1);
  return (b, a + b);
}
</code></pre>
<p>åˆå¦‚ä½¿ç”¨è¾—è½¬ç›¸é™¤æ³•ï¼Œè®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°ï¼ˆæœ€å¤§å…¬å› æ•°ï¼‰ï¼š</p>
<p>\( gcd(a, b) = gcd(b, a\%b) \)</p>
<pre><code class="language-dart">// ch0207_1.dart
void main() {
  var a = 234, b = 678;
  print('gcd($a, $b) = ${gcd(a, b)}'); // Output: gcd(234, 678) = 6
}

/// Greatest common divisor
int gcd(int a, int b) {
  if (b == 0) return a;
  return gcd(b, a % b);
}
</code></pre>
<blockquote>
<p><strong><em>NOTE:</em></strong> è¾—è½¬ç›¸é™¤æ³•</p>
<ol>
<li>ç”¨è¾ƒå¤§æ•°é™¤ä»¥è¾ƒå°æ•°ï¼Œå¾—åˆ°ä½™æ•°;</li>
<li>å¦‚æœä½™æ•°ä¸º0ï¼Œåˆ™é™¤æ•°å³ä¸ºæœ€å¤§å…¬çº¦æ•°ï¼ˆç®—æ³•ç»ˆæ­¢ï¼‰ï¼Œå¦åˆ™è½¬ä¸‹ä¸€æ­¥;ï»¿</li>
<li>ç”¨ä½™æ•°ä»£æ›¿åŸæ¥çš„é™¤æ•°ï¼Œç”¨åŸæ¥çš„é™¤æ•°ä»£æ›¿åŸæ¥çš„è¢«é™¤æ•°ï¼Œè½¬ç¬¬1æ­¥ã€‚ï»¿</li>
</ol>
</blockquote>
<h2 id="é€’å½’ä¸å¾ªç¯"><a class="header" href="#é€’å½’ä¸å¾ªç¯">é€’å½’ä¸å¾ªç¯</a></h2>
<p>æœ‰æ—¶ï¼Œé€’å½’å‡½æ•°å¯ä»¥ç”¨å¾ªç¯æ¥æ”¹å†™ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-dart">/// Greatest common divisor (loop version)
int gcd2(int a, int b) {
  while (b != 0) {
    (a, b) = (b, a % b);
  }
  return a;
}
</code></pre>
<p><code>gcd2</code>ä¸<code>gcd</code>å‡½æ•°çš„åŠŸèƒ½ä¸€æ ·ï¼Œåªä¸è¿‡ä½¿ç”¨äº†å¾ªç¯è€Œéé€’å½’æ¥å®ç°ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å¼‚å¸¸å¤„ç†"><a class="header" href="#å¼‚å¸¸å¤„ç†">å¼‚å¸¸å¤„ç†</a></h1>
<p>Dartä»£ç å¯ä»¥æŠ›å‡ºï¼ˆ<code>throw</code>ï¼‰å’Œæ•è·ï¼ˆ<code>catch</code>ï¼‰å¼‚å¸¸ï¼ˆ<code>Exception</code>ï¼‰ã€‚å¼‚å¸¸ä»£è¡¨äº†ç¨‹åºçš„æŸç§é”™è¯¯ï¼Œä¹Ÿå°±æ˜¯ä¸€äº›æ„æƒ³ä¸åˆ°çš„äº‹æƒ…ã€‚å¼•å‘å¼‚å¸¸çš„ä»£ç åˆ†æ”¯åŠå…¶ä¸Šä¸‹æ–‡ï¼Œå³æµ‹è¯•ä¸­çš„è´Ÿå‘è·¯å¾„ã€‚</p>
<p>Dartçš„å‡½æ•°æˆ–æ–¹æ³•ä¸ä¼šå£°æ˜å®ƒå°†æŠ›å‡ºå“ªäº›å¼‚å¸¸; Dartä¹Ÿä¸å¼ºåˆ¶è¦æ±‚æ•è·å¼‚å¸¸ã€‚å¦‚æœå¼‚å¸¸å‘ç”Ÿäº†å´ä¸è¢«å¤„ç†ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„ isolate å°†è¢«æŒ‚èµ·ï¼Œä¸”é€šå¸¸ä¼šè¢«ç»ˆæ­¢ã€‚ç¬¬7ç« å°†è¯¦ç»†è®¨è®º isolateï¼Œè¿™é‡Œå°†å…¶è§†ä¸ºä¸€ç§å†…å­˜ç‹¬ç«‹çš„çº¿ç¨‹ï¼ˆå¦‚ <code>main</code> å‡½æ•°æ‰€åœ¨çš„ main isolateï¼‰å³å¯ã€‚</p>
<h2 id="æŠ›å‡ºå¼‚å¸¸-trhow"><a class="header" href="#æŠ›å‡ºå¼‚å¸¸-trhow">æŠ›å‡ºå¼‚å¸¸ ï¼ˆ<code>trhow</code>ï¼‰</a></h2>
<p>Dartç¨‹åºå¯ä»¥æŠ›å‡ºï¼ˆ<code>trhow</code>ï¼‰ä»€ä¹ˆï¼Ÿç­”æ¡ˆæ˜¯é™¤äº†<code>null</code>å¤–çš„ä»»ä½•ä¸œè¥¿ã€‚</p>
<pre><code class="language-dart">// ch0208_1.dart
void main() {
  throw 'something bad happened';
  // Unhandled exception:
  // something bad happened
}
</code></pre>
<p>æ­¤ä¾‹ä½¿ç”¨<code>throw</code> å…³é”®å­—ï¼ŒæŠ›å‡ºäº†ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<h3 id="exception-å’Œ-error"><a class="header" href="#exception-å’Œ-error"><code>Exception</code> å’Œ <code>Error</code></a></h3>
<p>Dartæä¾›äº† <code>Exception</code> å’Œ <code>Error</code> ç±»åŠç›¸å…³å­ç±»ï¼ˆç¬¬4ç« å°†ä»‹ç»ç±»ï¼‰ï¼Œå®˜æ–¹å»ºè®®æˆ‘ä»¬åœ¨äº§å“ä»£ç ä¸­æŠ›å‡º <code>Exception</code> æˆ– <code>Error</code> çš„å®ç°ç±»ã€‚ä¾‹å¦‚ä¸‹é¢è¿™äº›ç±»å®ç°äº†<code>Exception</code>ï¼š</p>
<ul>
<li><code>AnalysisException</code></li>
<li><code>DeferredLoadException</code></li>
<li><code>FileSystemException</code></li>
<li><code>FormatException</code></li>
<li><code>IOException</code></li>
<li><code>IsolateSpawnException</code></li>
<li><code>PathException</code></li>
<li><code>RemoteException</code></li>
<li><code>TimeoutException</code></li>
</ul>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±çš„å¼‚å¸¸ç±»ï¼Œå¹¶å®ç°ï¼ˆ<code>implements</code>ï¼‰ <code>Exception</code> æˆ– <code>Error</code>ã€‚</p>
<pre><code class="language-dart">// ch0208_2.dart
void main() {
  throw FooException();
}

class FooException implements Exception {}
</code></pre>
<p><code>Exception</code> ä¸ <code>Error</code> çš„åŒºåˆ«ï¼š</p>
<ul>
<li>
<p><code> Exception</code>æ—¨åœ¨å‘å¤–ä¼ é€’ä¸€ä¸ªå¤±è´¥ä¿¡æ¯ï¼ˆä¾‹å¦‚è¶…æ—¶å¼‚å¸¸ <code>TimeoutException</code>ï¼‰ï¼Œä»¥ä¾¿é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼è§£å†³ï¼›å®ƒåº”è¯¥åŒ…å«æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä¸”å¸Œæœ›è¢«æ•è·ã€‚</p>
</li>
<li>
<p><code>Error</code>ä»£è¡¨äº†ç¨‹åºå‘˜å¼•èµ·çš„é”™è¯¯ï¼ˆä¾‹å¦‚æ–­è¨€é”™è¯¯ <code>AssertionError</code>ï¼‰ï¼Œ å®ƒç†åº”è¢«é¿å…ï¼Œä¸”é€šå¸¸æš—ç¤ºäº†ä¸€ä¸ªbugï¼Œæˆ‘ä»¬ä¸åº”æ•è·å®ƒã€‚</p>
</li>
</ul>
<h2 id="æ•è·å¼‚å¸¸"><a class="header" href="#æ•è·å¼‚å¸¸">æ•è·å¼‚å¸¸</a></h2>
<h3 id="æ•è·æŒ‡å®šç±»å‹çš„å¼‚å¸¸"><a class="header" href="#æ•è·æŒ‡å®šç±»å‹çš„å¼‚å¸¸">æ•è·æŒ‡å®šç±»å‹çš„å¼‚å¸¸</a></h3>
<p>ä½¿ç”¨ <code>try...on...catch</code> è¯­æ³•æ•è·å¼‚å¸¸ã€‚å°†å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç æ”¾åœ¨<code>try{}</code>ä»£ç å—ä¸­ï¼Œç„¶åä½¿ç”¨<code>on</code>å…³é”®å­—æ•è·ç‰¹å®šç±»å‹çš„å¼‚å¸¸ã€‚</p>
<pre><code class="language-dart">// ch0208_3.dart
import 'dart:io';

void main() {
  var str = 'dart';
  try {
    int.parse(str);
  } on FormatException {
    stderr.writeln('FormatException: Cannot parse "$str" as an integer.');
  }
}
</code></pre>
<p>æ­¤ä¾‹è¯•å›¾å°†å­—ç¬¦ä¸²<code>"dart"</code>è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œå¼•å‘äº† <code>FormatException</code>ï¼Œéšåè¢«æ•è·ã€‚</p>
<h3 id="æ•è·å¼‚å¸¸ä¿¡æ¯"><a class="header" href="#æ•è·å¼‚å¸¸ä¿¡æ¯">æ•è·å¼‚å¸¸ä¿¡æ¯</a></h3>
<p>ä½¿ç”¨<code>catch</code>å…³é”®å­—æ•è·å¼‚å¸¸ä¿¡æ¯ï¼ˆå³å¼‚å¸¸ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ï¼‰ã€‚</p>
<pre><code class="language-dart">// ch0208_4.dart
void main() {
  try {
    int.parse('dart');
  } on FormatException catch (ex) {
    print(ex.message); // Output: Invalid radix-10 number
  } 
}
</code></pre>
<p><code>catch()</code> è¿˜æœ‰å¦ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºå¼‚å¸¸å †æ ˆã€‚</p>
<pre><code class="language-dart">// ch0208_5.dart
void main() {
  try {
    int.parse('dart');
  } on FormatException catch (e, s) {
    print(e);
    print(s);
  }
}
</code></pre>
<h3 id="é‡æ–°æŠ›å‡ºå¼‚å¸¸"><a class="header" href="#é‡æ–°æŠ›å‡ºå¼‚å¸¸">é‡æ–°æŠ›å‡ºå¼‚å¸¸</a></h3>
<p>ä½¿ç”¨ <code>rethrow</code>å…³é”®å­—é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼Œä¸”ä¿ç•™åŸæ¥çš„å †æ ˆä¿¡æ¯ã€‚</p>
<pre><code class="language-dart">// ch0208_6.dart
void main() {
  try {
    parseInt('dart');
  } catch (_, s) {// 2
    print(s); // 2a
  }
}

int parseInt(String str) {
  try {
    return int.parse(str);
  } on FormatException catch (_, s) {
    print(s); // 1a
    rethrow; // 1
  }
}
</code></pre>
<ol>
<li>ä½¿ç”¨<code>rethow</code>å…³é”®å­—å°†æ•è·åˆ°çš„<code>FormatException</code>å†æ¬¡æŠ›å‡º;</li>
<li>è¿™é‡Œä»…ç”¨äº†<code>catch</code> ï¼ˆæ²¡æœ‰ä½¿ç”¨<code>on</code>æŒ‡å®šå¼‚å¸¸ç±»å‹ï¼‰ï¼Œè¡¨ç¤ºæ•è·æ‰€æœ‰ç±»å‹çš„å¼‚å¸¸ã€‚</li>
</ol>
<h3 id="æ•è·å¤šç§ç±»å‹çš„å¼‚å¸¸"><a class="header" href="#æ•è·å¤šç§ç±»å‹çš„å¼‚å¸¸">æ•è·å¤šç§ç±»å‹çš„å¼‚å¸¸</a></h3>
<p>ä½¿ç”¨å¤šä¸ª<code>catch</code>å­å¥æ¥åˆ†åˆ«å¤„ç†ä¸åŒç±»å‹çš„å¼‚å¸¸ã€‚</p>
<pre><code class="language-dart">//ch0206_7.dart
void main() {
  print(safeDivide('8', '2'));
  print(safeDivide('8', '0'));
  print(safeDivide('hello', 'dart'));
}

(String? err, int) safeDivide(String a, String b) {
  try {
    return (null, int.parse(a) ~/ int.parse(b));
  } on FormatException catch (e) {
    return ('FormatException: ${e.source}', 0);
  } on UnsupportedError catch (e) { // IntegerDivisionByZeroException
    return ('UnsupportedError: ${e.message}', 0);
  } on Exception catch (e) {
    return ('unknown exception: $e', 0);
  }
}
</code></pre>
<h2 id="finally"><a class="header" href="#finally"><code>finally</code></a></h2>
<p>æ— è®º<code>try</code> ä»£ç å—å†…æ˜¯å¦å‘ç”Ÿäº†å¼‚å¸¸ï¼Œ <code>finally</code>å­å¥éƒ½å°†è¢«æ‰§è¡Œã€‚<code>finally</code>å­å¥é€šå¸¸ç”¨æ¥å…³é—­èµ„æºï¼ˆå¦‚æ‰“å¼€çš„ç³»ç»Ÿæ–‡ä»¶ï¼‰ã€‚</p>
<pre><code class="language-dart">// ch0208_8.dart
void main() {
  try {
    print(2 ~/ 0);
  } on UnsupportedError {
    print('oops');
  } finally {
    print('done');
  }
  // Output:
  // oops
  // done
}
</code></pre>
<h2 id="å‚è€ƒèµ„æ–™-8"><a class="header" href="#å‚è€ƒèµ„æ–™-8">å‚è€ƒèµ„æ–™</a></h2>
<ul>
<li><a href="https://dart.dev/language/error-handling">https://dart.dev/language/error-handling</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ¨¡å¼"><a class="header" href="#æ¨¡å¼">æ¨¡å¼</a></h1>
<p>Dart 3.0å¼•å…¥äº†ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œæ¨¡å¼ï¼ˆPatternï¼‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¾æ®æ¨¡å¼çš„å½¢çŠ¶åŠå…¶ä¸Šä¸‹æ–‡ï¼Œ æ¨¡å¼å¯ä»¥<a href="ch03/dartpl0301.html#%E5%8C%B9%E9%85%8D">åŒ¹é…ï¼ˆmatchï¼‰</a>æˆ–<a href="ch03/dartpl0301.html#%E8%A7%A3%E6%9E%84">è§£æ„ï¼ˆdestructure)</a>ä¸€ä¸ªå€¼ï¼ŒåŒ¹é…ä¸è§£æ„å¯åŒæ—¶è¿›è¡Œã€‚</p>
<h2 id="åŒ¹é…"><a class="header" href="#åŒ¹é…">åŒ¹é…</a></h2>
<p>æ¨¡å¼åŒ¹é…å¯ä»¥æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ï¼š</p>
<ul>
<li>å…·æœ‰ç‰¹å®šçš„å½¢çŠ¶;</li>
<li>æ˜¯ç‰¹å®šå¸¸æ•°;</li>
<li>ç­‰äºæŸä¸ªå€¼;</li>
<li>æœ‰ç‰¹å®šçš„æ•°æ®ç±»å‹ã€‚</li>
</ul>
<p>è¿™ä¹ˆè¯´è¿˜æ˜¯æœ‰ç‚¹æŠ½è±¡ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ç¤ºä¾‹ã€‚</p>
<pre><code class="language-dart">//ch0301_1.dart
void main() {
  const numbers = [1, 2, 3]; // 1

  if (numbers case [_, _, _]) { // 2
    print('numbers is a list which has 3 elements.');
  }

  if (numbers case [1, 2, 3]) { // 3
    print('numbers is exactly [1, 2, 3].');
  }

  const point = (x: 3, y: 4); // 4
  
  if (point case (x: _, y: _)) { // 5
    print("point is a record with named fields x and y.");
  }
}

</code></pre>
<ol>
<li>å£°æ˜äº†ä¸€ä¸ª<code>const</code>åˆ—è¡¨<code>numbers</code>;</li>
<li>æ£€æŸ¥<code>numbers</code>æ˜¯å¦æ˜¯ä¸€ä¸ªå…·æœ‰2ä¸ªå…ƒç´ çš„åˆ—è¡¨;</li>
<li>æ£€æŸ¥<code>numbers</code>æ˜¯å¦å°±ç­‰äº<code> [1, 2, 3]</code>;</li>
<li>å£°æ˜ä¸€ä¸ªè®°å½•<code>point</code>;</li>
<li>æ£€æŸ¥<code>point</code>æ˜¯å¦æ˜¯ä¸€ä¸ªå…·æœ‰å‘½åå­—æ®µ <code>x</code> å’Œ <code>y</code> çš„è®°å½•ï¼ˆrecordï¼‰ã€‚</li>
</ol>
<h2 id="è§£æ„"><a class="header" href="#è§£æ„">è§£æ„</a></h2>
<p>æ¨¡å¼è§£æ„æä¾›äº†ä¸€ç§ä¾¿æ·çš„å£°æ˜å¼è¯­æ³•ï¼Œå¯ä»¥å°†ä¸€ä¸ªå€¼åˆ†è§£æˆå„éƒ¨ä»¶ï¼ˆpartsï¼‰ï¼Œå¹¶å°†éƒ¨åˆ†æˆ–å…¨éƒ¨çš„éƒ¨ä»¶ï¼Œç»‘å®šè‡³å±€éƒ¨å˜é‡ã€‚</p>
<pre><code class="language-dart">//ch0301_2.dart
void main() {
  const numbers = [1, 2, 3]; 

  if (numbers case [var a, var b, _]) { // 1
    print('a=$a b=$b'); 
  }

  if (numbers case [var a, ...var rest]) { // 2
    print('The first element is $a, and the rest is $rest'); 
  }

  const point = (x: 3, y: 4); 

  if (point case (x: var a, :var y)) { // 3
    print("a=$a y=$y");
  }
}
</code></pre>
<ol>
<li>åŒ¹é…<code>numbers</code>å¹¶ç»‘å®šå‰2ä¸ªå…ƒç´ è‡³å˜é‡<code>a</code>å’Œ<code>b</code>;</li>
<li>åŒ¹é…<code>numbers</code>å¹¶ç»‘å®šç¬¬1å…ƒç´ è‡³å˜é‡<code>a</code>ï¼Œç»‘å®šå‰©ä½™çš„å…ƒç´ è‡³å˜é‡<code>rest</code>ï¼Œæ³¨æ„<code>var rest</code>ä¹‹å‰æœ‰3ä¸ªç‚¹ï¼ˆ<code>....</code>ï¼‰;</li>
<li>åŒ¹é…<code>point</code>ï¼Œå¹¶å°†å…¶<code>x</code>å­—æ®µç»‘å®šè‡³å˜é‡<code>a</code>ï¼Œ<code>y</code>å­—æ®µç»‘å®šè‡³å˜é‡<code>y</code>ï¼›è¿™é‡Œçš„<code>:var y</code>ä¹ƒ<code>y:var y</code>çš„ç®€ä¾¿å†™æ³•ã€‚</li>
</ol>
<p>ä¸‹é¢æ˜¯ä¸ç±»ç›¸å…³çš„æ¨¡å¼åŒ¹é…çš„ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<pre><code class="language-dart">// ch0301_3.dart
void main() {
  const point = Point(3, 4); // 4
  if (point case Point(:var x, :var y, :var z)) { // 5
    print("x=$x, y=$y, z=$z"); 
  }
}

class Point { 
  const Point(this.x, this.y); // 1

  final int x; // 2
  final int y; // 2a
  int get z =&gt; x + y; // 3
}
</code></pre>
<ol>
<li>è¿™æ˜¯ç±»<code>Point</code>çš„æ„é€ å‡½æ•°ï¼›</li>
<li><code>x</code> ä¸<code> y</code> æ˜¯<code>Point</code> çš„ä¸¤ä¸ªå…¬å¼€çš„å­—æ®µ;</li>
<li><code>z</code> æ˜¯ getter æ–¹æ³•ï¼Œç”±<code>x</code>å’Œ<code>y</code>è®¡ç®—è€Œæˆï¼Œå½¢å¼ä¸Šå½“æˆå­—æ®µæ¥ç”¨ï¼›</li>
<li>å£°æ˜ä¸€ä¸ªå˜é‡<code>point</code>ï¼Œå®ƒ<code>Point</code>ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼›</li>
<li>è§£æ„<code>point</code>ï¼Œå¹¶å°†å…¶éƒ¨ä»¶åˆ†åˆ«ç»‘å®šå€¼å˜é‡ <code>x</code>ã€<code>y</code>ã€<code>z</code>ã€‚</li>
</ol>
<p>è§£æ„ä¸ä½†å¯ä»¥ç»‘å®šå­—æ®µï¼Œè¿˜å¯ä»¥ç»‘å®šå‡½æ•°/æ–¹æ³•ï¼ˆåœ¨ç±»ä¸­å®šä¹‰çš„å‡½æ•°ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆåœ¨æè¿°è§£æ„æ—¶ï¼Œé‡‡ç”¨äº†éƒ¨ä»¶ï¼ˆè€Œéå­—æ®µï¼‰è¿™ä¸ªè¯ã€‚</p>
<pre><code class="language-dart">// ch0301_4.dart
void main() {
  const rect = Rectangle(5, 6);
  if (rect case Rectangle(:var area)) {
    print("${area(.1)} mÂ²");
  }
}

class Rectangle {
  const Rectangle(this.a, this.b);

  final double a;
  final double b;

  double area([double unit = 1]) =&gt; a * b * unit * unit;
}
</code></pre>
<h2 id="å‚è€ƒèµ„æ–™-9"><a class="header" href="#å‚è€ƒèµ„æ–™-9">å‚è€ƒèµ„æ–™</a></h2>
<ul>
<li><a href="https://dart.dev/language/patterns">https://dart.dev/language/patterns</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯"><a class="header" href="#æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯">æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯</a></h1>
<p>æ¨¡å¼å¯ç”¨äºä¸‹åˆ—åœ°æ–¹ï¼š</p>
<ul>
<li><a href="ch03/dartpl0302.html#%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E5%92%8C%E8%B5%8B%E5%80%BC">å±€éƒ¨å˜é‡å£°æ˜å’Œèµ‹å€¼</a></li>
<li><a href="ch03/dartpl0302.html#if-case-%E5%92%8C-switch-case">if-case å’Œ switch-case</a></li>
<li><a href="ch03/dartpl0302.html#for-%E5%92%8C-for-in-%E5%BE%AA%E7%8E%AF">for å’Œ for-in å¾ªç¯</a></li>
<li><a href="ch03/dartpl0302.html#%E9%9B%86%E5%90%88%E5%AD%97%E9%9D%A2%E9%87%8Fcollection-literals%E4%B8%AD%E7%9A%84%E6%8E%A7%E5%88%B6%E6%B5%81">é›†åˆå­—é¢é‡ï¼ˆcollection literalsï¼‰ä¸­çš„æ§åˆ¶æµ(ifã€for)</a></li>
</ul>
<h2 id="å±€éƒ¨å˜é‡å£°æ˜å’Œèµ‹å€¼"><a class="header" href="#å±€éƒ¨å˜é‡å£°æ˜å’Œèµ‹å€¼">å±€éƒ¨å˜é‡å£°æ˜å’Œèµ‹å€¼</a></h2>
<pre><code class="language-dart">// ch0302_1.dart
void main() {
  var (name, :id, [a, b, c]) = ('Tom', id: 1, [3, 4, 5]); // 1
  print('name=$name id=$id a=$a b=$b c=$c');
  // Output: name=Tom id=1 a=3 b=4 c=5

  (a, b) = (b, a); // 2
  print('a=$a b=$b'); // Output: a=4 b=3
}
</code></pre>
<ol>
<li>è¿™è¡Œä»£ç å±•ç¤ºäº†æ¨¡å¼å¦‚ä½•ç”¨äºå±€éƒ¨å˜é‡å£°æ˜;</li>
<li>è¿™é‡Œä½¿ç”¨äº†æ¨¡å¼çš„å±€éƒ¨å˜é‡èµ‹å€¼ï¼Œäº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ã€‚</li>
</ol>
<h2 id="if-case-å’Œ-switch-case"><a class="header" href="#if-case-å’Œ-switch-case">if-case å’Œ switch-case</a></h2>
<p>æ¯ä¸ªcaseå­å¥éƒ½åŒ…å«äº†ä¸€ä¸ªæ¨¡å¼ï¼Œæ— è®ºæ˜¯if-case è¿˜æ˜¯switch-caseã€‚</p>
<pre><code class="language-dart">// ch0302_2.dart
void main() {
  const data = ('Tom', id: 1, [3, 4, 5]);
  if (data case ('Tom' || 'Jerry', id: _, _)) { // 1
    print('Hey, my friend!');
  }

  switch (data) {
    case ('Tom', :var id, _):
      print('Hi, Tom! Your ID is $id.');
    case ('Jerry', :var id, _):
      print('Hi, Jerry! Your ID is $id.');
    default:
      print('Hi! Who are you?');
  }
}
</code></pre>
<ol>
<li>è¿™é‡Œä½¿ç”¨äº†é€»è¾‘æˆ–ï¼ˆORï¼‰æ“ä½œç¬¦ï¼ˆ<code>||</code>ï¼‰ï¼Œè®©<code>data.$1</code>åŒ¹é…å¤šä¸ªå€¼ï¼Œè¿™éå¸¸å®ç”¨ã€‚</li>
</ol>
<h2 id="for-å’Œ-for-in-å¾ªç¯"><a class="header" href="#for-å’Œ-for-in-å¾ªç¯">for å’Œ for-in å¾ªç¯</a></h2>
<pre><code class="language-dart">// ch0302_3.dart
void main() {
  var points = [Point(0, 1), Point(1, 2), Point(2, 3)]; // 2
  for (var Point(:x, :y) in points) { // 3
    print('x=$x y=$y');
  }
}

class Point { // 1
  const Point(this.x, this.y);
  final double x;
  final double y;
}
</code></pre>
<ol>
<li>å®šä¹‰<code>Point</code>ç±»ï¼Œå®ƒåŒ…æ‹¬<code>x</code>å’Œ<code>y</code>ä¸¤ä¸ªå­—æ®µ;</li>
<li><code>points</code>æ˜¯ä¸€ä¸ª<code>Point</code>åˆ—è¡¨;</li>
<li>åœ¨for-inè¯­å¥ä¸­è§£æ„pointsä¸­çš„æ¯ä¸ª<code>Point</code>ï¼Œå°†å…¶éƒ¨ä»¶ç»‘å®šè‡³å±€éƒ¨å˜é‡<code>x</code>å’Œ<code>y</code>ã€‚</li>
</ol>
<h2 id="é›†åˆå­—é¢é‡collection-literalsä¸­çš„æ§åˆ¶æµ"><a class="header" href="#é›†åˆå­—é¢é‡collection-literalsä¸­çš„æ§åˆ¶æµ">é›†åˆå­—é¢é‡ï¼ˆcollection literalsï¼‰ä¸­çš„æ§åˆ¶æµ</a></h2>
<p>é›†åˆåŒ…æ‹¬Listã€Setã€Mapï¼Œå°†åœ¨ç¬¬6ç« å°†è¯¦ç»†è®¨è®ºï¼Œè¿™é‡Œä»…ä»¥Listï¼ˆåˆ—è¡¨ï¼‰ä¸ºä¾‹ï¼Œå¯¹æ¨¡å¼çš„ç›¸å…³ä½¿ç”¨è¿›è¡Œè¯´æ˜ã€‚</p>
<p>é¦–å…ˆæ¥çœ‹å¦‚ä½•ä½¿ç”¨forè¯­å¥åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œä»¥åŠ<code>for</code>ä¸<code>if</code>çš„åµŒå¥—ä½¿ç”¨ã€‚ä¸‹é¢çš„ç¨‹åºå°†æ‰“å°æ•°å­—0åˆ°9ä¸­çš„å¶æ•°ã€‚</p>
<pre><code class="language-dart">// ch0302_4.dart
void main() {
  final nums = [for (var i = 0; i &lt; 10; i++) i]; // 1
  var evenNums = [
    for (var num in nums) // 2
      if (num.isEven) num,
  ];
  print(evenNums); // Output: [0, 2, 4, 6, 8]
}
</code></pre>
<ol>
<li>åœ¨é›†åˆå­—é¢é‡ä¸­ä½¿forè¯­å¥ï¼Œåˆ›å»ºä¸€ä¸ª0åˆ°9çš„æ•°å­—åˆ—è¡¨<code>nums</code>;</li>
<li>å¯¹<code>nums</code>è¿›è¡Œè¿‡æ»¤ï¼ˆ<code>if(num.isEven)</code>ï¼‰ï¼Œé€‰å‡ºå…¶ä¸­çš„å¶æ•°ã€‚</li>
</ol>
<p>ä¸‹ä¾‹æ¼”ç¤ºäº†å¦‚ä½•åœ¨é›†åˆå­—é¢é‡çš„æ§åˆ¶æµä¸­ä½¿ç”¨æ¨¡å¼ã€‚</p>
<pre><code class="language-dart">// ch0302_5.dart
void main() {
  var points = [for (var x = 0; x &lt; 10; x++) (x: x, y: 2 * x)];
  var points2 = [
    for (var (:x, :y) in points)
      if (x.isEven) (x: x, y: y),
  ];
  print(points2);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ¨¡å¼ç±»å‹"><a class="header" href="#æ¨¡å¼ç±»å‹">æ¨¡å¼ç±»å‹</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ¨¡å¼åº”ç”¨æ¡ˆä¾‹"><a class="header" href="#æ¨¡å¼åº”ç”¨æ¡ˆä¾‹">æ¨¡å¼åº”ç”¨æ¡ˆä¾‹</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å°è£…ä¸å¯è§æ€§"><a class="header" href="#å°è£…ä¸å¯è§æ€§">å°è£…ä¸å¯è§æ€§</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ„é€ å‡½æ•°thiså…³é”®å­—ä¸åˆå§‹åŒ–åˆ—è¡¨"><a class="header" href="#æ„é€ å‡½æ•°thiså…³é”®å­—ä¸åˆå§‹åŒ–åˆ—è¡¨">æ„é€ å‡½æ•°ã€thiså…³é”®å­—ä¸åˆå§‹åŒ–åˆ—è¡¨</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å‘½åæ„é€ å™¨"><a class="header" href="#å‘½åæ„é€ å™¨">å‘½åæ„é€ å™¨</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="é‡å®šå‘æ„é€ å™¨"><a class="header" href="#é‡å®šå‘æ„é€ å™¨">é‡å®šå‘æ„é€ å™¨</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="factoryæ„é€ å™¨"><a class="header" href="#factoryæ„é€ å™¨">factoryæ„é€ å™¨</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ä½¿ç”¨lateå»¶è¿Ÿåˆå§‹åŒ–"><a class="header" href="#ä½¿ç”¨lateå»¶è¿Ÿåˆå§‹åŒ–">ä½¿ç”¨lateå»¶è¿Ÿåˆå§‹åŒ–</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constæ„é€ å™¨ä¸constå˜é‡"><a class="header" href="#constæ„é€ å™¨ä¸constå˜é‡">constæ„é€ å™¨ä¸constå˜é‡</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getter-ä¸-setter-æ–¹æ³•"><a class="header" href="#getter-ä¸-setter-æ–¹æ³•">getter ä¸ setter æ–¹æ³•</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ“ä½œç¬¦é‡è½½"><a class="header" href="#æ“ä½œç¬¦é‡è½½">æ“ä½œç¬¦é‡è½½</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="callable-ç±»"><a class="header" href="#callable-ç±»">callable ç±»</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æšä¸¾"><a class="header" href="#æšä¸¾">æšä¸¾</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ³¨è§£"><a class="header" href="#æ³¨è§£">æ³¨è§£</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="superæ„é€ å™¨"><a class="header" href="#superæ„é€ å™¨">superæ„é€ å™¨</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æŠ½è±¡ç±»"><a class="header" href="#æŠ½è±¡ç±»">æŠ½è±¡ç±»</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ¥å£ä¸implementså…³é”®å­—"><a class="header" href="#æ¥å£ä¸implementså…³é”®å­—">æ¥å£ä¸implementså…³é”®å­—</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ä½¿ç”¨mixinåˆ›å»ºå¯å¤ç”¨ä»£ç "><a class="header" href="#ä½¿ç”¨mixinåˆ›å»ºå¯å¤ç”¨ä»£ç ">ä½¿ç”¨Mixinåˆ›å»ºå¯å¤ç”¨ä»£ç </a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ä½¿ç”¨extensionæ‰©å±•å·²æœ‰çš„ç±»"><a class="header" href="#ä½¿ç”¨extensionæ‰©å±•å·²æœ‰çš„ç±»">ä½¿ç”¨extensionæ‰©å±•å·²æœ‰çš„ç±»</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="èŒƒå‹"><a class="header" href="#èŒƒå‹">èŒƒå‹</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="åˆ—è¡¨-list"><a class="header" href="#åˆ—è¡¨-list">åˆ—è¡¨ List</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="é›†åˆ-set"><a class="header" href="#é›†åˆ-set">é›†åˆ Set</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ä½¿ç”¨-map-åˆ›å»ºé”®å€¼å¯¹é›†åˆ"><a class="header" href="#ä½¿ç”¨-map-åˆ›å»ºé”®å€¼å¯¹é›†åˆ">ä½¿ç”¨ Map åˆ›å»º"é”®å€¼å¯¹"é›†åˆ</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hashcode-ä¸equals-æ“ä½œç¬¦"><a class="header" href="#hashcode-ä¸equals-æ“ä½œç¬¦">hashCode ä¸equals (==æ“ä½œç¬¦)</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="transformæ–¹æ³•"><a class="header" href="#transformæ–¹æ³•">Transformæ–¹æ³•</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="futureasync-ä¸-await"><a class="header" href="#futureasync-ä¸-await">Futureã€async ä¸ await</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iterable-stream-sync-async-ä¸-yield"><a class="header" href="#iterable-stream-sync-async-ä¸-yield">Iterable ã€Stream ã€sync*ã€ async* ä¸ yield</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="streamå‘½åæ„é€ å™¨"><a class="header" href="#streamå‘½åæ„é€ å™¨">Streamå‘½åæ„é€ å™¨</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ä½¿ç”¨listenawait-for-è®¢é˜…-stream"><a class="header" href="#ä½¿ç”¨listenawait-for-è®¢é˜…-stream">ä½¿ç”¨listen()/await for è®¢é˜… Stream</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="isolateä»‹ç»"><a class="header" href="#isolateä»‹ç»">Isolateä»‹ç»</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testgroup"><a class="header" href="#testgroup">test/group</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æµ‹è¯•å¼‚æ­¥ä»£ç "><a class="header" href="#æµ‹è¯•å¼‚æ­¥ä»£ç ">æµ‹è¯•å¼‚æ­¥ä»£ç </a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ä½¿ç”¨mockitoæ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–"><a class="header" href="#ä½¿ç”¨mockitoæ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–">ä½¿ç”¨mockitoæ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dartå‘½ä»¤è¡Œå·¥å…·"><a class="header" href="#dartå‘½ä»¤è¡Œå·¥å…·">dartå‘½ä»¤è¡Œå·¥å…·</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="solidç¼–ç å‡†åˆ™"><a class="header" href="#solidç¼–ç å‡†åˆ™">SOLIDç¼–ç å‡†åˆ™</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ç¼–å†™dartå‘½ä»¤è¡Œç¨‹åº"><a class="header" href="#ç¼–å†™dartå‘½ä»¤è¡Œç¨‹åº">ç¼–å†™Dartå‘½ä»¤è¡Œç¨‹åº</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ç¼–å†™dartæœåŠ¡ç«¯ç¼–ç¨‹"><a class="header" href="#ç¼–å†™dartæœåŠ¡ç«¯ç¼–ç¨‹">ç¼–å†™DartæœåŠ¡ç«¯ç¼–ç¨‹</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dart-å¸¸ç”¨packageä»‹ç»"><a class="header" href="#dart-å¸¸ç”¨packageä»‹ç»">Dart å¸¸ç”¨packageä»‹ç»</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/mermaid.min.js"></script>
        <script src="theme/mermaid-init.js"></script>

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </div>
    </body>
</html>
